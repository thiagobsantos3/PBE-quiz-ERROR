var eA=Object.defineProperty;var tA=(e,t,r)=>t in e?eA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var wh=(e,t,r)=>tA(e,typeof t!="symbol"?t+"":t,r);function rA(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var y1={exports:{}},Vd={},v1={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),sA=Symbol.for("react.portal"),iA=Symbol.for("react.fragment"),aA=Symbol.for("react.strict_mode"),oA=Symbol.for("react.profiler"),lA=Symbol.for("react.provider"),cA=Symbol.for("react.context"),uA=Symbol.for("react.forward_ref"),dA=Symbol.for("react.suspense"),fA=Symbol.for("react.memo"),hA=Symbol.for("react.lazy"),My=Symbol.iterator;function mA(e){return e===null||typeof e!="object"?null:(e=My&&e[My]||e["@@iterator"],typeof e=="function"?e:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w1=Object.assign,j1={};function vo(e,t,r){this.props=e,this.context=t,this.refs=j1,this.updater=r||b1}vo.prototype.isReactComponent={};vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _1(){}_1.prototype=vo.prototype;function Lg(e,t,r){this.props=e,this.context=t,this.refs=j1,this.updater=r||b1}var Rg=Lg.prototype=new _1;Rg.constructor=Lg;w1(Rg,vo.prototype);Rg.isPureReactComponent=!0;var Iy=Array.isArray,N1=Object.prototype.hasOwnProperty,qg={current:null},S1={key:!0,ref:!0,__self:!0,__source:!0};function k1(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)N1.call(t,n)&&!S1.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:dc,type:e,key:i,ref:o,props:s,_owner:qg.current}}function pA(e,t){return{$$typeof:dc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fg(e){return typeof e=="object"&&e!==null&&e.$$typeof===dc}function gA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $y=/\/+/g;function jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gA(""+e.key):t.toString(36)}function gu(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case dc:case sA:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jh(o,0):n,Iy(s)?(r="",e!=null&&(r=e.replace($y,"$&/")+"/"),gu(s,t,r,"",function(u){return u})):s!=null&&(Fg(s)&&(s=pA(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($y,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Iy(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jh(i,l);o+=gu(i,t,r,c,s)}else if(c=mA(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jh(i,l++),o+=gu(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(e,t,r){if(e==null)return e;var n=[],s=0;return gu(e,n,"","",function(i){return t.call(r,i,s++)}),n}function xA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},xu={transition:null},yA={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:xu,ReactCurrentOwner:qg};function P1(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Dc,forEach:function(e,t,r){Dc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dc(e,function(){t++}),t},toArray:function(e){return Dc(e,function(t){return t})||[]},only:function(e){if(!Fg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=vo;je.Fragment=iA;je.Profiler=oA;je.PureComponent=Lg;je.StrictMode=aA;je.Suspense=dA;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yA;je.act=P1;je.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=w1({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=qg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N1.call(t,c)&&!S1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:dc,type:e.type,key:s,ref:i,props:n,_owner:o}};je.createContext=function(e){return e={$$typeof:cA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lA,_context:e},e.Consumer=e};je.createElement=k1;je.createFactory=function(e){var t=k1.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:uA,render:e}};je.isValidElement=Fg;je.lazy=function(e){return{$$typeof:hA,_payload:{_status:-1,_result:e},_init:xA}};je.memo=function(e,t){return{$$typeof:fA,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=xu.transition;xu.transition={};try{e()}finally{xu.transition=t}};je.unstable_act=P1;je.useCallback=function(e,t){return ir.current.useCallback(e,t)};je.useContext=function(e){return ir.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};je.useEffect=function(e,t){return ir.current.useEffect(e,t)};je.useId=function(){return ir.current.useId()};je.useImperativeHandle=function(e,t,r){return ir.current.useImperativeHandle(e,t,r)};je.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return ir.current.useMemo(e,t)};je.useReducer=function(e,t,r){return ir.current.useReducer(e,t,r)};je.useRef=function(e){return ir.current.useRef(e)};je.useState=function(e){return ir.current.useState(e)};je.useSyncExternalStore=function(e,t,r){return ir.current.useSyncExternalStore(e,t,r)};je.useTransition=function(){return ir.current.useTransition()};je.version="18.3.1";v1.exports=je;var b=v1.exports;const se=Qn(b),vA=rA({__proto__:null,default:se},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bA=b,wA=Symbol.for("react.element"),jA=Symbol.for("react.fragment"),_A=Object.prototype.hasOwnProperty,NA=bA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SA={key:!0,ref:!0,__self:!0,__source:!0};function E1(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)_A.call(t,n)&&!SA.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:wA,type:e,key:i,ref:o,props:s,_owner:NA.current}}Vd.Fragment=jA;Vd.jsx=E1;Vd.jsxs=E1;y1.exports=Vd;var a=y1.exports,C1={exports:{}},Lr={},A1={exports:{}},T1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,E){var $=k.length;k.push(E);e:for(;0<$;){var R=$-1>>>1,U=k[R];if(0<s(U,E))k[R]=E,k[$]=U,$=R;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var E=k[0],$=k.pop();if($!==E){k[0]=$;e:for(var R=0,U=k.length,J=U>>>1;R<J;){var de=2*(R+1)-1,he=k[de],ee=de+1,ye=k[ee];if(0>s(he,$))ee<U&&0>s(ye,he)?(k[R]=ye,k[ee]=$,R=ee):(k[R]=he,k[de]=$,R=de);else if(ee<U&&0>s(ye,$))k[R]=ye,k[ee]=$,R=ee;else break e}}return E}function s(k,E){var $=k.sortIndex-E.sortIndex;return $!==0?$:k.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var E=r(u);E!==null;){if(E.callback===null)n(u);else if(E.startTime<=k)n(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(u)}}function _(k){if(y=!1,w(k),!p)if(r(c)!==null)p=!0,O(j);else{var E=r(u);E!==null&&A(_,E.startTime-k)}}function j(k,E){p=!1,y&&(y=!1,v(P),P=-1),h=!0;var $=m;try{for(w(E),f=r(c);f!==null&&(!(f.expirationTime>E)||k&&!T());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var U=R(f.expirationTime<=E);E=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&n(c),w(E)}else n(c);f=r(c)}if(f!==null)var J=!0;else{var de=r(u);de!==null&&A(_,de.startTime-E),J=!1}return J}finally{f=null,m=$,h=!1}}var N=!1,S=null,P=-1,C=5,I=-1;function T(){return!(e.unstable_now()-I<C)}function D(){if(S!==null){var k=e.unstable_now();I=k;var E=!0;try{E=S(!0,k)}finally{E?z():(N=!1,S=null)}}else N=!1}var z;if(typeof g=="function")z=function(){g(D)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,L=q.port2;q.port1.onmessage=D,z=function(){L.postMessage(null)}}else z=function(){x(D,0)};function O(k){S=k,N||(N=!0,z())}function A(k,E){P=x(function(){k(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,O(j))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(m){case 1:case 2:case 3:var E=3;break;default:E=m}var $=m;m=E;try{return k()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,E){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var $=m;m=k;try{return E()}finally{m=$}},e.unstable_scheduleCallback=function(k,E,$){var R=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?R+$:R):$=R,k){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=$+U,k={id:d++,callback:E,priorityLevel:k,startTime:$,expirationTime:U,sortIndex:-1},$>R?(k.sortIndex=$,t(u,k),r(c)===null&&k===r(u)&&(y?(v(P),P=-1):y=!0,A(_,$-R))):(k.sortIndex=U,t(c,k),p||h||(p=!0,O(j))),k},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(k){var E=m;return function(){var $=m;m=E;try{return k.apply(this,arguments)}finally{m=$}}}})(T1);A1.exports=T1;var kA=A1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA=b,Or=kA;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O1=new Set,El={};function na(e,t){Ga(e,t),Ga(e+"Capture",t)}function Ga(e,t){for(El[e]=t,e=0;e<t.length;e++)O1.add(t[e])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cm=Object.prototype.hasOwnProperty,EA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zy={},Ly={};function CA(e){return Cm.call(Ly,e)?!0:Cm.call(zy,e)?!1:EA.test(e)?Ly[e]=!0:(zy[e]=!0,!1)}function AA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TA(e,t,r,n){if(t===null||typeof t>"u"||AA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ug=/[\-:]([a-z])/g;function Bg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ug,Bg);Lt[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ug,Bg);Lt[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ug,Bg);Lt[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qg(e,t,r,n){var s=Lt.hasOwnProperty(t)?Lt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TA(t,r,s,n)&&(r=null),n||s===null?CA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ys=PA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),ja=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),Vg=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),D1=Symbol.for("react.provider"),M1=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Om=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Os=Symbol.for("react.lazy"),I1=Symbol.for("react.offscreen"),Ry=Symbol.iterator;function Lo(e){return e===null||typeof e!="object"?null:(e=Ry&&e[Ry]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,_h;function sl(e){if(_h===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var Nh=!1;function Sh(e,t){if(!e||Nh)return"";Nh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Nh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sl(e):""}function OA(e){switch(e.tag){case 5:return sl(e.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return e=Sh(e.type,!1),e;case 11:return e=Sh(e.type.render,!1),e;case 1:return e=Sh(e.type,!0),e;default:return""}}function Dm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _a:return"Fragment";case ja:return"Portal";case Am:return"Profiler";case Vg:return"StrictMode";case Tm:return"Suspense";case Om:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case M1:return(e.displayName||"Context")+".Consumer";case D1:return(e._context.displayName||"Context")+".Provider";case Wg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kg:return t=e.displayName||null,t!==null?t:Dm(e.type)||"Memo";case Os:t=e._payload,e=e._init;try{return Dm(e(t))}catch{}}return null}function DA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(t);case 8:return t===Vg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ni(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MA(e){var t=$1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ic(e){e._valueTracker||(e._valueTracker=MA(e))}function z1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Au(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mm(e,t){var r=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function qy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ni(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function L1(e,t){t=t.checked,t!=null&&Qg(e,"checked",t,!1)}function Im(e,t){L1(e,t);var r=ni(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$m(e,t.type,r):t.hasOwnProperty("defaultValue")&&$m(e,t.type,ni(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $m(e,t,r){(t!=="number"||Au(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var il=Array.isArray;function za(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ni(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Uy(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(il(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ni(r)}}function R1(e,t){var r=ni(t.value),n=ni(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function By(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function q1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?q1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $c,F1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$c.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IA=["Webkit","ms","Moz","O"];Object.keys(dl).forEach(function(e){IA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dl[t]=dl[e]})});function U1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dl.hasOwnProperty(e)&&dl[e]?(""+t).trim():t+"px"}function B1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=U1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var $A=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(e,t){if(t){if($A[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function qm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fm=null;function Hg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Um=null,La=null,Ra=null;function Qy(e){if(e=mc(e)){if(typeof Um!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Yd(t),Um(e.stateNode,e.type,t))}}function Q1(e){La?Ra?Ra.push(e):Ra=[e]:La=e}function V1(){if(La){var e=La,t=Ra;if(Ra=La=null,Qy(e),t)for(e=0;e<t.length;e++)Qy(t[e])}}function W1(e,t){return e(t)}function K1(){}var kh=!1;function H1(e,t,r){if(kh)return e(t,r);kh=!0;try{return W1(e,t,r)}finally{kh=!1,(La!==null||Ra!==null)&&(K1(),V1())}}function Al(e,t){var r=e.stateNode;if(r===null)return null;var n=Yd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var Bm=!1;if(cs)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Bm=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Bm=!1}function zA(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var fl=!1,Tu=null,Ou=!1,Qm=null,LA={onError:function(e){fl=!0,Tu=e}};function RA(e,t,r,n,s,i,o,l,c){fl=!1,Tu=null,zA.apply(LA,arguments)}function qA(e,t,r,n,s,i,o,l,c){if(RA.apply(this,arguments),fl){if(fl){var u=Tu;fl=!1,Tu=null}else throw Error(X(198));Ou||(Ou=!0,Qm=u)}}function sa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function G1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vy(e){if(sa(e)!==e)throw Error(X(188))}function FA(e){var t=e.alternate;if(!t){if(t=sa(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Vy(s),e;if(i===n)return Vy(s),t;i=i.sibling}throw Error(X(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function Y1(e){return e=FA(e),e!==null?X1(e):null}function X1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X1(e);if(t!==null)return t;e=e.sibling}return null}var J1=Or.unstable_scheduleCallback,Wy=Or.unstable_cancelCallback,UA=Or.unstable_shouldYield,BA=Or.unstable_requestPaint,rt=Or.unstable_now,QA=Or.unstable_getCurrentPriorityLevel,Gg=Or.unstable_ImmediatePriority,Z1=Or.unstable_UserBlockingPriority,Du=Or.unstable_NormalPriority,VA=Or.unstable_LowPriority,e_=Or.unstable_IdlePriority,Wd=null,$n=null;function WA(e){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Wd,e,void 0,(e.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:GA,KA=Math.log,HA=Math.LN2;function GA(e){return e>>>=0,e===0?32:31-(KA(e)/HA|0)|0}var zc=64,Lc=4194304;function al(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=al(l):(i&=o,i!==0&&(n=al(i)))}else o=r&~s,o!==0?n=al(o):i!==0&&(n=al(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-jn(t),s=1<<r,n|=e[r],t&=~s;return n}function YA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XA(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-jn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=YA(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Vm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t_(){var e=zc;return zc<<=1,!(zc&4194240)&&(zc=64),e}function Ph(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jn(t),e[t]=r}function JA(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-jn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Yg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-jn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ae=0;function r_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var n_,Xg,s_,i_,a_,Wm=!1,Rc=[],Ws=null,Ks=null,Hs=null,Tl=new Map,Ol=new Map,$s=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ky(e,t){switch(e){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":Tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(t.pointerId)}}function qo(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=mc(t),t!==null&&Xg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function eT(e,t,r,n,s){switch(t){case"focusin":return Ws=qo(Ws,e,t,r,n,s),!0;case"dragenter":return Ks=qo(Ks,e,t,r,n,s),!0;case"mouseover":return Hs=qo(Hs,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Tl.set(i,qo(Tl.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ol.set(i,qo(Ol.get(i)||null,e,t,r,n,s)),!0}return!1}function o_(e){var t=Pi(e.target);if(t!==null){var r=sa(t);if(r!==null){if(t=r.tag,t===13){if(t=G1(r),t!==null){e.blockedOn=t,a_(e.priority,function(){s_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Km(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Fm=n,r.target.dispatchEvent(n),Fm=null}else return t=mc(r),t!==null&&Xg(t),e.blockedOn=r,!1;t.shift()}return!0}function Hy(e,t,r){yu(e)&&r.delete(t)}function tT(){Wm=!1,Ws!==null&&yu(Ws)&&(Ws=null),Ks!==null&&yu(Ks)&&(Ks=null),Hs!==null&&yu(Hs)&&(Hs=null),Tl.forEach(Hy),Ol.forEach(Hy)}function Fo(e,t){e.blockedOn===t&&(e.blockedOn=null,Wm||(Wm=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,tT)))}function Dl(e){function t(s){return Fo(s,e)}if(0<Rc.length){Fo(Rc[0],e);for(var r=1;r<Rc.length;r++){var n=Rc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ws!==null&&Fo(Ws,e),Ks!==null&&Fo(Ks,e),Hs!==null&&Fo(Hs,e),Tl.forEach(t),Ol.forEach(t),r=0;r<$s.length;r++)n=$s[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$s.length&&(r=$s[0],r.blockedOn===null);)o_(r),r.blockedOn===null&&$s.shift()}var qa=ys.ReactCurrentBatchConfig,Iu=!0;function rT(e,t,r,n){var s=Ae,i=qa.transition;qa.transition=null;try{Ae=1,Jg(e,t,r,n)}finally{Ae=s,qa.transition=i}}function nT(e,t,r,n){var s=Ae,i=qa.transition;qa.transition=null;try{Ae=4,Jg(e,t,r,n)}finally{Ae=s,qa.transition=i}}function Jg(e,t,r,n){if(Iu){var s=Km(e,t,r,n);if(s===null)zh(e,t,n,$u,r),Ky(e,n);else if(eT(s,e,t,r,n))n.stopPropagation();else if(Ky(e,n),t&4&&-1<ZA.indexOf(e)){for(;s!==null;){var i=mc(s);if(i!==null&&n_(i),i=Km(e,t,r,n),i===null&&zh(e,t,n,$u,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else zh(e,t,n,null,r)}}var $u=null;function Km(e,t,r,n){if($u=null,e=Hg(n),e=Pi(e),e!==null)if(t=sa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=G1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $u=e,null}function l_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QA()){case Gg:return 1;case Z1:return 4;case Du:case VA:return 16;case e_:return 536870912;default:return 16}default:return 16}}var Fs=null,Zg=null,vu=null;function c_(){if(vu)return vu;var e,t=Zg,r=t.length,n,s="value"in Fs?Fs.value:Fs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return vu=s.slice(e,1<n?1-n:void 0)}function bu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qc(){return!0}function Gy(){return!1}function Rr(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qc:Gy,this.isPropagationStopped=Gy,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),t}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e0=Rr(bo),hc=Ze({},bo,{view:0,detail:0}),sT=Rr(hc),Eh,Ch,Uo,Kd=Ze({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uo&&(Uo&&e.type==="mousemove"?(Eh=e.screenX-Uo.screenX,Ch=e.screenY-Uo.screenY):Ch=Eh=0,Uo=e),Eh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),Yy=Rr(Kd),iT=Ze({},Kd,{dataTransfer:0}),aT=Rr(iT),oT=Ze({},hc,{relatedTarget:0}),Ah=Rr(oT),lT=Ze({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),cT=Rr(lT),uT=Ze({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dT=Rr(uT),fT=Ze({},bo,{data:0}),Xy=Rr(fT),hT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pT[e])?!!t[e]:!1}function t0(){return gT}var xT=Ze({},hc,{key:function(e){if(e.key){var t=hT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(e){return e.type==="keypress"?bu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yT=Rr(xT),vT=Ze({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=Rr(vT),bT=Ze({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),wT=Rr(bT),jT=Ze({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_T=Rr(jT),NT=Ze({},Kd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=Rr(NT),kT=[9,13,27,32],r0=cs&&"CompositionEvent"in window,hl=null;cs&&"documentMode"in document&&(hl=document.documentMode);var PT=cs&&"TextEvent"in window&&!hl,u_=cs&&(!r0||hl&&8<hl&&11>=hl),Zy=" ",ev=!1;function d_(e,t){switch(e){case"keyup":return kT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Na=!1;function ET(e,t){switch(e){case"compositionend":return f_(t);case"keypress":return t.which!==32?null:(ev=!0,Zy);case"textInput":return e=t.data,e===Zy&&ev?null:e;default:return null}}function CT(e,t){if(Na)return e==="compositionend"||!r0&&d_(e,t)?(e=c_(),vu=Zg=Fs=null,Na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u_&&t.locale!=="ko"?null:t.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AT[e.type]:t==="textarea"}function h_(e,t,r,n){Q1(n),t=zu(t,"onChange"),0<t.length&&(r=new e0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ml=null,Ml=null;function TT(e){N_(e,0)}function Hd(e){var t=Pa(e);if(z1(t))return e}function OT(e,t){if(e==="change")return t}var m_=!1;if(cs){var Th;if(cs){var Oh="oninput"in document;if(!Oh){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),Oh=typeof rv.oninput=="function"}Th=Oh}else Th=!1;m_=Th&&(!document.documentMode||9<document.documentMode)}function nv(){ml&&(ml.detachEvent("onpropertychange",p_),Ml=ml=null)}function p_(e){if(e.propertyName==="value"&&Hd(Ml)){var t=[];h_(t,Ml,e,Hg(e)),H1(TT,t)}}function DT(e,t,r){e==="focusin"?(nv(),ml=t,Ml=r,ml.attachEvent("onpropertychange",p_)):e==="focusout"&&nv()}function MT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hd(Ml)}function IT(e,t){if(e==="click")return Hd(t)}function $T(e,t){if(e==="input"||e==="change")return Hd(t)}function zT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sn=typeof Object.is=="function"?Object.is:zT;function Il(e,t){if(Sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Cm.call(t,s)||!Sn(e[s],t[s]))return!1}return!0}function sv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iv(e,t){var r=sv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sv(r)}}function g_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x_(){for(var e=window,t=Au();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Au(e.document)}return t}function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LT(e){var t=x_(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&g_(r.ownerDocument.documentElement,r)){if(n!==null&&n0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=iv(r,i);var o=iv(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RT=cs&&"documentMode"in document&&11>=document.documentMode,Sa=null,Hm=null,pl=null,Gm=!1;function av(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gm||Sa==null||Sa!==Au(n)||(n=Sa,"selectionStart"in n&&n0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pl&&Il(pl,n)||(pl=n,n=zu(Hm,"onSelect"),0<n.length&&(t=new e0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sa)))}function Fc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ka={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},Dh={},y_={};cs&&(y_=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Gd(e){if(Dh[e])return Dh[e];if(!ka[e])return e;var t=ka[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in y_)return Dh[e]=t[r];return e}var v_=Gd("animationend"),b_=Gd("animationiteration"),w_=Gd("animationstart"),j_=Gd("transitionend"),__=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(e,t){__.set(e,t),na(t,[e])}for(var Mh=0;Mh<ov.length;Mh++){var Ih=ov[Mh],qT=Ih.toLowerCase(),FT=Ih[0].toUpperCase()+Ih.slice(1);oi(qT,"on"+FT)}oi(v_,"onAnimationEnd");oi(b_,"onAnimationIteration");oi(w_,"onAnimationStart");oi("dblclick","onDoubleClick");oi("focusin","onFocus");oi("focusout","onBlur");oi(j_,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function lv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qA(n,t,void 0,e),e.currentTarget=null}function N_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;lv(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;lv(s,l,u),i=c}}}if(Ou)throw e=Qm,Ou=!1,Qm=null,e}function Fe(e,t){var r=t[ep];r===void 0&&(r=t[ep]=new Set);var n=e+"__bubble";r.has(n)||(S_(t,e,2,!1),r.add(n))}function $h(e,t,r){var n=0;t&&(n|=4),S_(r,e,n,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function $l(e){if(!e[Uc]){e[Uc]=!0,O1.forEach(function(r){r!=="selectionchange"&&(UT.has(r)||$h(r,!1,e),$h(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uc]||(t[Uc]=!0,$h("selectionchange",!1,t))}}function S_(e,t,r,n){switch(l_(t)){case 1:var s=rT;break;case 4:s=nT;break;default:s=Jg}r=s.bind(null,t,r,e),s=void 0,!Bm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Pi(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}H1(function(){var u=i,d=Hg(r),f=[];e:{var m=__.get(e);if(m!==void 0){var h=e0,p=e;switch(e){case"keypress":if(bu(r)===0)break e;case"keydown":case"keyup":h=yT;break;case"focusin":p="focus",h=Ah;break;case"focusout":p="blur",h=Ah;break;case"beforeblur":case"afterblur":h=Ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=aT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=wT;break;case v_:case b_:case w_:h=cT;break;case j_:h=_T;break;case"scroll":h=sT;break;case"wheel":h=ST;break;case"copy":case"cut":case"paste":h=dT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Jy}var y=(t&4)!==0,x=!y&&e==="scroll",v=y?m!==null?m+"Capture":null:m;y=[];for(var g=u,w;g!==null;){w=g;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Al(g,v),_!=null&&y.push(zl(g,_,w)))),x)break;g=g.return}0<y.length&&(m=new h(m,p,null,r,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&r!==Fm&&(p=r.relatedTarget||r.fromElement)&&(Pi(p)||p[us]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=u,p=p?Pi(p):null,p!==null&&(x=sa(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(y=Yy,_="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=Jy,_="onPointerLeave",v="onPointerEnter",g="pointer"),x=h==null?m:Pa(h),w=p==null?m:Pa(p),m=new y(_,g+"leave",h,r,d),m.target=x,m.relatedTarget=w,_=null,Pi(d)===u&&(y=new y(v,g+"enter",p,r,d),y.target=w,y.relatedTarget=x,_=y),x=_,h&&p)t:{for(y=h,v=p,g=0,w=y;w;w=fa(w))g++;for(w=0,_=v;_;_=fa(_))w++;for(;0<g-w;)y=fa(y),g--;for(;0<w-g;)v=fa(v),w--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=fa(y),v=fa(v)}y=null}else y=null;h!==null&&cv(f,m,h,y,!1),p!==null&&x!==null&&cv(f,x,p,y,!0)}}e:{if(m=u?Pa(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=OT;else if(tv(m))if(m_)j=$T;else{j=MT;var N=DT}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=IT);if(j&&(j=j(e,u))){h_(f,j,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&$m(m,"number",m.value)}switch(N=u?Pa(u):window,e){case"focusin":(tv(N)||N.contentEditable==="true")&&(Sa=N,Hm=u,pl=null);break;case"focusout":pl=Hm=Sa=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,av(f,r,d);break;case"selectionchange":if(RT)break;case"keydown":case"keyup":av(f,r,d)}var S;if(r0)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Na?d_(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(u_&&r.locale!=="ko"&&(Na||P!=="onCompositionStart"?P==="onCompositionEnd"&&Na&&(S=c_()):(Fs=d,Zg="value"in Fs?Fs.value:Fs.textContent,Na=!0)),N=zu(u,P),0<N.length&&(P=new Xy(P,e,null,r,d),f.push({event:P,listeners:N}),S?P.data=S:(S=f_(r),S!==null&&(P.data=S)))),(S=PT?ET(e,r):CT(e,r))&&(u=zu(u,"onBeforeInput"),0<u.length&&(d=new Xy("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}N_(f,t)})}function zl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function zu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Al(e,r),i!=null&&n.unshift(zl(e,i,s)),i=Al(e,t),i!=null&&n.push(zl(e,i,s))),e=e.return}return n}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cv(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Al(r,i),c!=null&&o.unshift(zl(r,c,l))):s||(c=Al(r,i),c!=null&&o.push(zl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var BT=/\r\n?/g,QT=/\u0000|\uFFFD/g;function uv(e){return(typeof e=="string"?e:""+e).replace(BT,`
`).replace(QT,"")}function Bc(e,t,r){if(t=uv(t),uv(e)!==t&&r)throw Error(X(425))}function Lu(){}var Ym=null,Xm=null;function Jm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zm=typeof setTimeout=="function"?setTimeout:void 0,VT=typeof clearTimeout=="function"?clearTimeout:void 0,dv=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof dv<"u"?function(e){return dv.resolve(null).then(e).catch(KT)}:Zm;function KT(e){setTimeout(function(){throw e})}function Lh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Dl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Dl(t)}function Gs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Dn="__reactFiber$"+wo,Ll="__reactProps$"+wo,us="__reactContainer$"+wo,ep="__reactEvents$"+wo,HT="__reactListeners$"+wo,GT="__reactHandles$"+wo;function Pi(e){var t=e[Dn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[us]||r[Dn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=fv(e);e!==null;){if(r=e[Dn])return r;e=fv(e)}return t}e=r,r=e.parentNode}return null}function mc(e){return e=e[Dn]||e[us],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Yd(e){return e[Ll]||null}var tp=[],Ea=-1;function li(e){return{current:e}}function Qe(e){0>Ea||(e.current=tp[Ea],tp[Ea]=null,Ea--)}function Le(e,t){Ea++,tp[Ea]=e.current,e.current=t}var si={},Gt=li(si),yr=li(!1),Ui=si;function Ya(e,t){var r=e.type.contextTypes;if(!r)return si;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vr(e){return e=e.childContextTypes,e!=null}function Ru(){Qe(yr),Qe(Gt)}function hv(e,t,r){if(Gt.current!==si)throw Error(X(168));Le(Gt,t),Le(yr,r)}function k_(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(X(108,DA(e)||"Unknown",s));return Ze({},r,n)}function qu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||si,Ui=Gt.current,Le(Gt,e),Le(yr,yr.current),!0}function mv(e,t,r){var n=e.stateNode;if(!n)throw Error(X(169));r?(e=k_(e,t,Ui),n.__reactInternalMemoizedMergedChildContext=e,Qe(yr),Qe(Gt),Le(Gt,e)):Qe(yr),Le(yr,r)}var Yn=null,Xd=!1,Rh=!1;function P_(e){Yn===null?Yn=[e]:Yn.push(e)}function YT(e){Xd=!0,P_(e)}function ci(){if(!Rh&&Yn!==null){Rh=!0;var e=0,t=Ae;try{var r=Yn;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Yn=null,Xd=!1}catch(s){throw Yn!==null&&(Yn=Yn.slice(e+1)),J1(Gg,ci),s}finally{Ae=t,Rh=!1}}return null}var Ca=[],Aa=0,Fu=null,Uu=0,Br=[],Qr=0,Bi=null,rs=1,ns="";function bi(e,t){Ca[Aa++]=Uu,Ca[Aa++]=Fu,Fu=e,Uu=t}function E_(e,t,r){Br[Qr++]=rs,Br[Qr++]=ns,Br[Qr++]=Bi,Bi=e;var n=rs;e=ns;var s=32-jn(n)-1;n&=~(1<<s),r+=1;var i=32-jn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,rs=1<<32-jn(t)+s|r<<s|n,ns=i+e}else rs=1<<i|r<<s|n,ns=e}function s0(e){e.return!==null&&(bi(e,1),E_(e,1,0))}function i0(e){for(;e===Fu;)Fu=Ca[--Aa],Ca[Aa]=null,Uu=Ca[--Aa],Ca[Aa]=null;for(;e===Bi;)Bi=Br[--Qr],Br[Qr]=null,ns=Br[--Qr],Br[Qr]=null,rs=Br[--Qr],Br[Qr]=null}var Ar=null,Er=null,Ke=!1,pn=null;function C_(e,t){var r=Kr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ar=e,Er=Gs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ar=e,Er=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bi!==null?{id:rs,overflow:ns}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ar=e,Er=null,!0):!1;default:return!1}}function rp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function np(e){if(Ke){var t=Er;if(t){var r=t;if(!pv(e,t)){if(rp(e))throw Error(X(418));t=Gs(r.nextSibling);var n=Ar;t&&pv(e,t)?C_(n,r):(e.flags=e.flags&-4097|2,Ke=!1,Ar=e)}}else{if(rp(e))throw Error(X(418));e.flags=e.flags&-4097|2,Ke=!1,Ar=e}}}function gv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ar=e}function Qc(e){if(e!==Ar)return!1;if(!Ke)return gv(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jm(e.type,e.memoizedProps)),t&&(t=Er)){if(rp(e))throw A_(),Error(X(418));for(;t;)C_(e,t),t=Gs(t.nextSibling)}if(gv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Er=Gs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Er=null}}else Er=Ar?Gs(e.stateNode.nextSibling):null;return!0}function A_(){for(var e=Er;e;)e=Gs(e.nextSibling)}function Xa(){Er=Ar=null,Ke=!1}function a0(e){pn===null?pn=[e]:pn.push(e)}var XT=ys.ReactCurrentBatchConfig;function Bo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Vc(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xv(e){var t=e._init;return t(e._payload)}function T_(e){function t(v,g){if(e){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=Zs(v,g),v.index=0,v.sibling=null,v}function i(v,g,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,w,_){return g===null||g.tag!==6?(g=Wh(w,v.mode,_),g.return=v,g):(g=s(g,w),g.return=v,g)}function c(v,g,w,_){var j=w.type;return j===_a?d(v,g,w.props.children,_,w.key):g!==null&&(g.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Os&&xv(j)===g.type)?(_=s(g,w.props),_.ref=Bo(v,g,w),_.return=v,_):(_=Pu(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,g,w),_.return=v,_)}function u(v,g,w,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Kh(w,v.mode,_),g.return=v,g):(g=s(g,w.children||[]),g.return=v,g)}function d(v,g,w,_,j){return g===null||g.tag!==7?(g=zi(w,v.mode,_,j),g.return=v,g):(g=s(g,w),g.return=v,g)}function f(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Wh(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mc:return w=Pu(g.type,g.key,g.props,null,v.mode,w),w.ref=Bo(v,null,g),w.return=v,w;case ja:return g=Kh(g,v.mode,w),g.return=v,g;case Os:var _=g._init;return f(v,_(g._payload),w)}if(il(g)||Lo(g))return g=zi(g,v.mode,w,null),g.return=v,g;Vc(v,g)}return null}function m(v,g,w,_){var j=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:return w.key===j?c(v,g,w,_):null;case ja:return w.key===j?u(v,g,w,_):null;case Os:return j=w._init,m(v,g,j(w._payload),_)}if(il(w)||Lo(w))return j!==null?null:d(v,g,w,_,null);Vc(v,w)}return null}function h(v,g,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(g,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mc:return v=v.get(_.key===null?w:_.key)||null,c(g,v,_,j);case ja:return v=v.get(_.key===null?w:_.key)||null,u(g,v,_,j);case Os:var N=_._init;return h(v,g,w,N(_._payload),j)}if(il(_)||Lo(_))return v=v.get(w)||null,d(g,v,_,j,null);Vc(g,_)}return null}function p(v,g,w,_){for(var j=null,N=null,S=g,P=g=0,C=null;S!==null&&P<w.length;P++){S.index>P?(C=S,S=null):C=S.sibling;var I=m(v,S,w[P],_);if(I===null){S===null&&(S=C);break}e&&S&&I.alternate===null&&t(v,S),g=i(I,g,P),N===null?j=I:N.sibling=I,N=I,S=C}if(P===w.length)return r(v,S),Ke&&bi(v,P),j;if(S===null){for(;P<w.length;P++)S=f(v,w[P],_),S!==null&&(g=i(S,g,P),N===null?j=S:N.sibling=S,N=S);return Ke&&bi(v,P),j}for(S=n(v,S);P<w.length;P++)C=h(S,v,P,w[P],_),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?P:C.key),g=i(C,g,P),N===null?j=C:N.sibling=C,N=C);return e&&S.forEach(function(T){return t(v,T)}),Ke&&bi(v,P),j}function y(v,g,w,_){var j=Lo(w);if(typeof j!="function")throw Error(X(150));if(w=j.call(w),w==null)throw Error(X(151));for(var N=j=null,S=g,P=g=0,C=null,I=w.next();S!==null&&!I.done;P++,I=w.next()){S.index>P?(C=S,S=null):C=S.sibling;var T=m(v,S,I.value,_);if(T===null){S===null&&(S=C);break}e&&S&&T.alternate===null&&t(v,S),g=i(T,g,P),N===null?j=T:N.sibling=T,N=T,S=C}if(I.done)return r(v,S),Ke&&bi(v,P),j;if(S===null){for(;!I.done;P++,I=w.next())I=f(v,I.value,_),I!==null&&(g=i(I,g,P),N===null?j=I:N.sibling=I,N=I);return Ke&&bi(v,P),j}for(S=n(v,S);!I.done;P++,I=w.next())I=h(S,v,P,I.value,_),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?P:I.key),g=i(I,g,P),N===null?j=I:N.sibling=I,N=I);return e&&S.forEach(function(D){return t(v,D)}),Ke&&bi(v,P),j}function x(v,g,w,_){if(typeof w=="object"&&w!==null&&w.type===_a&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:e:{for(var j=w.key,N=g;N!==null;){if(N.key===j){if(j=w.type,j===_a){if(N.tag===7){r(v,N.sibling),g=s(N,w.props.children),g.return=v,v=g;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Os&&xv(j)===N.type){r(v,N.sibling),g=s(N,w.props),g.ref=Bo(v,N,w),g.return=v,v=g;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===_a?(g=zi(w.props.children,v.mode,_,w.key),g.return=v,v=g):(_=Pu(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,g,w),_.return=v,v=_)}return o(v);case ja:e:{for(N=w.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){r(v,g.sibling),g=s(g,w.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=Kh(w,v.mode,_),g.return=v,v=g}return o(v);case Os:return N=w._init,x(v,g,N(w._payload),_)}if(il(w))return p(v,g,w,_);if(Lo(w))return y(v,g,w,_);Vc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(r(v,g.sibling),g=s(g,w),g.return=v,v=g):(r(v,g),g=Wh(w,v.mode,_),g.return=v,v=g),o(v)):r(v,g)}return x}var Ja=T_(!0),O_=T_(!1),Bu=li(null),Qu=null,Ta=null,o0=null;function l0(){o0=Ta=Qu=null}function c0(e){var t=Bu.current;Qe(Bu),e._currentValue=t}function sp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fa(e,t){Qu=e,o0=Ta=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hr=!0),e.firstContext=null)}function Zr(e){var t=e._currentValue;if(o0!==e)if(e={context:e,memoizedValue:t,next:null},Ta===null){if(Qu===null)throw Error(X(308));Ta=e,Qu.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var Ei=null;function u0(e){Ei===null?Ei=[e]:Ei.push(e)}function D_(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,u0(t)):(r.next=s.next,s.next=r),t.interleaved=r,ds(e,n)}function ds(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ds=!1;function d0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ys(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,_e&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ds(e,r)}return s=n.interleaved,s===null?(t.next=t,u0(n)):(t.next=s.next,s.next=t),n.interleaved=t,ds(e,r)}function wu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yg(e,r)}}function yv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vu(e,t,r,n){var s=e.updateQueue;Ds=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,h=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(m=t,h=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){f=p.call(h,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(h,f,m):p,m==null)break e;f=Ze({},f,m);break e;case 2:Ds=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Vi|=o,e.lanes=o,e.memoizedState=f}}function vv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(X(191,s));s.call(n)}}}var pc={},zn=li(pc),Rl=li(pc),ql=li(pc);function Ci(e){if(e===pc)throw Error(X(174));return e}function f0(e,t){switch(Le(ql,t),Le(Rl,e),Le(zn,pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lm(t,e)}Qe(zn),Le(zn,t)}function Za(){Qe(zn),Qe(Rl),Qe(ql)}function I_(e){Ci(ql.current);var t=Ci(zn.current),r=Lm(t,e.type);t!==r&&(Le(Rl,e),Le(zn,r))}function h0(e){Rl.current===e&&(Qe(zn),Qe(Rl))}var Ye=li(0);function Wu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function m0(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var ju=ys.ReactCurrentDispatcher,Fh=ys.ReactCurrentBatchConfig,Qi=0,Je=null,mt=null,jt=null,Ku=!1,gl=!1,Fl=0,JT=0;function qt(){throw Error(X(321))}function p0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Sn(e[r],t[r]))return!1;return!0}function g0(e,t,r,n,s,i){if(Qi=i,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ju.current=e===null||e.memoizedState===null?rO:nO,e=r(n,s),gl){i=0;do{if(gl=!1,Fl=0,25<=i)throw Error(X(301));i+=1,jt=mt=null,t.updateQueue=null,ju.current=sO,e=r(n,s)}while(gl)}if(ju.current=Hu,t=mt!==null&&mt.next!==null,Qi=0,jt=mt=Je=null,Ku=!1,t)throw Error(X(300));return e}function x0(){var e=Fl!==0;return Fl=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Je.memoizedState=jt=e:jt=jt.next=e,jt}function en(){if(mt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=mt.next;var t=jt===null?Je.memoizedState:jt.next;if(t!==null)jt=t,mt=e;else{if(e===null)throw Error(X(310));mt=e,e={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},jt===null?Je.memoizedState=jt=e:jt=jt.next=e}return jt}function Ul(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=mt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Qi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Je.lanes|=d,Vi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Sn(n,t.memoizedState)||(hr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Je.lanes|=i,Vi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Sn(i,t.memoizedState)||(hr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function $_(){}function z_(e,t){var r=Je,n=en(),s=t(),i=!Sn(n.memoizedState,s);if(i&&(n.memoizedState=s,hr=!0),n=n.queue,y0(q_.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||jt!==null&&jt.memoizedState.tag&1){if(r.flags|=2048,Bl(9,R_.bind(null,r,n,s,t),void 0,null),_t===null)throw Error(X(349));Qi&30||L_(r,t,s)}return s}function L_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function R_(e,t,r,n){t.value=r,t.getSnapshot=n,F_(t)&&U_(e)}function q_(e,t,r){return r(function(){F_(t)&&U_(e)})}function F_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Sn(e,r)}catch{return!0}}function U_(e){var t=ds(e,1);t!==null&&_n(t,e,1,-1)}function bv(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t.queue=e,e=e.dispatch=tO.bind(null,Je,e),[t.memoizedState,e]}function Bl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function B_(){return en().memoizedState}function _u(e,t,r,n){var s=Tn();Je.flags|=e,s.memoizedState=Bl(1|t,r,void 0,n===void 0?null:n)}function Jd(e,t,r,n){var s=en();n=n===void 0?null:n;var i=void 0;if(mt!==null){var o=mt.memoizedState;if(i=o.destroy,n!==null&&p0(n,o.deps)){s.memoizedState=Bl(t,r,i,n);return}}Je.flags|=e,s.memoizedState=Bl(1|t,r,i,n)}function wv(e,t){return _u(8390656,8,e,t)}function y0(e,t){return Jd(2048,8,e,t)}function Q_(e,t){return Jd(4,2,e,t)}function V_(e,t){return Jd(4,4,e,t)}function W_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K_(e,t,r){return r=r!=null?r.concat([e]):null,Jd(4,4,W_.bind(null,t,e),r)}function v0(){}function H_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function G_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Y_(e,t,r){return Qi&21?(Sn(r,t)||(r=t_(),Je.lanes|=r,Vi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hr=!0),e.memoizedState=r)}function ZT(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=Fh.transition;Fh.transition={};try{e(!1),t()}finally{Ae=r,Fh.transition=n}}function X_(){return en().memoizedState}function eO(e,t,r){var n=Js(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},J_(e))Z_(t,r);else if(r=D_(e,t,r,n),r!==null){var s=nr();_n(r,e,n,s),eN(r,t,n)}}function tO(e,t,r){var n=Js(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(J_(e))Z_(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Sn(l,o)){var c=t.interleaved;c===null?(s.next=s,u0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=D_(e,t,s,n),r!==null&&(s=nr(),_n(r,e,n,s),eN(r,t,n))}}function J_(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Z_(e,t){gl=Ku=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yg(e,r)}}var Hu={readContext:Zr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},rO={readContext:Zr,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:Zr,useEffect:wv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_u(4194308,4,W_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _u(4194308,4,e,t)},useInsertionEffect:function(e,t){return _u(4,2,e,t)},useMemo:function(e,t){var r=Tn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Tn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eO.bind(null,Je,e),[n.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:bv,useDebugValue:v0,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=bv(!1),t=e[0];return e=ZT.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Je,s=Tn();if(Ke){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),_t===null)throw Error(X(349));Qi&30||L_(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,wv(q_.bind(null,n,i,e),[e]),n.flags|=2048,Bl(9,R_.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Tn(),t=_t.identifierPrefix;if(Ke){var r=ns,n=rs;r=(n&~(1<<32-jn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nO={readContext:Zr,useCallback:H_,useContext:Zr,useEffect:y0,useImperativeHandle:K_,useInsertionEffect:Q_,useLayoutEffect:V_,useMemo:G_,useReducer:Uh,useRef:B_,useState:function(){return Uh(Ul)},useDebugValue:v0,useDeferredValue:function(e){var t=en();return Y_(t,mt.memoizedState,e)},useTransition:function(){var e=Uh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:$_,useSyncExternalStore:z_,useId:X_,unstable_isNewReconciler:!1},sO={readContext:Zr,useCallback:H_,useContext:Zr,useEffect:y0,useImperativeHandle:K_,useInsertionEffect:Q_,useLayoutEffect:V_,useMemo:G_,useReducer:Bh,useRef:B_,useState:function(){return Bh(Ul)},useDebugValue:v0,useDeferredValue:function(e){var t=en();return mt===null?t.memoizedState=e:Y_(t,mt.memoizedState,e)},useTransition:function(){var e=Bh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:$_,useSyncExternalStore:z_,useId:X_,unstable_isNewReconciler:!1};function fn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ip(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zd={isMounted:function(e){return(e=e._reactInternals)?sa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Js(e),i=as(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ys(e,i,s),t!==null&&(_n(t,e,s,n),wu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Js(e),i=as(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ys(e,i,s),t!==null&&(_n(t,e,s,n),wu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nr(),n=Js(e),s=as(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ys(e,s,n),t!==null&&(_n(t,e,n,r),wu(t,e,n))}};function jv(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Il(r,n)||!Il(s,i):!0}function tN(e,t,r){var n=!1,s=si,i=t.contextType;return typeof i=="object"&&i!==null?i=Zr(i):(s=vr(t)?Ui:Gt.current,n=t.contextTypes,i=(n=n!=null)?Ya(e,s):si),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _v(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Zd.enqueueReplaceState(t,t.state,null)}function ap(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},d0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zr(i):(i=vr(t)?Ui:Gt.current,s.context=Ya(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ip(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zd.enqueueReplaceState(s,s.state,null),Vu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var r="",n=t;do r+=OA(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function op(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var iO=typeof WeakMap=="function"?WeakMap:Map;function rN(e,t,r){r=as(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Yu||(Yu=!0,xp=n),op(e,t)},r}function nN(e,t,r){r=as(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){op(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){op(e,t),typeof n!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Nv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new iO;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=vO.bind(null,e,t,r),t.then(e,e))}function Sv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=as(-1,1),t.tag=2,Ys(r,t,1))),r.lanes|=1),e)}var aO=ys.ReactCurrentOwner,hr=!1;function er(e,t,r,n){t.child=e===null?O_(t,null,r,n):Ja(t,e.child,r,n)}function Pv(e,t,r,n,s){r=r.render;var i=t.ref;return Fa(t,s),n=g0(e,t,r,n,i,s),r=x0(),e!==null&&!hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fs(e,t,s)):(Ke&&r&&s0(t),t.flags|=1,er(e,t,n,s),t.child)}function Ev(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!P0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,sN(e,t,i,n,s)):(e=Pu(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Il,r(o,n)&&e.ref===t.ref)return fs(e,t,s)}return t.flags|=1,e=Zs(i,n),e.ref=t.ref,e.return=t,t.child=e}function sN(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Il(i,n)&&e.ref===t.ref)if(hr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(hr=!0);else return t.lanes=e.lanes,fs(e,t,s)}return lp(e,t,r,n,s)}function iN(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Da,Nr),Nr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(Da,Nr),Nr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Le(Da,Nr),Nr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Le(Da,Nr),Nr|=n;return er(e,t,s,r),t.child}function aN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function lp(e,t,r,n,s){var i=vr(r)?Ui:Gt.current;return i=Ya(t,i),Fa(t,s),r=g0(e,t,r,n,i,s),n=x0(),e!==null&&!hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fs(e,t,s)):(Ke&&n&&s0(t),t.flags|=1,er(e,t,r,s),t.child)}function Cv(e,t,r,n,s){if(vr(r)){var i=!0;qu(t)}else i=!1;if(Fa(t,s),t.stateNode===null)Nu(e,t),tN(t,r,n),ap(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=vr(r)?Ui:Gt.current,u=Ya(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&_v(t,o,n,u),Ds=!1;var m=t.memoizedState;o.state=m,Vu(t,n,o,s),c=t.memoizedState,l!==n||m!==c||yr.current||Ds?(typeof d=="function"&&(ip(t,r,d,n),c=t.memoizedState),(l=Ds||jv(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,M_(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:fn(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zr(c):(c=vr(r)?Ui:Gt.current,c=Ya(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&_v(t,o,n,c),Ds=!1,m=t.memoizedState,o.state=m,Vu(t,n,o,s);var p=t.memoizedState;l!==f||m!==p||yr.current||Ds?(typeof h=="function"&&(ip(t,r,h,n),p=t.memoizedState),(u=Ds||jv(t,r,u,n,m,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return cp(e,t,r,n,i,s)}function cp(e,t,r,n,s,i){aN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&mv(t,r,!1),fs(e,t,i);n=t.stateNode,aO.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ja(t,e.child,null,i),t.child=Ja(t,null,l,i)):er(e,t,l,i),t.memoizedState=n.state,s&&mv(t,r,!0),t.child}function oN(e){var t=e.stateNode;t.pendingContext?hv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hv(e,t.context,!1),f0(e,t.containerInfo)}function Av(e,t,r,n,s){return Xa(),a0(s),t.flags|=256,er(e,t,r,n),t.child}var up={dehydrated:null,treeContext:null,retryLane:0};function dp(e){return{baseLanes:e,cachePool:null,transitions:null}}function lN(e,t,r){var n=t.pendingProps,s=Ye.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Le(Ye,s&1),e===null)return np(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rf(o,n,0,null),e=zi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=dp(r),t.memoizedState=up,e):b0(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return oO(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Zs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Zs(l,i):(i=zi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?dp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=up,n}return i=e.child,e=i.sibling,n=Zs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function b0(e,t){return t=rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wc(e,t,r,n){return n!==null&&a0(n),Ja(t,e.child,null,r),e=b0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oO(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Qh(Error(X(422))),Wc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=rf({mode:"visible",children:n.children},s,0,null),i=zi(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ja(t,e.child,null,o),t.child.memoizedState=dp(o),t.memoizedState=up,i);if(!(t.mode&1))return Wc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(X(419)),n=Qh(i,n,void 0),Wc(e,t,o,n)}if(l=(o&e.childLanes)!==0,hr||l){if(n=_t,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ds(e,s),_n(n,e,s,-1))}return k0(),n=Qh(Error(X(421))),Wc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=bO.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Er=Gs(s.nextSibling),Ar=t,Ke=!0,pn=null,e!==null&&(Br[Qr++]=rs,Br[Qr++]=ns,Br[Qr++]=Bi,rs=e.id,ns=e.overflow,Bi=t),t=b0(t,n.children),t.flags|=4096,t)}function Tv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),sp(e.return,t,r)}function Vh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function cN(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(er(e,t,n.children,r),n=Ye.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tv(e,r,t);else if(e.tag===19)Tv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Le(Ye,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Wu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Wu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vh(t,!0,r,null,i);break;case"together":Vh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Zs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Zs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function lO(e,t,r){switch(t.tag){case 3:oN(t),Xa();break;case 5:I_(t);break;case 1:vr(t.type)&&qu(t);break;case 4:f0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Le(Bu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Le(Ye,Ye.current&1),t.flags|=128,null):r&t.child.childLanes?lN(e,t,r):(Le(Ye,Ye.current&1),e=fs(e,t,r),e!==null?e.sibling:null);Le(Ye,Ye.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return cN(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Ye,Ye.current),n)break;return null;case 22:case 23:return t.lanes=0,iN(e,t,r)}return fs(e,t,r)}var uN,fp,dN,fN;uN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fp=function(){};dN=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ci(zn.current);var i=null;switch(r){case"input":s=Mm(e,s),n=Mm(e,n),i=[];break;case"select":s=Ze({},s,{value:void 0}),n=Ze({},n,{value:void 0}),i=[];break;case"textarea":s=zm(e,s),n=zm(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Lu)}Rm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(El.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(El.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Fe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};fN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qo(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function cO(e,t,r){var n=t.pendingProps;switch(i0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return vr(t.type)&&Ru(),Ft(t),null;case 3:return n=t.stateNode,Za(),Qe(yr),Qe(Gt),m0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pn!==null&&(bp(pn),pn=null))),fp(e,t),Ft(t),null;case 5:h0(t);var s=Ci(ql.current);if(r=t.type,e!==null&&t.stateNode!=null)dN(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(X(166));return Ft(t),null}if(e=Ci(zn.current),Qc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Dn]=t,n[Ll]=i,e=(t.mode&1)!==0,r){case"dialog":Fe("cancel",n),Fe("close",n);break;case"iframe":case"object":case"embed":Fe("load",n);break;case"video":case"audio":for(s=0;s<ol.length;s++)Fe(ol[s],n);break;case"source":Fe("error",n);break;case"img":case"image":case"link":Fe("error",n),Fe("load",n);break;case"details":Fe("toggle",n);break;case"input":qy(n,i),Fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",n);break;case"textarea":Uy(n,i),Fe("invalid",n)}Rm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",""+l]):El.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",n)}switch(r){case"input":Ic(n),Fy(n,i,!0);break;case"textarea":Ic(n),By(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Lu)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=q1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Dn]=t,e[Ll]=n,uN(e,t,!1,!1),t.stateNode=e;e:{switch(o=qm(r,n),r){case"dialog":Fe("cancel",e),Fe("close",e),s=n;break;case"iframe":case"object":case"embed":Fe("load",e),s=n;break;case"video":case"audio":for(s=0;s<ol.length;s++)Fe(ol[s],e);s=n;break;case"source":Fe("error",e),s=n;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),s=n;break;case"details":Fe("toggle",e),s=n;break;case"input":qy(e,n),s=Mm(e,n),Fe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ze({},n,{value:void 0}),Fe("invalid",e);break;case"textarea":Uy(e,n),s=zm(e,n),Fe("invalid",e);break;default:s=n}Rm(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?B1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cl(e,c):typeof c=="number"&&Cl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(El.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Fe("scroll",e):c!=null&&Qg(e,i,c,o))}switch(r){case"input":Ic(e),Fy(e,n,!1);break;case"textarea":Ic(e),By(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ni(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?za(e,!!n.multiple,i,!1):n.defaultValue!=null&&za(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Lu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ft(t),null;case 6:if(e&&t.stateNode!=null)fN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(X(166));if(r=Ci(ql.current),Ci(zn.current),Qc(t)){if(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,(i=n.nodeValue!==r)&&(e=Ar,e!==null))switch(e.tag){case 3:Bc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dn]=t,t.stateNode=n}return Ft(t),null;case 13:if(Qe(Ye),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Er!==null&&t.mode&1&&!(t.flags&128))A_(),Xa(),t.flags|=98560,i=!1;else if(i=Qc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Dn]=t}else Xa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),i=!1}else pn!==null&&(bp(pn),pn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?gt===0&&(gt=3):k0())),t.updateQueue!==null&&(t.flags|=4),Ft(t),null);case 4:return Za(),fp(e,t),e===null&&$l(t.stateNode.containerInfo),Ft(t),null;case 10:return c0(t.type._context),Ft(t),null;case 17:return vr(t.type)&&Ru(),Ft(t),null;case 19:if(Qe(Ye),i=t.memoizedState,i===null)return Ft(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Qo(i,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wu(e),o!==null){for(t.flags|=128,Qo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Le(Ye,Ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>to&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return Ft(t),null}else 2*rt()-i.renderingStartTime>to&&r!==1073741824&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,r=Ye.current,Le(Ye,n?r&1|2:r&1),t):(Ft(t),null);case 22:case 23:return S0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Nr&1073741824&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function uO(e,t){switch(i0(t),t.tag){case 1:return vr(t.type)&&Ru(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Za(),Qe(yr),Qe(Gt),m0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return h0(t),null;case 13:if(Qe(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(Ye),null;case 4:return Za(),null;case 10:return c0(t.type._context),null;case 22:case 23:return S0(),null;case 24:return null;default:return null}}var Kc=!1,Qt=!1,dO=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Oa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tt(e,t,n)}else r.current=null}function hp(e,t,r){try{r()}catch(n){tt(e,t,n)}}var Ov=!1;function fO(e,t){if(Ym=Iu,e=x_(),n0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xm={focusedElem:e,selectionRange:r},Iu=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,x=p.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:fn(t.type,y),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(_){tt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return p=Ov,Ov=!1,p}function xl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&hp(t,r,i)}s=s.next}while(s!==n)}}function ef(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function mp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hN(e){var t=e.alternate;t!==null&&(e.alternate=null,hN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dn],delete t[Ll],delete t[ep],delete t[HT],delete t[GT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mN(e){return e.tag===5||e.tag===3||e.tag===4}function Dv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lu));else if(n!==4&&(e=e.child,e!==null))for(pp(e,t,r),e=e.sibling;e!==null;)pp(e,t,r),e=e.sibling}function gp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(gp(e,t,r),e=e.sibling;e!==null;)gp(e,t,r),e=e.sibling}var Tt=null,hn=!1;function Es(e,t,r){for(r=r.child;r!==null;)pN(e,t,r),r=r.sibling}function pN(e,t,r){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Wd,r)}catch{}switch(r.tag){case 5:Qt||Oa(r,t);case 6:var n=Tt,s=hn;Tt=null,Es(e,t,r),Tt=n,hn=s,Tt!==null&&(hn?(e=Tt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Tt.removeChild(r.stateNode));break;case 18:Tt!==null&&(hn?(e=Tt,r=r.stateNode,e.nodeType===8?Lh(e.parentNode,r):e.nodeType===1&&Lh(e,r),Dl(e)):Lh(Tt,r.stateNode));break;case 4:n=Tt,s=hn,Tt=r.stateNode.containerInfo,hn=!0,Es(e,t,r),Tt=n,hn=s;break;case 0:case 11:case 14:case 15:if(!Qt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hp(r,t,o),s=s.next}while(s!==n)}Es(e,t,r);break;case 1:if(!Qt&&(Oa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tt(r,t,l)}Es(e,t,r);break;case 21:Es(e,t,r);break;case 22:r.mode&1?(Qt=(n=Qt)||r.memoizedState!==null,Es(e,t,r),Qt=n):Es(e,t,r);break;default:Es(e,t,r)}}function Mv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dO),t.forEach(function(n){var s=wO.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function un(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,hn=!1;break e;case 3:Tt=l.stateNode.containerInfo,hn=!0;break e;case 4:Tt=l.stateNode.containerInfo,hn=!0;break e}l=l.return}if(Tt===null)throw Error(X(160));pN(i,o,s),Tt=null,hn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gN(t,e),t=t.sibling}function gN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(un(t,e),An(e),n&4){try{xl(3,e,e.return),ef(3,e)}catch(y){tt(e,e.return,y)}try{xl(5,e,e.return)}catch(y){tt(e,e.return,y)}}break;case 1:un(t,e),An(e),n&512&&r!==null&&Oa(r,r.return);break;case 5:if(un(t,e),An(e),n&512&&r!==null&&Oa(r,r.return),e.flags&32){var s=e.stateNode;try{Cl(s,"")}catch(y){tt(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&L1(s,i),qm(l,o);var u=qm(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?B1(s,f):d==="dangerouslySetInnerHTML"?F1(s,f):d==="children"?Cl(s,f):Qg(s,d,f,u)}switch(l){case"input":Im(s,i);break;case"textarea":R1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?za(s,!!i.multiple,h,!1):m!==!!i.multiple&&(i.defaultValue!=null?za(s,!!i.multiple,i.defaultValue,!0):za(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ll]=i}catch(y){tt(e,e.return,y)}}break;case 6:if(un(t,e),An(e),n&4){if(e.stateNode===null)throw Error(X(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){tt(e,e.return,y)}}break;case 3:if(un(t,e),An(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dl(t.containerInfo)}catch(y){tt(e,e.return,y)}break;case 4:un(t,e),An(e);break;case 13:un(t,e),An(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_0=rt())),n&4&&Mv(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Qt=(u=Qt)||d,un(t,e),Qt=u):un(t,e),An(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ne=e,d=e.child;d!==null;){for(f=ne=d;ne!==null;){switch(m=ne,h=m.child,m.tag){case 0:case 11:case 14:case 15:xl(4,m,m.return);break;case 1:Oa(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){tt(n,r,y)}}break;case 5:Oa(m,m.return);break;case 22:if(m.memoizedState!==null){$v(f);continue}}h!==null?(h.return=m,ne=h):$v(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=U1("display",o))}catch(y){tt(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){tt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:un(t,e),An(e),n&4&&Mv(e);break;case 21:break;default:un(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mN(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Cl(s,""),n.flags&=-33);var i=Dv(e);gp(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Dv(e);pp(e,l,o);break;default:throw Error(X(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hO(e,t,r){ne=e,xN(e)}function xN(e,t,r){for(var n=(e.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Kc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Qt;l=Kc;var u=Qt;if(Kc=o,(Qt=c)&&!u)for(ne=s;ne!==null;)o=ne,c=o.child,o.tag===22&&o.memoizedState!==null?zv(s):c!==null?(c.return=o,ne=c):zv(s);for(;i!==null;)ne=i,xN(i),i=i.sibling;ne=s,Kc=l,Qt=u}Iv(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):Iv(e)}}function Iv(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Qt||ef(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Qt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:fn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vv(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Qt||t.flags&512&&mp(t)}catch(m){tt(t,t.return,m)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function $v(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function zv(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ef(4,t)}catch(c){tt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){tt(t,s,c)}}var i=t.return;try{mp(t)}catch(c){tt(t,i,c)}break;case 5:var o=t.return;try{mp(t)}catch(c){tt(t,o,c)}}}catch(c){tt(t,t.return,c)}if(t===e){ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ne=l;break}ne=t.return}}var mO=Math.ceil,Gu=ys.ReactCurrentDispatcher,w0=ys.ReactCurrentOwner,Gr=ys.ReactCurrentBatchConfig,_e=0,_t=null,lt=null,$t=0,Nr=0,Da=li(0),gt=0,Ql=null,Vi=0,tf=0,j0=0,yl=null,dr=null,_0=0,to=1/0,Hn=null,Yu=!1,xp=null,Xs=null,Hc=!1,Us=null,Xu=0,vl=0,yp=null,Su=-1,ku=0;function nr(){return _e&6?rt():Su!==-1?Su:Su=rt()}function Js(e){return e.mode&1?_e&2&&$t!==0?$t&-$t:XT.transition!==null?(ku===0&&(ku=t_()),ku):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:l_(e.type)),e):1}function _n(e,t,r,n){if(50<vl)throw vl=0,yp=null,Error(X(185));fc(e,r,n),(!(_e&2)||e!==_t)&&(e===_t&&(!(_e&2)&&(tf|=r),gt===4&&zs(e,$t)),br(e,n),r===1&&_e===0&&!(t.mode&1)&&(to=rt()+500,Xd&&ci()))}function br(e,t){var r=e.callbackNode;XA(e,t);var n=Mu(e,e===_t?$t:0);if(n===0)r!==null&&Wy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Wy(r),t===1)e.tag===0?YT(Lv.bind(null,e)):P_(Lv.bind(null,e)),WT(function(){!(_e&6)&&ci()}),r=null;else{switch(r_(n)){case 1:r=Gg;break;case 4:r=Z1;break;case 16:r=Du;break;case 536870912:r=e_;break;default:r=Du}r=SN(r,yN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function yN(e,t){if(Su=-1,ku=0,_e&6)throw Error(X(327));var r=e.callbackNode;if(Ua()&&e.callbackNode!==r)return null;var n=Mu(e,e===_t?$t:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ju(e,n);else{t=n;var s=_e;_e|=2;var i=bN();(_t!==e||$t!==t)&&(Hn=null,to=rt()+500,$i(e,t));do try{xO();break}catch(l){vN(e,l)}while(!0);l0(),Gu.current=i,_e=s,lt!==null?t=0:(_t=null,$t=0,t=gt)}if(t!==0){if(t===2&&(s=Vm(e),s!==0&&(n=s,t=vp(e,s))),t===1)throw r=Ql,$i(e,0),zs(e,n),br(e,rt()),r;if(t===6)zs(e,n);else{if(s=e.current.alternate,!(n&30)&&!pO(s)&&(t=Ju(e,n),t===2&&(i=Vm(e),i!==0&&(n=i,t=vp(e,i))),t===1))throw r=Ql,$i(e,0),zs(e,n),br(e,rt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(X(345));case 2:wi(e,dr,Hn);break;case 3:if(zs(e,n),(n&130023424)===n&&(t=_0+500-rt(),10<t)){if(Mu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){nr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Zm(wi.bind(null,e,dr,Hn),t);break}wi(e,dr,Hn);break;case 4:if(zs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-jn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mO(n/1960))-n,10<n){e.timeoutHandle=Zm(wi.bind(null,e,dr,Hn),n);break}wi(e,dr,Hn);break;case 5:wi(e,dr,Hn);break;default:throw Error(X(329))}}}return br(e,rt()),e.callbackNode===r?yN.bind(null,e):null}function vp(e,t){var r=yl;return e.current.memoizedState.isDehydrated&&($i(e,t).flags|=256),e=Ju(e,t),e!==2&&(t=dr,dr=r,t!==null&&bp(t)),e}function bp(e){dr===null?dr=e:dr.push.apply(dr,e)}function pO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Sn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zs(e,t){for(t&=~j0,t&=~tf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-jn(t),n=1<<r;e[r]=-1,t&=~n}}function Lv(e){if(_e&6)throw Error(X(327));Ua();var t=Mu(e,0);if(!(t&1))return br(e,rt()),null;var r=Ju(e,t);if(e.tag!==0&&r===2){var n=Vm(e);n!==0&&(t=n,r=vp(e,n))}if(r===1)throw r=Ql,$i(e,0),zs(e,t),br(e,rt()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wi(e,dr,Hn),br(e,rt()),null}function N0(e,t){var r=_e;_e|=1;try{return e(t)}finally{_e=r,_e===0&&(to=rt()+500,Xd&&ci())}}function Wi(e){Us!==null&&Us.tag===0&&!(_e&6)&&Ua();var t=_e;_e|=1;var r=Gr.transition,n=Ae;try{if(Gr.transition=null,Ae=1,e)return e()}finally{Ae=n,Gr.transition=r,_e=t,!(_e&6)&&ci()}}function S0(){Nr=Da.current,Qe(Da)}function $i(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,VT(r)),lt!==null)for(r=lt.return;r!==null;){var n=r;switch(i0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ru();break;case 3:Za(),Qe(yr),Qe(Gt),m0();break;case 5:h0(n);break;case 4:Za();break;case 13:Qe(Ye);break;case 19:Qe(Ye);break;case 10:c0(n.type._context);break;case 22:case 23:S0()}r=r.return}if(_t=e,lt=e=Zs(e.current,null),$t=Nr=t,gt=0,Ql=null,j0=tf=Vi=0,dr=yl=null,Ei!==null){for(t=0;t<Ei.length;t++)if(r=Ei[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ei=null}return e}function vN(e,t){do{var r=lt;try{if(l0(),ju.current=Hu,Ku){for(var n=Je.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ku=!1}if(Qi=0,jt=mt=Je=null,gl=!1,Fl=0,w0.current=null,r===null||r.return===null){gt=1,Ql=t,lt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=$t,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Sv(o);if(h!==null){h.flags&=-257,kv(h,o,l,i,t),h.mode&1&&Nv(i,u,t),t=h,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){Nv(i,u,t),k0();break e}c=Error(X(426))}}else if(Ke&&l.mode&1){var x=Sv(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),kv(x,o,l,i,t),a0(eo(c,l));break e}}i=c=eo(c,l),gt!==4&&(gt=2),yl===null?yl=[i]:yl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=rN(i,c,t);yv(i,v);break e;case 1:l=c;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xs===null||!Xs.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=nN(i,l,t);yv(i,_);break e}}i=i.return}while(i!==null)}jN(r)}catch(j){t=j,lt===r&&r!==null&&(lt=r=r.return);continue}break}while(!0)}function bN(){var e=Gu.current;return Gu.current=Hu,e===null?Hu:e}function k0(){(gt===0||gt===3||gt===2)&&(gt=4),_t===null||!(Vi&268435455)&&!(tf&268435455)||zs(_t,$t)}function Ju(e,t){var r=_e;_e|=2;var n=bN();(_t!==e||$t!==t)&&(Hn=null,$i(e,t));do try{gO();break}catch(s){vN(e,s)}while(!0);if(l0(),_e=r,Gu.current=n,lt!==null)throw Error(X(261));return _t=null,$t=0,gt}function gO(){for(;lt!==null;)wN(lt)}function xO(){for(;lt!==null&&!UA();)wN(lt)}function wN(e){var t=NN(e.alternate,e,Nr);e.memoizedProps=e.pendingProps,t===null?jN(e):lt=t,w0.current=null}function jN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uO(r,t),r!==null){r.flags&=32767,lt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,lt=null;return}}else if(r=cO(r,t,Nr),r!==null){lt=r;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);gt===0&&(gt=5)}function wi(e,t,r){var n=Ae,s=Gr.transition;try{Gr.transition=null,Ae=1,yO(e,t,r,n)}finally{Gr.transition=s,Ae=n}return null}function yO(e,t,r,n){do Ua();while(Us!==null);if(_e&6)throw Error(X(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(JA(e,i),e===_t&&(lt=_t=null,$t=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hc||(Hc=!0,SN(Du,function(){return Ua(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Gr.transition,Gr.transition=null;var o=Ae;Ae=1;var l=_e;_e|=4,w0.current=null,fO(e,r),gN(r,e),LT(Xm),Iu=!!Ym,Xm=Ym=null,e.current=r,hO(r),BA(),_e=l,Ae=o,Gr.transition=i}else e.current=r;if(Hc&&(Hc=!1,Us=e,Xu=s),i=e.pendingLanes,i===0&&(Xs=null),WA(r.stateNode),br(e,rt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yu)throw Yu=!1,e=xp,xp=null,e;return Xu&1&&e.tag!==0&&Ua(),i=e.pendingLanes,i&1?e===yp?vl++:(vl=0,yp=e):vl=0,ci(),null}function Ua(){if(Us!==null){var e=r_(Xu),t=Gr.transition,r=Ae;try{if(Gr.transition=null,Ae=16>e?16:e,Us===null)var n=!1;else{if(e=Us,Us=null,Xu=0,_e&6)throw Error(X(331));var s=_e;for(_e|=4,ne=e.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ne=u;ne!==null;){var d=ne;switch(d.tag){case 0:case 11:case 15:xl(8,d,i)}var f=d.child;if(f!==null)f.return=d,ne=f;else for(;ne!==null;){d=ne;var m=d.sibling,h=d.return;if(hN(d),d===u){ne=null;break}if(m!==null){m.return=h,ne=m;break}ne=h}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ne=v;break e}ne=i.return}}var g=e.current;for(ne=g;ne!==null;){o=ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ne=w;else e:for(o=g;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ef(9,l)}}catch(j){tt(l,l.return,j)}if(l===o){ne=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ne=_;break e}ne=l.return}}if(_e=s,ci(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Wd,e)}catch{}n=!0}return n}finally{Ae=r,Gr.transition=t}}return!1}function Rv(e,t,r){t=eo(r,t),t=rN(e,t,1),e=Ys(e,t,1),t=nr(),e!==null&&(fc(e,1,t),br(e,t))}function tt(e,t,r){if(e.tag===3)Rv(e,e,r);else for(;t!==null;){if(t.tag===3){Rv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xs===null||!Xs.has(n))){e=eo(r,e),e=nN(t,e,1),t=Ys(t,e,1),e=nr(),t!==null&&(fc(t,1,e),br(t,e));break}}t=t.return}}function vO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&r,_t===e&&($t&r)===r&&(gt===4||gt===3&&($t&130023424)===$t&&500>rt()-_0?$i(e,0):j0|=r),br(e,t)}function _N(e,t){t===0&&(e.mode&1?(t=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):t=1);var r=nr();e=ds(e,t),e!==null&&(fc(e,t,r),br(e,r))}function bO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),_N(e,r)}function wO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(t),_N(e,r)}var NN;NN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)hr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return hr=!1,lO(e,t,r);hr=!!(e.flags&131072)}else hr=!1,Ke&&t.flags&1048576&&E_(t,Uu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Nu(e,t),e=t.pendingProps;var s=Ya(t,Gt.current);Fa(t,r),s=g0(null,t,n,e,s,r);var i=x0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)?(i=!0,qu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,d0(t),s.updater=Zd,t.stateNode=s,s._reactInternals=t,ap(t,n,e,r),t=cp(null,t,n,!0,i,r)):(t.tag=0,Ke&&i&&s0(t),er(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Nu(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=_O(n),e=fn(n,e),s){case 0:t=lp(null,t,n,e,r);break e;case 1:t=Cv(null,t,n,e,r);break e;case 11:t=Pv(null,t,n,e,r);break e;case 14:t=Ev(null,t,n,fn(n.type,e),r);break e}throw Error(X(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fn(n,s),lp(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fn(n,s),Cv(e,t,n,s,r);case 3:e:{if(oN(t),e===null)throw Error(X(387));n=t.pendingProps,i=t.memoizedState,s=i.element,M_(e,t),Vu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=eo(Error(X(423)),t),t=Av(e,t,n,r,s);break e}else if(n!==s){s=eo(Error(X(424)),t),t=Av(e,t,n,r,s);break e}else for(Er=Gs(t.stateNode.containerInfo.firstChild),Ar=t,Ke=!0,pn=null,r=O_(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xa(),n===s){t=fs(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return I_(t),e===null&&np(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Jm(n,s)?o=null:i!==null&&Jm(n,i)&&(t.flags|=32),aN(e,t),er(e,t,o,r),t.child;case 6:return e===null&&np(t),null;case 13:return lN(e,t,r);case 4:return f0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ja(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fn(n,s),Pv(e,t,n,s,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Le(Bu,n._currentValue),n._currentValue=o,i!==null)if(Sn(i.value,o)){if(i.children===s.children&&!yr.current){t=fs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=as(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),sp(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),sp(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Fa(t,r),s=Zr(s),n=n(s),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,s=fn(n,t.pendingProps),s=fn(n.type,s),Ev(e,t,n,s,r);case 15:return sN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fn(n,s),Nu(e,t),t.tag=1,vr(n)?(e=!0,qu(t)):e=!1,Fa(t,r),tN(t,n,s),ap(t,n,s,r),cp(null,t,n,!0,e,r);case 19:return cN(e,t,r);case 22:return iN(e,t,r)}throw Error(X(156,t.tag))};function SN(e,t){return J1(e,t)}function jO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,r,n){return new jO(e,t,r,n)}function P0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _O(e){if(typeof e=="function")return P0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wg)return 11;if(e===Kg)return 14}return 2}function Zs(e,t){var r=e.alternate;return r===null?(r=Kr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pu(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")P0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _a:return zi(r.children,s,i,t);case Vg:o=8,s|=8;break;case Am:return e=Kr(12,r,t,s|2),e.elementType=Am,e.lanes=i,e;case Tm:return e=Kr(13,r,t,s),e.elementType=Tm,e.lanes=i,e;case Om:return e=Kr(19,r,t,s),e.elementType=Om,e.lanes=i,e;case I1:return rf(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D1:o=10;break e;case M1:o=9;break e;case Wg:o=11;break e;case Kg:o=14;break e;case Os:o=16,n=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Kr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function zi(e,t,r,n){return e=Kr(7,e,n,t),e.lanes=r,e}function rf(e,t,r,n){return e=Kr(22,e,n,t),e.elementType=I1,e.lanes=r,e.stateNode={isHidden:!1},e}function Wh(e,t,r){return e=Kr(6,e,null,t),e.lanes=r,e}function Kh(e,t,r){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ph(0),this.expirationTimes=Ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ph(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function E0(e,t,r,n,s,i,o,l,c){return e=new NO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(i),e}function SO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function kN(e){if(!e)return si;e=e._reactInternals;e:{if(sa(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(vr(r))return k_(e,r,t)}return t}function PN(e,t,r,n,s,i,o,l,c){return e=E0(r,n,!0,e,s,i,o,l,c),e.context=kN(null),r=e.current,n=nr(),s=Js(r),i=as(n,s),i.callback=t??null,Ys(r,i,s),e.current.lanes=s,fc(e,s,n),br(e,n),e}function nf(e,t,r,n){var s=t.current,i=nr(),o=Js(s);return r=kN(r),t.context===null?t.context=r:t.pendingContext=r,t=as(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ys(s,t,o),e!==null&&(_n(e,s,o,i),wu(e,s,o)),o}function Zu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function C0(e,t){qv(e,t),(e=e.alternate)&&qv(e,t)}function kO(){return null}var EN=typeof reportError=="function"?reportError:function(e){console.error(e)};function A0(e){this._internalRoot=e}sf.prototype.render=A0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));nf(e,t,null,null)};sf.prototype.unmount=A0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wi(function(){nf(null,e,null,null)}),t[us]=null}};function sf(e){this._internalRoot=e}sf.prototype.unstable_scheduleHydration=function(e){if(e){var t=i_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$s.length&&t!==0&&t<$s[r].priority;r++);$s.splice(r,0,e),r===0&&o_(e)}};function T0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function af(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fv(){}function PO(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Zu(o);i.call(u)}}var o=PN(t,n,e,0,null,!1,!1,"",Fv);return e._reactRootContainer=o,e[us]=o.current,$l(e.nodeType===8?e.parentNode:e),Wi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Zu(c);l.call(u)}}var c=E0(e,0,!1,null,null,!1,!1,"",Fv);return e._reactRootContainer=c,e[us]=c.current,$l(e.nodeType===8?e.parentNode:e),Wi(function(){nf(t,c,r,n)}),c}function of(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Zu(o);l.call(c)}}nf(t,o,e,s)}else o=PO(r,t,e,s,n);return Zu(o)}n_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=al(t.pendingLanes);r!==0&&(Yg(t,r|1),br(t,rt()),!(_e&6)&&(to=rt()+500,ci()))}break;case 13:Wi(function(){var n=ds(e,1);if(n!==null){var s=nr();_n(n,e,1,s)}}),C0(e,1)}};Xg=function(e){if(e.tag===13){var t=ds(e,134217728);if(t!==null){var r=nr();_n(t,e,134217728,r)}C0(e,134217728)}};s_=function(e){if(e.tag===13){var t=Js(e),r=ds(e,t);if(r!==null){var n=nr();_n(r,e,t,n)}C0(e,t)}};i_=function(){return Ae};a_=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};Um=function(e,t,r){switch(t){case"input":if(Im(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Yd(n);if(!s)throw Error(X(90));z1(n),Im(n,s)}}}break;case"textarea":R1(e,r);break;case"select":t=r.value,t!=null&&za(e,!!r.multiple,t,!1)}};W1=N0;K1=Wi;var EO={usingClientEntryPoint:!1,Events:[mc,Pa,Yd,Q1,V1,N0]},Vo={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CO={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y1(e),e===null?null:e.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||kO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Wd=Gc.inject(CO),$n=Gc}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EO;Lr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T0(t))throw Error(X(200));return SO(e,t,null,r)};Lr.createRoot=function(e,t){if(!T0(e))throw Error(X(299));var r=!1,n="",s=EN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=E0(e,1,!1,null,null,r,!1,n,s),e[us]=t.current,$l(e.nodeType===8?e.parentNode:e),new A0(t)};Lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Y1(t),e=e===null?null:e.stateNode,e};Lr.flushSync=function(e){return Wi(e)};Lr.hydrate=function(e,t,r){if(!af(t))throw Error(X(200));return of(null,e,t,!0,r)};Lr.hydrateRoot=function(e,t,r){if(!T0(e))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=EN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=PN(t,null,e,1,r??null,s,!1,i,o),e[us]=t.current,$l(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sf(t)};Lr.render=function(e,t,r){if(!af(t))throw Error(X(200));return of(null,e,t,!1,r)};Lr.unmountComponentAtNode=function(e){if(!af(e))throw Error(X(40));return e._reactRootContainer?(Wi(function(){of(null,null,e,!1,function(){e._reactRootContainer=null,e[us]=null})}),!0):!1};Lr.unstable_batchedUpdates=N0;Lr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!af(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return of(e,t,r,!1,n)};Lr.version="18.3.1-next-f1338f8080-20240426";function CN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CN)}catch(e){console.error(e)}}CN(),C1.exports=Lr;var AN=C1.exports,TN,Uv=AN;TN=Uv.createRoot,Uv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(this,arguments)}var Bs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Bs||(Bs={}));const Bv="popstate";function AO(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return wp("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ed(s)}return OO(t,r,null,e)}function nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ON(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TO(){return Math.random().toString(36).substr(2,8)}function Qv(e,t){return{usr:e.state,key:e.key,idx:t}}function wp(e,t,r,n){return r===void 0&&(r=null),Vl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jo(t):t,{state:r,key:t&&t.key||n||TO()})}function ed(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function OO(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Bs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Vl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Bs.Pop;let x=d(),v=x==null?null:x-u;u=x,c&&c({action:l,location:y.location,delta:v})}function m(x,v){l=Bs.Push;let g=wp(y.location,x,v);u=d()+1;let w=Qv(g,u),_=y.createHref(g);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:y.location,delta:1})}function h(x,v){l=Bs.Replace;let g=wp(y.location,x,v);u=d();let w=Qv(g,u),_=y.createHref(g);o.replaceState(w,"",_),i&&c&&c({action:l,location:y.location,delta:0})}function p(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof x=="string"?x:ed(x);return g=g.replace(/ $/,"%20"),nt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let y={get action(){return l},get location(){return e(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Bv,f),c=x,()=>{s.removeEventListener(Bv,f),c=null}},createHref(x){return t(s,x)},createURL:p,encodeLocation(x){let v=p(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:h,go(x){return o.go(x)}};return y}var Vv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vv||(Vv={}));function DO(e,t,r){return r===void 0&&(r="/"),MO(e,t,r,!1)}function MO(e,t,r,n){let s=typeof t=="string"?jo(t):t,i=O0(s.pathname||"/",r);if(i==null)return null;let o=DN(e);IO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=WO(i);l=QO(o[c],u,n)}return l}function DN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ei([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:UO(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of MN(i.path))s(i,o,c)}),t}function MN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=MN(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function IO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:BO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $O=/^:[\w-]+$/,zO=3,LO=2,RO=1,qO=10,FO=-2,Wv=e=>e==="*";function UO(e,t){let r=e.split("/"),n=r.length;return r.some(Wv)&&(n+=FO),t&&(n+=LO),r.filter(s=>!Wv(s)).reduce((s,i)=>s+($O.test(i)?zO:i===""?RO:qO),n)}function BO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function QO(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Kv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Kv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ei([i,f.pathname]),pathnameBase:YO(ei([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ei([i,f.pathnameBase]))}return o}function Kv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=VO(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:h}=d;if(m==="*"){let y=l[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?u[m]=void 0:u[m]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function VO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ON(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function WO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ON(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function KO(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?jo(e):e;return{pathname:r?r.startsWith("/")?r:HO(r,t):t,search:XO(n),hash:JO(s)}}function HO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Hh(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function D0(e,t){let r=GO(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function M0(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=jo(e):(s=Vl({},e),nt(!s.pathname||!s.pathname.includes("?"),Hh("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Hh("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Hh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=KO(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ei=e=>e.join("/").replace(/\/\/+/g,"/"),YO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ZO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IN=["post","put","patch","delete"];new Set(IN);const e4=["get",...IN];new Set(e4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(this,arguments)}const I0=b.createContext(null),t4=b.createContext(null),ui=b.createContext(null),lf=b.createContext(null),vs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),$N=b.createContext(null);function r4(e,t){let{relative:r}=t===void 0?{}:t;_o()||nt(!1);let{basename:n,navigator:s}=b.useContext(ui),{hash:i,pathname:o,search:l}=RN(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:ei([n,o])),s.createHref({pathname:c,search:l,hash:i})}function _o(){return b.useContext(lf)!=null}function bs(){return _o()||nt(!1),b.useContext(lf).location}function zN(e){b.useContext(ui).static||b.useLayoutEffect(e)}function Nt(){let{isDataRoute:e}=b.useContext(vs);return e?p4():n4()}function n4(){_o()||nt(!1);let e=b.useContext(I0),{basename:t,future:r,navigator:n}=b.useContext(ui),{matches:s}=b.useContext(vs),{pathname:i}=bs(),o=JSON.stringify(D0(s,r.v7_relativeSplatPath)),l=b.useRef(!1);return zN(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=M0(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ei([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function LN(){let{matches:e}=b.useContext(vs),t=e[e.length-1];return t?t.params:{}}function RN(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=b.useContext(ui),{matches:s}=b.useContext(vs),{pathname:i}=bs(),o=JSON.stringify(D0(s,n.v7_relativeSplatPath));return b.useMemo(()=>M0(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function s4(e,t){return i4(e,t)}function i4(e,t,r,n){_o()||nt(!1);let{navigator:s}=b.useContext(ui),{matches:i}=b.useContext(vs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=bs(),d;if(t){var f;let x=typeof t=="string"?jo(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||nt(!1),d=x}else d=u;let m=d.pathname||"/",h=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let p=DO(e,{pathname:h}),y=u4(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ei([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ei([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&y?b.createElement(lf.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Bs.Pop}},y):y}function a4(){let e=m4(),t=ZO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:s},r):null,null)}const o4=b.createElement(a4,null);class l4 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(vs.Provider,{value:this.props.routeContext},b.createElement($N.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c4(e){let{routeContext:t,match:r,children:n}=e,s=b.useContext(I0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(vs.Provider,{value:t},n)}function u4(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||nt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:h}=r,p=f.route.loader&&m[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let h,p=!1,y=null,x=null;r&&(h=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||o4,c&&(u<0&&m===0?(p=!0,x=null):u===m&&(p=!0,x=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),g=()=>{let w;return h?w=y:p?w=x:f.route.Component?w=b.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,b.createElement(c4,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(l4,{location:r.location,revalidation:r.revalidation,component:y,error:h,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var qN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qN||{}),td=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(td||{});function d4(e){let t=b.useContext(I0);return t||nt(!1),t}function f4(e){let t=b.useContext(t4);return t||nt(!1),t}function h4(e){let t=b.useContext(vs);return t||nt(!1),t}function FN(e){let t=h4(),r=t.matches[t.matches.length-1];return r.route.id||nt(!1),r.route.id}function m4(){var e;let t=b.useContext($N),r=f4(td.UseRouteError),n=FN(td.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function p4(){let{router:e}=d4(qN.UseNavigateStable),t=FN(td.UseNavigateStable),r=b.useRef(!1);return zN(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Wl({fromRouteId:t},i)))},[e,t])}function g4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Xn(e){let{to:t,replace:r,state:n,relative:s}=e;_o()||nt(!1);let{future:i,static:o}=b.useContext(ui),{matches:l}=b.useContext(vs),{pathname:c}=bs(),u=Nt(),d=M0(t,D0(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ke(e){nt(!1)}function x4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Bs.Pop,navigator:i,static:o=!1,future:l}=e;_o()&&nt(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Wl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=jo(n));let{pathname:d="/",search:f="",hash:m="",state:h=null,key:p="default"}=n,y=b.useMemo(()=>{let x=O0(d,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:h,key:p},navigationType:s}},[c,d,f,m,h,p,s]);return y==null?null:b.createElement(ui.Provider,{value:u},b.createElement(lf.Provider,{children:r,value:y}))}function y4(e){let{children:t,location:r}=e;return s4(jp(t),r)}new Promise(()=>{});function jp(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let i=[...t,s];if(n.type===b.Fragment){r.push.apply(r,jp(n.props.children,i));return}n.type!==ke&&nt(!1),!n.props.index||!n.props.children||nt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_p.apply(this,arguments)}function v4(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function b4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function w4(e,t){return e.button===0&&(!t||t==="_self")&&!b4(e)}function Np(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function j4(e,t){let r=Np(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const _4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],N4="6";try{window.__reactRouterVersion=N4}catch{}const S4="startTransition",Hv=vA[S4];function k4(e){let{basename:t,children:r,future:n,window:s}=e,i=b.useRef();i.current==null&&(i.current=AO({window:s,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=b.useCallback(f=>{u&&Hv?Hv(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>g4(n),[n]),b.createElement(x4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const P4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qs=b.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=v4(t,_4),{basename:h}=b.useContext(ui),p,y=!1;if(typeof u=="string"&&E4.test(u)&&(p=u,P4))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=O0(_.pathname,h);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:y=!0}catch{}let x=r4(u,{relative:s}),v=C4(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function g(w){n&&n(w),w.defaultPrevented||v(w)}return b.createElement("a",_p({},m,{href:p||x,onClick:y||i?n:g,ref:r,target:c}))});var Gv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gv||(Gv={}));var Yv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yv||(Yv={}));function C4(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Nt(),u=bs(),d=RN(e,{relative:o});return b.useCallback(f=>{if(w4(f,r)){f.preventDefault();let m=n!==void 0?n:ed(u)===ed(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function UN(e){let t=b.useRef(Np(e)),r=b.useRef(!1),n=bs(),s=b.useMemo(()=>j4(n.search,r.current?null:t.current),[n.search]),i=Nt(),o=b.useCallback((l,c)=>{const u=Np(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}function A4(e){return e?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?e.includes("..")||e.startsWith(".")||e.endsWith(".")?{isValid:!1,error:"Invalid email format"}:e.length>254?{isValid:!1,error:"Email too long"}:{isValid:!0}:{isValid:!1,error:"Invalid email format"}:{isValid:!1,error:"Email is required"}}function BN(e){if(!e)return{isValid:!1,error:"Password is required",strength:0};let t=0;const r={length:e.length>=12,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),numbers:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return Object.values(r).forEach(n=>{n&&(t+=20)}),r.length?r.lowercase?r.uppercase?r.numbers?r.special?{isValid:!0,strength:t}:{isValid:!1,error:'Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)',strength:t}:{isValid:!1,error:"Password must contain at least one number",strength:t}:{isValid:!1,error:"Password must contain at least one uppercase letter",strength:t}:{isValid:!1,error:"Password must contain at least one lowercase letter",strength:t}:{isValid:!1,error:"Password must be at least 12 characters",strength:t}}function Kl(e){if(!e)return e;const t=["password","token","email","phone","ssn","credit_card"];if(typeof e=="string")return e.includes("@")&&e.includes(".")?"[EMAIL_REDACTED]":e.length>20&&/^[A-Za-z0-9+/=]+$/.test(e)?"[TOKEN_REDACTED]":e;if(Array.isArray(e))return e.map(r=>Kl(r));if(typeof e=="object"&&e!==null){const r={};for(const[n,s]of Object.entries(e)){const i=n.toLowerCase();t.some(o=>i.includes(o))?r[n]="[REDACTED]":typeof s=="object"?r[n]=Kl(s):r[n]=s}return r}return e}class T4{constructor(){this.attempts=new Map}isAllowed(t,r=5,n=6e4){const s=Date.now(),o=(this.attempts.get(t)||[]).filter(l=>s-l<n);return o.length>=r?!1:(o.push(s),this.attempts.set(t,o),!0)}reset(t){this.attempts.delete(t)}}const Xv=new T4;function O4(e){return(...t)=>{if(!e)return;const r=t.map(n=>Kl(n));console.log(...r)}}class Vs{static getInstance(){return Vs.instance||(Vs.instance=new Vs),Vs.instance}logSecurityEvent(t){const r={timestamp:new Date().toISOString(),type:t.type,userId:t.userId||"anonymous",details:Kl(t.details),ipAddress:t.ipAddress||"unknown",userAgent:t.userAgent||"unknown"};console.log("[SECURITY_AUDIT]",r)}async sendToAuditService(t){}}function D4(e,t){const r=Kl(t);console.error("[ERROR]",{message:e.message,stack:e.stack,context:r,timestamp:new Date().toISOString()})}let M4=class extends se.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){D4(t,{errorInfo:r,timestamp:new Date().toISOString()})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please refresh the page to continue."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})}):this.props.children}};const I4="modulepreload",$4=function(e){return"/"+e},Jv={},gc=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=$4(c),c in Jv)return;Jv[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":I4,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},z4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class $0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class L4 extends $0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class R4 extends $0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class q4 extends $0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sp||(Sp={}));var F4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class U4{constructor(t,{headers:r={},customFetch:n,region:s=Sp.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=z4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return F4(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(p=>{throw new L4(p)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new R4(d);if(!d.ok)throw new q4(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return m==="application/json"?h=yield d.json():m==="application/octet-stream"?h=yield d.blob():m==="text/event-stream"?h=d:m==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var fr={},z0={},cf={},xc={},uf={},df={},B4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ro=B4();const Q4=ro.fetch,QN=ro.fetch.bind(ro),VN=ro.Headers,V4=ro.Request,W4=ro.Response,No=Object.freeze(Object.defineProperty({__proto__:null,Headers:VN,Request:V4,Response:W4,default:QN,fetch:Q4},Symbol.toStringTag,{value:"Module"})),K4=nA(No);var ff={};Object.defineProperty(ff,"__esModule",{value:!0});let H4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ff.default=H4;var WN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});const G4=WN(K4),Y4=WN(ff);let X4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=G4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,m=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,h="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,h="OK")}catch{i.status===404&&y===""?(m=204,h="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,h="OK"),u&&this.shouldThrowOnError)throw new Y4.default(u)}return{error:u,data:d,count:f,status:m,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};df.default=X4;var J4=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uf,"__esModule",{value:!0});const Z4=J4(df);let e6=class extends Z4.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};uf.default=e6;var t6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xc,"__esModule",{value:!0});const r6=t6(uf);let n6=class extends r6.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xc.default=n6;var s6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});const Wo=s6(xc);let i6=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Wo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Wo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Wo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};cf.default=i6;var hf={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.version=void 0;mf.version="0.0.0-automated";Object.defineProperty(hf,"__esModule",{value:!0});hf.DEFAULT_HEADERS=void 0;const a6=mf;hf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${a6.version}`};var KN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z0,"__esModule",{value:!0});const o6=KN(cf),l6=KN(xc),c6=hf;let u6=class HN{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},c6.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new o6.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new HN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new l6.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};z0.default=u6;var So=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fr,"__esModule",{value:!0});fr.PostgrestError=fr.PostgrestBuilder=fr.PostgrestTransformBuilder=fr.PostgrestFilterBuilder=fr.PostgrestQueryBuilder=fr.PostgrestClient=void 0;const GN=So(z0);fr.PostgrestClient=GN.default;const YN=So(cf);fr.PostgrestQueryBuilder=YN.default;const XN=So(xc);fr.PostgrestFilterBuilder=XN.default;const JN=So(uf);fr.PostgrestTransformBuilder=JN.default;const ZN=So(df);fr.PostgrestBuilder=ZN.default;const eS=So(ff);fr.PostgrestError=eS.default;var d6=fr.default={PostgrestClient:GN.default,PostgrestQueryBuilder:YN.default,PostgrestFilterBuilder:XN.default,PostgrestTransformBuilder:JN.default,PostgrestBuilder:ZN.default,PostgrestError:eS.default};const{PostgrestClient:f6,PostgrestQueryBuilder:PK,PostgrestFilterBuilder:EK,PostgrestTransformBuilder:CK,PostgrestBuilder:AK,PostgrestError:TK}=d6;let kp;typeof window>"u"?kp=require("ws"):kp=window.WebSocket;const h6=kp,m6="2.11.10",p6={"X-Client-Info":`realtime-js/${m6}`},g6="1.0.0",tS=1e4,x6=1e3;var Ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ba||(Ba={}));var Zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zt||(Zt={}));var mn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(mn||(mn={}));var Pp;(function(e){e.websocket="websocket"})(Pp||(Pp={}));var ki;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ki||(ki={}));class y6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class rS{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})($e||($e={}));const Zv=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=v6(o,e,t,s),i),{})},v6=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?nS(i,o):Ep(o)},nS=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _6(t,r)}switch(e){case $e.bool:return b6(t);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return w6(t);case $e.json:case $e.jsonb:return j6(t);case $e.timestamp:return N6(t);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Ep(t);default:return Ep(t)}},Ep=e=>e,b6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},w6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},j6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>nS(t,l))}return e},N6=e=>typeof e=="string"?e.replace(" ","T"):e,sS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Gh{constructor(t,r,n={},s=tS){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eb||(eb={}));class bl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=bl.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bl.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const m=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),p=d.filter(x=>h.indexOf(x.presence_ref)<0),y=f.filter(x=>m.indexOf(x.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(h=>h.presence_ref),m=d.filter(h=>f.indexOf(h.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tb||(tb={}));var rb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rb||(rb={}));var Gn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class L0{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gh(this,mn.join,this.params,this.timeout),this.rejoinTimer=new rS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bl(this),this.broadcastEndpointURL=sS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Gn.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Gn.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Gn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,h=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<h;y++){const x=m[y],{filter:{event:v,schema:g,table:w,filter:_}}=x,j=d&&d[y];if(j&&j.event===v&&j.schema===g&&j.table===w&&j.filter===_)p.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Gn.SUBSCRIBED);return}}).receive("error",d=>{this.state=Zt.errored,t==null||t(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mn.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Gh(this,mn.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gh(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=mn;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,y,x;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(y=h.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(h=>h.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,y,x,v,g,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const _=h.id,j=(p=h.filter)===null||p===void 0?void 0:p.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(g=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:x,commit_timestamp:v,type:g,errors:w}=p;m=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:v,eventType:g,new:{},old:{},errors:w}),this._getPayloadRecords(p))}h.callback(m,n)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&L0.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(mn.close,{},t)}_onError(t){this._on(mn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Zv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Zv(t.columns,t.old_record)),r}}const nb=()=>{},S6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class k6{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=p6,this.params={},this.timeout=tS,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nb,this.ref=0,this.logger=nb,this.conn=null,this.sendBuffer=[],this.serializer=new y6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>gc(async()=>{const{default:c}=await Promise.resolve().then(()=>No);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Pp.websocket}`,this.httpEndpoint=sS(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=h6),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new P6(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:g6}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ba.connecting:return ki.Connecting;case Ba.open:return ki.Open;case Ba.closing:return ki.Closing;default:return ki.Closed}}isConnected(){return this.connectionState()===ki.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new L0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(mn.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(x6,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(mn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([S6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class P6{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ba.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class R0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function bt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class E6 extends R0{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Cp extends R0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var C6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const iS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},A6=()=>C6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gc(()=>Promise.resolve().then(()=>No),void 0)).Response:Response}),Ap=e=>{if(Array.isArray(e))return e.map(r=>Ap(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ap(n)}),t};var ia=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Yh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),T6=(e,t,r)=>ia(void 0,void 0,void 0,function*(){const n=yield A6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new E6(Yh(s),e.status||500))}).catch(s=>{t(new Cp(Yh(s),s))}):t(new Cp(Yh(e),e))}),O6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function yc(e,t,r,n,s,i){return ia(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,O6(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>T6(c,l,n))})})}function rd(e,t,r,n){return ia(this,void 0,void 0,function*(){return yc(e,"GET",t,r,n)})}function Ms(e,t,r,n,s){return ia(this,void 0,void 0,function*(){return yc(e,"POST",t,n,s,r)})}function D6(e,t,r,n,s){return ia(this,void 0,void 0,function*(){return yc(e,"PUT",t,n,s,r)})}function M6(e,t,r,n){return ia(this,void 0,void 0,function*(){return yc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function aS(e,t,r,n,s){return ia(this,void 0,void 0,function*(){return yc(e,"DELETE",t,n,s,r)})}var lr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const I6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $6{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=iS(s)}uploadOrUpdate(t,r,n,s){return lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},sb),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(bt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:sb.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(bt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return lr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ms(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new R0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}update(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ms(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}download(t,r){return lr(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield rd(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(bt(l))return{data:null,error:l};throw l}})}info(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield rd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ap(n),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}exists(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield M6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(bt(n)&&n instanceof Cp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return lr(this,void 0,void 0,function*(){try{return{data:yield aS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}list(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},I6),r),{prefix:t||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const z6="2.7.1",L6={"X-Client-Info":`storage-js/${z6}`};var ha=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class R6{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},L6),r),this.fetch=iS(n)}listBuckets(){return ha(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}getBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ha(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ha(this,void 0,void 0,function*(){try{return{data:yield D6(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield aS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}}class q6 extends R6{constructor(t,r={},n){super(t,r,n)}from(t){return new $6(this.url,this.headers,t,this.fetch)}}const F6="2.50.0";let ll="";typeof Deno<"u"?ll="deno":typeof document<"u"?ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ll="react-native":ll="node";const U6={"X-Client-Info":`supabase-js-${ll}/${F6}`},B6={headers:U6},Q6={schema:"public"},V6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W6={};var K6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const H6=e=>{let t;return e?t=e:typeof fetch>"u"?t=QN:t=fetch,(...r)=>t(...r)},G6=()=>typeof Headers>"u"?VN:Headers,Y6=(e,t,r)=>{const n=H6(r),s=G6();return(i,o)=>K6(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var X6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function J6(e){return e.endsWith("/")?e:e+"/"}function Z6(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>X6(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const oS="2.70.0",wa=30*1e3,Tp=3,Xh=Tp*wa,eD="http://localhost:9999",tD="supabase.auth.token",rD={"X-Client-Info":`gotrue-js/${oS}`},Op="X-Supabase-Api-Version",lS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sD=6e5;class q0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class iD extends q0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function aD(e){return pe(e)&&e.name==="AuthApiError"}class cS extends q0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class di extends q0{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ts extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oD(e){return pe(e)&&e.name==="AuthSessionMissingError"}class Yc extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends di{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Jc extends di{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lD(e){return pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class ib extends di{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dp extends di{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Jh(e){return pe(e)&&e.name==="AuthRetryableFetchError"}class ab extends di{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class wl extends di{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ob=` 	
\r=`.split(""),cD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ob.length;t+=1)e[ob[t].charCodeAt(0)]=-2;for(let t=0;t<nd.length;t+=1)e[nd[t].charCodeAt(0)]=t;return e})();function lb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nd[n]),t.queuedBits-=6}}function uS(e,t,r){const n=cD[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function cb(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{fD(o,n,r)};for(let o=0;o<e.length;o+=1)uS(e.charCodeAt(o),s,i);return t.join("")}function uD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function dD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}uD(n,t)}}function fD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function hD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)uS(e.charCodeAt(s),r,n);return new Uint8Array(t)}function mD(e){const t=[];return dD(e,r=>t.push(r)),new Uint8Array(t)}function pD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>lb(s,r,n)),lb(null,r,n),t.join("")}function gD(e){return Math.round(Date.now()/1e3)+e}function xD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const dn=()=>typeof window<"u"&&typeof document<"u",vi={tested:!1,writable:!1},jl=()=>{if(!dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vi.tested)return vi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vi.tested=!0,vi.writable=!0}catch{vi.tested=!0,vi.writable=!1}return vi.writable};function yD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const dS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},vD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fS=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},eu=async(e,t)=>{await e.removeItem(t)};class pf{constructor(){this.promise=new pf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pf.promiseConstructor=Promise;function Zh(e){const t=e.split(".");if(t.length!==3)throw new wl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!nD.test(t[n]))throw new wl("JWT not in base64url format");return{header:JSON.parse(cb(t[0])),payload:JSON.parse(cb(t[1])),signature:hD(t[2]),raw:{header:t[0],payload:t[1]}}}async function bD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wD(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function jD(e){return("0"+e.toString(16)).substr(-2)}function _D(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,jD).join("")}async function ND(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function SD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ND(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ma(e,t,r=!1){const n=_D();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await fS(e,`${t}-code-verifier`,s);const i=await SD(n);return[i,n===i?"plain":"s256"]}const kD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function PD(e){const t=e.headers.get(Op);if(!t||!t.match(kD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ED(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function CD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const AD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pa(e){if(!AD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var TD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ji=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OD=[502,503,504];async function ub(e){var t;if(!vD(e))throw new Dp(ji(e),0);if(OD.includes(e.status))throw new Dp(ji(e),e.status);let r;try{r=await e.json()}catch(i){throw new cS(ji(i),i)}let n;const s=PD(e);if(s&&s.getTime()>=lS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ab(ji(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ts}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ab(ji(r),e.status,r.weak_password.reasons);throw new iD(ji(r),e.status||500,n)}const DD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function we(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Op]||(i[Op]=lS["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await MD(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function MD(e,t,r,n,s,i){const o=DD(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Dp(ji(c),0)}if(l.ok||await ub(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ub(c)}}function Kn(e){var t;let r=null;LD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=gD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function db(e){const t=Kn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ls(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ID(e){return{data:e,error:null}}function $D(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=TD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function zD(e){return e}function LD(e){return e.access_token&&e.refresh_token&&e.expires_in}const em=["global","local","others"];var RD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class qD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=dS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=em[0]){if(em.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${em.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ls})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=RD(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$D,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(pe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ls})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zD});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(pe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pa(t);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ls})}catch(r){if(pe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pa(t);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ls})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pa(t);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ls})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pa(t.userId);try{const{data:r,error:n}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pa(t.userId),pa(t.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}}const FD={getItem:e=>jl()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{jl()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{jl()&&globalThis.localStorage.removeItem(e)}};function fb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function UD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ga={debug:!!(globalThis&&jl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class BD extends hS{}async function QD(e,t,r){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new BD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ga.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}UD();const VD={url:eD,storageKey:tD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hb(e,t,r){return await r()}class Hl{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&dn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},VD),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new qD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dS(s.fetch),this.lock=s.lock||hb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:dn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=QD:this.lock=hb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:jl()?this.storage=FD:(this.memoryStorage={},this.storage=fb(this.memoryStorage)):(this.memoryStorage={},this.storage=fb(this.memoryStorage)),dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=yD(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),dn()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),lD(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return pe(r)?{error:r}:{error:new cS("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Kn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(pe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:m}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await ma(this.storage,this.storageKey)),i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:p},xform:Kn})}else if("phone"in t){const{phone:d,password:f,options:m}=t;i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Kn})}else throw new Xc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(pe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:db})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:db})}else throw new Xc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(pe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,f,m,h;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:x,wallet:v,statement:g,options:w}=t;let _;if(dn())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),g?{statement:g}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:x,error:v}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:pD(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Kn});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Yc}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(pe(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Kn});if(await eu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(pe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Kn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(pe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ma(this.storage,this.storageKey));const{error:f}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xc("You must provide either an email or phone number.")}catch(l){if(pe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Kn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ma(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ID})}catch(i){if(pe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ts;const{error:s}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(pe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Xc("You must provide either an email or phone number and a type")}catch(r){if(pe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Xh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ls}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ts}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ls})})}catch(r){if(pe(r))return oD(r)&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ts;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ma(this.storage,this.storageKey));const{data:u,error:d}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ls});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ts;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Zh(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(pe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ts;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(pe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!dn())throw new Jc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Jc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ib("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ib("No code detected.");const{data:g,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Jc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const h=m-d;h*1e3<=wa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const p=m-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,d);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(pe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(aD(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=xD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ma(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(pe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(pe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:m}=i;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return dn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(pe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await wD(async s=>(s>0&&await bD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Kn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Jh(i)&&Date.now()+o-n<wa})}catch(n){if(this._debug(r,"error",n),pe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),dn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Zc(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xh;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Xh}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Jh(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ts;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),pe(i)){const o={session:null,error:i};return Jh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fS(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await eu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&dn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wa}ms, refresh threshold is ${Tp} ticks`),s<=Tp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ma(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(pe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(pe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(pe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Zh(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+sD>Date.now()))return n;const{data:s,error:i}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new wl("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new wl("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};n=h.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Zh(n);if(ED(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:s,signature:o},error:null}}const u=CD(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,mD(`${l}.${c}`)))throw new wl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}}Hl.nextInstanceID=0;const WD=Hl;class KD extends WD{constructor(t){super(t)}}var HD=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class GD{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=J6(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Q6,realtime:W6,auth:Object.assign(Object.assign({},V6),{storageKey:u}),global:B6},f=Z6(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=Y6(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new f6(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new U4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new q6(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return HD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KD({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new k6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YD=(e,t,r)=>new GD(e,t,r),XD="https://pgnhngzjjgxkwcdqotky.supabase.co",JD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4",V=YD(XD,JD),mS=b.createContext(void 0);function ZD({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(()=>!1);b.useRef(u);const f=O4(u);b.useEffect(()=>{},[u]);const m=b.useCallback(()=>{{console.warn("Developer mode cannot be enabled in production");return}},[]),h=f;console.log("DEBUG: isDeveloperMode status:",u);const p=(z,q,L)=>{h(`🔄 [${new Date().toISOString()}] AuthContext Loading: ${z} -> ${q}${L?` (${L})`:""}`)};b.useEffect(()=>{p("Initial setup",!0,"Component mounted"),(async()=>{s(!0),p("Auth initialization start",!0,"Fetching initial session");const{data:{session:L}}=await V.auth.getSession();L!=null&&L.user?(h("🔄 Initial session found, loading user profile...",L.user.id),p("Initial session found",!0,"Loading user profile"),o(!0),c(!0),s(!1),v(L.user.id,L.user.email).catch(O=>{h("💥 Initial profile load error (non-blocking):",O)}).finally(()=>{c(!1),p("Initial setup complete",!1,"Auth initialization finished")})):(h("📭 No initial session found"),p("No initial session",!1,"No session found"),r(null),o(!1),c(!1),s(!1),p("Initial setup complete",!1,"Auth initialization finished"))})();const{data:{subscription:q}}=V.auth.onAuthStateChange(async(L,O)=>{var A,k;h("🔄 Auth state change:",L,(A=O==null?void 0:O.user)==null?void 0:A.id,"Current loading state:",n),p(`Auth event: ${L}`,!0,`Session: ${((k=O==null?void 0:O.user)==null?void 0:k.id)||"none"}`),L==="SIGNED_OUT"||L==="USER_DELETED"?(h("👋 User signed out or deleted"),p("User signed out/deleted",!1,"Clearing user state"),r(null),o(!1),c(!1),s(!1)):O!=null&&O.user?(h("🔄 User session active, loading profile"),p("User session active",!0,"Loading profile"),o(!0),c(!0),s(!1),v(O.user.id,O.user.email).catch(E=>{h("💥 Auth event profile load error (non-blocking):",E),p("Auth event profile load error",!1,(E==null?void 0:E.message)||"Unknown error")}).finally(()=>{c(!1)})):(h("📭 Auth state change: No user in session"),p("Auth state change: No user",!1,"Setting user to null"),r(null),o(!1),c(!1),s(!1))});return()=>q.unsubscribe()},[]);const y=async z=>{try{h("📝 fetchUserSubscription: Attempting to fetch subscription for user:",z);const{data:q,error:L}=await V.from("subscriptions").select("id, user_id, plan, status, current_period_end, cancel_at_period_end, cancelled_at, created_at").eq("user_id",z).eq("status","active").order("created_at",{ascending:!1}).maybeSingle();return L?(h("❌ fetchUserSubscription: Error loading subscription:",L),null):(h("✅ fetchUserSubscription: Subscription data:",q),q)}catch(q){return h("💥 fetchUserSubscription: Error fetching subscription:",q),null}},x=async z=>{try{h("📝 fetchPlanSettingsForPlan: Fetching plan settings for plan:",z);const{data:q,error:L}=await V.from("plan_settings").select("plan_id, max_team_members, max_questions_custom_quiz, question_tier_access, allow_quick_start_quiz, allow_create_own_quiz, allow_study_schedule_quiz, allow_analytics_access").eq("plan_id",z).maybeSingle();return L?(h("❌ fetchPlanSettingsForPlan: Error loading plan settings:",L),null):(h("✅ fetchPlanSettingsForPlan: Plan settings loaded:",q),q)}catch(q){return h("💥 fetchPlanSettingsForPlan: Error fetching plan settings:",q),null}},v=async(z,q)=>{console.log("--- Entering loadUserProfile function ---");try{console.log("DEBUG: loadUserProfile - About to fetch user profile from DB (Step 1)"),p("loadUserProfile start",!0,`User: ${z}`),h("📝 loadUserProfile: Starting profile load for:",z),h("📝 loadUserProfile: Step 1: Fetching user profile from DB...");const{data:L,error:O}=await V.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          avatar_url,
          created_at,
          updated_at,
          nickname
        `).eq("id",z).maybeSingle();if(O)return h("❌ loadUserProfile: Step 1 Error loading user profile from DB:",O),p("Profile load error",!1,O.message),r(null),null;if(h("✅ loadUserProfile: Step 1: Raw profile data from DB:",L),!L)return h("⚠️ loadUserProfile: Step 1: No user profile found for user:",z),p("No profile found",!1,"Profile does not exist"),r(null),null;h("📝 loadUserProfile: Step 2: Fetching user subscription...");let A=await y(z),k=null;if(h("📝 loadUserProfile: Step 2: User subscription check:",{userId:z,hasSubscription:!!A,subscriptionPlan:A==null?void 0:A.plan,teamId:L.team_id,teamRole:L.team_role}),L.team_id&&(!A||A.plan==="free")){h("📝 loadUserProfile: Step 3: Team member with no/free subscription, checking team owner plan settings for team:",L.team_id),h("📝 loadUserProfile: Step 3: Calling get_team_owner_plan_settings RPC...");const{data:U,error:J}=await V.rpc("get_team_owner_plan_settings",{p_team_id:L.team_id});!J&&(U!=null&&U.success)?(h("📝 loadUserProfile: Step 3: get_team_owner_plan_settings RPC returned successfully."),h("📝 loadUserProfile: Step 3: Found team owner plan settings:",U.subscription_plan),h("✅ loadUserProfile: Step 3: Using team owner plan settings directly"),k=U.plan_settings):h("❌ loadUserProfile: Step 3: Failed to get team owner plan settings:",J||(U==null?void 0:U.error))}h("📝 loadUserProfile: Step 4: Determining plan settings..."),k?h("📝 loadUserProfile: Step 4: Using team owner plan settings:",k):A?(h("📝 loadUserProfile: Step 4: Loading plan settings for plan:",A.plan),k=await x(A.plan),h("📝 loadUserProfile: Step 4: Plan settings loaded:",k)):(h('📝 loadUserProfile: Step 4: No active subscription found, fetching settings for "free" plan'),k=await x("free"),h("📝 loadUserProfile: Step 4: Free plan settings loaded:",k));let $;L.team_id&&k?($=k.max_team_members,h("✅ loadUserProfile: Step 5: Using max_team_members from plan settings:",$)):h("ℹ️ loadUserProfile: Step 5: No team or plan settings available for max_team_members");const R={id:L.id,email:L.email||q||"",name:L.name,nickname:L.nickname,role:L.role,teamId:L.team_id,teamRole:L.team_role,maxTeamMembers:$,createdAt:L.created_at,subscription:A?{id:A.id,plan:A.plan,status:A.status,currentPeriodEnd:A.current_period_end,cancelAtPeriodEnd:A.cancel_at_period_end,cancelledAt:A.cancelled_at}:void 0,planSettings:k};return h("✅ loadUserProfile: User profile loaded successfully:",R),r(R),h("✅ loadUserProfile: setUser called with:",R.id),p("loadUserProfile success",!1,`User: ${R.name}`),R}catch(L){return h("💥 loadUserProfile: Error loading user data:",L),p("loadUserProfile error",!1,L instanceof Error?L.message:"Unknown error"),r(null),null}},D={user:t,login:async(z,q)=>{try{p("login start",!0,`Email: ${z}`),h("🔐 Starting login process for:",z);try{const k=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"login",identifier:z})});if(k.status===429){const E=await k.json(),$=E.retryAfter?Math.ceil(E.retryAfter/60):15;throw new Error(`Too many login attempts. Please try again in ${$} minutes.`)}k.ok||console.warn("Rate limiting check failed, proceeding with login")}catch(k){console.warn("Rate limiting check failed:",k)}const{data:L,error:O}=await V.auth.signInWithPassword({email:z,password:q});if(O)throw h("❌ Login failed:",O),p("login error",!1,O.message),O;if(!L.user)throw h("❌ Login failed: No user returned"),p("login no user",!1,"No user in response"),new Error("Login failed");if(h("✅ Auth login successful, loading user profile..."),!await v(L.user.id,L.user.email))throw new Error("User profile not found. Please contact support or try creating a new account.");h("🎉 Login process completed successfully"),p("login success",!1,"Login complete")}catch(L){throw p("login catch",!1,L instanceof Error?L.message:"Unknown error"),L}},signup:async(z,q,L,O)=>{try{p("signup start",!0,`Email: ${z}, Team: ${O}`),h("🚀 Starting signup process for:",{email:z,name:L,teamName:O}),h("📝 Step 1: Creating auth user...");const{data:A,error:k}=await V.auth.signUp({email:z,password:q});if(k)throw h("❌ Auth user creation failed:",k),p("signup auth error",!1,k.message),k;if(!A.user)throw h("❌ Auth user creation failed: No user returned"),p("signup no user",!1,"No user in auth response"),new Error("Failed to create user");const E=A.user.id;h("✅ Auth user created successfully:",E),h("📝 Step 2: Creating team...");let $=5;try{const{data:ye,error:Ct}=await V.from("plan_settings").select("max_team_members").eq("plan_id","free").single();!Ct&&ye?($=ye.max_team_members,h("📝 Step 2: Using max_team_members from free plan settings:",$)):h("⚠️ Step 2: Could not fetch free plan settings, using default:",$)}catch{h("⚠️ Step 2: Error fetching plan settings, using default:",$)}const{data:R,error:U}=await V.from("teams").insert([{name:O,description:`${O} team`,owner_id:E,member_count:1,max_members:$}]).select().single();if(U)throw h("❌ Team creation failed:",U),p("signup team error",!1,U.message),U;h("✅ Team created successfully:",R),h("📝 Step 3: Creating user profile...");const{error:J}=await V.from("user_profiles").insert([{id:E,email:z,name:L,role:"user",team_id:R.id,team_role:"owner"}]);if(J)throw h("❌ User profile creation failed:",J),p("signup profile error",!1,J.message),J;h("✅ User profile created successfully"),h("📝 Step 4: Creating subscription...");const{error:de}=await V.from("subscriptions").insert([{user_id:E,plan:"free",status:"active",current_period_end:new Date(Date.now()+30*24*60*60*1e3).toISOString(),cancel_at_period_end:!1}]);if(de)throw h("❌ Subscription creation failed:",de),p("signup subscription error",!1,de.message),de;h("✅ Subscription created successfully"),h("📝 Step 5: Creating team member entry...");const{error:he}=await V.from("team_members").insert([{user_id:E,team_id:R.id,role:"owner",status:"active",invited_by:E}]);if(he)throw h("❌ Team member creation failed:",he),p("signup member error",!1,he.message),he;h("✅ Team member entry created successfully");try{await V.functions.invoke("send-email-brevo",{body:{to:z,subject:`Welcome to PBE Quiz, ${L}!`,htmlContent:`
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h1 style="color: #4F46E5; text-align: center;">Welcome to PBE Quiz!</h1>
                <p>Hello ${L},</p>
                <p>Welcome to PBE Quiz! Your account has been successfully created, and you are now part of the <strong>${O}</strong> team.</p>
                <div style="text-align: center; margin: 30px 0;">
                  <a href="${window.location.origin}/dashboard" style="background-color: #4F46E5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">Go to Dashboard</a>
                </div>
                <p>Here's what you can do next:</p>
                <ul>
                  <li>Take a Quick Start Quiz to test your knowledge</li>
                  <li>Create custom quizzes focused on specific books</li>
                  <li>View your study schedule and assignments</li>
                  <li>Track your progress and achievements</li>
                </ul>
                <p>Best regards,<br>The PBE Quiz Team</p>
              </div>
            `}}),h("✅ Custom welcome email sent via Brevo")}catch(ye){console.error("❌ Failed to send custom welcome email via Brevo:",ye)}if(h("📝 Step 6: Loading complete user profile..."),!await v(E,A.user.email))throw new Error("Failed to load user profile after signup. Please try logging in.");h("🎉 Signup process completed successfully!"),p("signup success",!1,"Signup complete")}catch(A){throw h("💥 Signup process failed:",A),p("signup catch",!1,A instanceof Error?A.message:"Unknown error"),A}},signupForInvitation:async(z,q,L)=>{try{p("signup for invitation start",!0,`Email: ${z}`),h("🚀 Starting invitation signup process for:",{email:z,name:L}),h("📝 Step 1: Creating auth user...");const{data:O,error:A}=await V.auth.signUp({email:z,password:q});if(A)throw h("❌ Auth user creation failed:",A),p("signup for invitation auth error",!1,A.message),A;if(!O.user)throw h("❌ Auth user creation failed: No user returned"),p("signup for invitation no user",!1,"No user in auth response"),new Error("Failed to create user");const k=O.user.id;h("✅ Auth user created successfully:",k),h("📝 Step 2: Creating user profile...");const{error:E}=await V.from("user_profiles").insert([{id:k,email:z,name:L,role:"user",team_id:null,team_role:null}]);if(E)throw h("❌ User profile creation failed:",E),p("signup for invitation profile error",!1,E.message),E;if(h("✅ User profile created successfully"),h("📝 Step 3: Loading complete user profile..."),!await v(k,z))throw new Error("Failed to load user profile after creation");h("🎉 Invitation signup process completed successfully!"),p("signup for invitation success",!1,"Signup complete")}catch(O){throw p("signup for invitation catch",!1,O instanceof Error?O.message:"Unknown error"),O}},updateUserProfile:async z=>{if(!t)throw new Error("User not authenticated");try{p("updateUserProfile start",!0,`Updates: ${Object.keys(z).join(", ")}`),h("🔄 Updating user profile:",z);const q={};if(z.name!==void 0&&(q.name=z.name),z.email!==void 0&&(q.email=z.email),z.nickname!==void 0&&(q.nickname=z.nickname),Object.keys(q).length>0){const{error:L}=await V.from("user_profiles").update(q).eq("id",t.id);if(L)throw h("❌ Error updating user profile:",L),L}if(z.email&&z.email!==t.email){const{error:L}=await V.auth.updateUser({email:z.email});if(L)throw h("❌ Error updating auth user email:",L),L}await v(t.id,z.email||t.email),h("✅ User profile updated successfully")}catch(q){throw h("💥 Error updating user profile:",q),p("updateUserProfile error",!1,q instanceof Error?q.message:"Unknown error"),q}finally{p("updateUserProfile finally",!1,"Function complete")}},updatePassword:async z=>{if(!t)throw new Error("User not authenticated");try{p("updatePassword start",!0,"Updating password"),h("🔄 Updating user password...");const{error:q}=await V.auth.updateUser({password:z});if(q)throw h("❌ Error updating password:",q),p("updatePassword error",!1,q.message),q;h("✅ Password updated successfully"),p("updatePassword success",!1,"Password updated")}catch(q){throw h("💥 Error updating password:",q),p("updatePassword catch",!1,q instanceof Error?q.message:"Unknown error"),q}finally{p("updatePassword finally",!1,"Function complete")}},forgotPassword:async z=>{try{p("forgotPassword start",!0,`Email: ${z}`),h("🔄 Sending password reset email to:",z);try{const O=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"password_reset",identifier:z})});if(O.status===429){const A=await O.json(),k=A.retryAfter?Math.ceil(A.retryAfter/60):60;throw new Error(`Too many password reset attempts. Please try again in ${k} minutes.`)}O.ok||console.warn("Rate limiting check failed, proceeding with password reset")}catch(O){console.warn("Rate limiting check failed:",O)}const q=window.location.origin,{error:L}=await V.auth.resetPasswordForEmail(z,{redirectTo:`${q}/reset-password`});if(L)throw h("❌ Error sending password reset email:",L),p("forgotPassword error",!1,L.message),L;h("✅ Password reset email sent successfully"),p("forgotPassword success",!1,"Reset email sent")}catch(q){throw p("forgotPassword catch",!1,q instanceof Error?q.message:"Unknown error"),q}},resetPasswordWithToken:async(z,q)=>{try{p("resetPasswordWithToken start",!0,"Setting session and updating password"),h("🔄 Resetting password with token...");const{data:L,error:O}=await V.auth.setSession({access_token:z,refresh_token:""});if(O)throw h("❌ Error setting session with reset token:",O),p("resetPasswordWithToken session error",!1,O.message),new Error("Invalid or expired reset token");if(!L.user)throw h("❌ No user found with reset token"),p("resetPasswordWithToken no user",!1,"Invalid reset token"),new Error("Invalid reset token");h("✅ Reset token verified, updating password...");const{data:A,error:k}=await V.auth.updateUser({password:q});if(k)throw h("❌ Error updating password:",k),p("resetPasswordWithToken update error",!1,k.message),k;h("✅ Password updated successfully"),p("resetPasswordWithToken success",!1,"Password reset complete"),A.user&&await v(L.user.id,L.user.email)}catch(L){throw h("💥 Error resetting password:",L),p("resetPasswordWithToken catch",!1,L instanceof Error?L.message:"Unknown error"),L}},refreshUser:async()=>{try{p("refreshUser start",!0,"Force refresh requested");const{data:{session:z},error:q}=await V.auth.getSession();if(q)return h("❌ Session error during refresh:",q),p("Session error during refresh",!1,q.message),r(null),null;if(!(z!=null&&z.user))return h("🚫 No session found during refresh"),p("No session during refresh",!1,"Setting user to null"),r(null),null;h("🔄 Refreshing user profile for:",z.user.id);const L=await v(z.user.id,z.user.email);return L&&h("✅ User profile refreshed successfully:",L.name),p("refreshUser complete",!1,"Manual refresh complete"),L}catch(z){return h("💥 Error refreshing user:",z),p("refreshUser error",!1,z instanceof Error?z.message:"Unknown error"),null}},logout:async()=>{p("logout start",!0,"Signing out"),t&&Vs.getInstance().logSecurityEvent({type:"logout",userId:t.id,details:{success:!0}});const{error:z}=await V.auth.signOut();z?(h("Error signing out:",z),p("logout error",!1,z.message)):p("logout success",!1,"Signed out successfully"),r(null),s(!1)},loading:n,hasSession:i,profileLoading:l,isDeveloperMode:u,toggleDeveloperMode:m,developerLog:h,invalidateTeamData:async()=>{if(t)try{h("🔄 Invalidating team data for user:",t.id);const{error:z}=await V.from("user_profiles").update({team_id:null,team_role:null}).eq("id",t.id);if(z)throw h("❌ Error clearing team data from profile:",z),z;h("✅ Team data cleared from profile, refreshing user..."),await v(t.id,t.email),h("✅ User profile refreshed after team data invalidation")}catch(z){throw h("💥 Error invalidating team data:",z),z}}};return a.jsx(mS.Provider,{value:D,children:e})}function ve(){const e=b.useContext(mS);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const pS=b.createContext(void 0);function eM({children:e}){const[t,r]=b.useState([]),[n,s]=b.useState(!1),{user:i,developerLog:o,loading:l}=ve(),c=b.useCallback(async()=>{if(l){o("🔍 QuestionContext: Auth still loading, skipping question fetch");return}s(!0);try{o("🔍 Fetching questions from Supabase...");const{data:h,error:p}=await V.from("questions").select("id, book_of_bible, chapter, verse, question, answer, points, time_to_answer, tier, created_at").order("created_at",{ascending:!1});if(p)throw o("❌ Error fetching questions:",p),p;o("✅ Questions fetched successfully:",(h==null?void 0:h.length)||0,"questions"),r(h||[])}catch(h){o("💥 Error in fetchQuestions:",h),r([])}finally{s(!1)}},[l,o]);se.useEffect(()=>{l||(o("🔍 QuestionContext: Auth loaded, fetching questions"),c())},[l,c]);const u=b.useCallback(async h=>{if(!i)throw new Error("User not authenticated");try{o("📝 Creating new question...");const{data:p,error:y}=await V.from("questions").insert([{...h,created_by:i.id}]).select().single();if(y)throw o("❌ Error creating question:",y),y;o("✅ Question created successfully:",p),r(x=>[p,...x])}catch(p){throw o("💥 Error creating question:",p),p}},[i]),d=b.useCallback(async(h,p)=>{try{o("📝 Updating question:",h);const{data:y,error:x}=await V.from("questions").update(p).eq("id",h).select().single();if(x)throw o("❌ Error updating question:",x),x;o("✅ Question updated successfully:",y),r(v=>v.map(g=>g.id===h?y:g))}catch(y){throw o("💥 Error updating question:",y),y}},[]),f=b.useCallback(async h=>{try{o("🗑️ Deleting question:",h);const{error:p}=await V.from("questions").delete().eq("id",h);if(p)throw o("❌ Error deleting question:",p),p;o("✅ Question deleted successfully"),r(y=>y.filter(x=>x.id!==h))}catch(p){throw o("💥 Error deleting question:",p),p}},[]),m={questions:t,loading:n,fetchQuestions:c,createQuestion:u,updateQuestion:d,deleteQuestion:f};return a.jsx(pS.Provider,{value:m,children:e})}function aa(){const e=b.useContext(pS);if(e===void 0)throw new Error("useQuestion must be used within a QuestionProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>b.createElement("svg",{ref:d,...tM,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${rM(e)}`,l].join(" "),...u},[...t.map(([f,m])=>b.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=re("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=re("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=re("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=re("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=re("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=re("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=re("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=re("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=re("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=re("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ma(e,t="free",r){const n={free:0,pro:1,enterprise:2},s=n[t];return e.length===0?[]:(e.reduce((i,o)=>(i[o.tier]=(i[o.tier]||0)+1,i),{}),e.filter(i=>n[i.tier]<=s))}function jS(e,t,r){if(!e||e.length===0)return[];if(!t||t.length===0)return[];let n=[];return t.forEach((i,o)=>{i.chapters.forEach(l=>{const c=e.filter(u=>u.book_of_bible===i.book&&u.chapter===l);if(i.verses&&i.verses.length>0){const u=c.filter(d=>{const f=d.verse||1;return i.verses.includes(f)});n=[...n,...u]}else n=[...n,...c]})}),n.filter((i,o,l)=>o===l.findIndex(c=>c.id===i.id))}function Va(e,t){const r=t.filter(s=>s.book_of_bible===e);return[...new Set(r.map(s=>s.chapter))].sort((s,i)=>s-i)}function tm(e,t,r){const n=r.filter(i=>i.book_of_bible===e&&i.chapter===t);return[...new Set(n.map(i=>i.verse||1))].sort((i,o)=>i-o)}function _S(e){return[...new Set(e.map(r=>r.book_of_bible))].sort()}function NS(e){switch(e){case"quick-start":return"Quick Start";case"custom":return"Custom Quiz";case"study-assignment":return"Study Assignment";default:return"Quiz"}}function vb(e){switch(e){case"quick-start":return Vn;case"custom":return ko;case"study-assignment":return Yt;default:return Kt}}function SS(e){const[t,r,n]=e.split("-").map(Number),s=new Date(t,r-1,n);return Wr(s)}function Wr(e){var o,l,c;const r=new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/London",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e),n=parseInt(((o=r.find(u=>u.type==="year"))==null?void 0:o.value)||"1970"),s=parseInt(((l=r.find(u=>u.type==="month"))==null?void 0:l.value)||"1")-1,i=parseInt(((c=r.find(u=>u.type==="day"))==null?void 0:c.value)||"1");return new Date(Date.UTC(n,s,i,0,0,0,0))}function ao(e,t={}){const r={timeZone:"Europe/London",...t};return e.toLocaleDateString("en-GB",r)}function SM(e){return e.toLocaleDateString("en-CA",{timeZone:"Europe/London"})}function zp(e,t){const r=e.toLocaleDateString("en-CA",{timeZone:"Europe/London"}),n=t.toLocaleDateString("en-CA",{timeZone:"Europe/London"});return r===n}function rm(e){if(!e||e.length===0)return"";const t=[...e].sort((i,o)=>i-o),r=[];let n=t[0],s=t[0];for(let i=1;i<t.length;i++)t[i]===s+1?s=t[i]:(r.push(n===s?`${n}`:`${n}-${s}`),n=s=t[i]);return r.push(n===s?`${n}`:`${n}-${s}`),r.join(", ")}function kM(e,t,r="free",n){n==null||n("*** Entering calculateTotalQuestionsForStudyItems ***"),n==null||n("*** Input studyItems:",e),n==null||n("*** Total questions available:",t.length),n==null||n("🔍 calculateTotalQuestionsForStudyItems: Input studyItems:",e),n==null||n("🔍 calculateTotalQuestionsForStudyItems: Total questions in database:",t.length),n==null||n("🔍 calculateTotalQuestionsForStudyItems: User subscription plan:",r);const s=jS(t,e),i=Ma(s,r);return n==null||n("*** Final count:",i.length),n==null||n("🔍 calculateTotalQuestionsForStudyItems: Total count:",i.length),i.length}function kS(e){if(!e||e.length===0)return 0;const t=[...new Set(e.map(l=>{const c=new Date(l.completed_at);return Wr(c).getTime()}))].sort((l,c)=>c-l);if(t.length===0)return 0;let r=0;const n=Wr(new Date).getTime(),s=n-24*60*60*1e3;let i=n;const o=t[0];if(o===s)i=s;else if(o!==n)return 0;for(const l of t)if(l===i)r++,i-=24*60*60*1e3;else break;return r}function PM(e){if(!e||e.length===0)return 0;const t=[...new Set(e.map(s=>{const i=new Date(s.completed_at);return Wr(i).getTime()}))].sort((s,i)=>s-i);if(t.length===0)return 0;if(t.length===1)return 1;let r=1,n=1;for(let s=1;s<t.length;s++){const i=t[s],l=t[s-1]+24*60*60*1e3;i===l?(n++,r=Math.max(r,n)):n=1}return r}function EM(e){return kS(e)}function mr(e){if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r===0?`${t}h`:`${t}h ${r}m`}function oo(e,t=[]){return!e||e.length===0?"":e.map(r=>{if(r.verses&&r.verses.length>0){const n=rm(r.verses);if(r.chapters.length===1)return`${r.book} ${r.chapters[0]}:${n}`;{const s=rm(r.chapters);return`${r.book} (Ch. ${s}, Verses: ${n})`}}else{const n=rm(r.chapters);return r.chapters.length===1?`${r.book} ${r.chapters[0]}`:`${r.book} (Ch. ${n})`}}).join(", ")}const PS=b.createContext(void 0);function CM({children:e}){const[t,r]=b.useState([]),n=b.useCallback((i,o)=>{const l=Math.random().toString(36).substring(2,9),c={id:l,type:i,achievement:o};r(u=>[...u,c]),setTimeout(()=>{r(u=>u.filter(d=>d.id!==l))},5e3)},[]),s=b.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return a.jsxs(PS.Provider,{value:{showNotification:n},children:[e,a.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(i=>a.jsx(TM,{notification:i,onDismiss:()=>s(i.id)},i.id))})]})}function AM(){const e=b.useContext(PS);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e}function TM({notification:e,onDismiss:t}){const{achievement:r}=e;return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 flex items-center space-x-4 animate-fade-in-up",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:r.badge_icon_url||"/vite.svg",alt:"Achievement Badge",className:"h-10 w-10 rounded-full"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Achievement Unlocked!"}),a.jsx("p",{className:"text-md text-indigo-600 font-bold",children:r.name}),a.jsx("p",{className:"text-xs text-gray-500",children:r.description})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"×"})]})}async function OM(e){try{console.log("🔍 Checking if assignment should be marked as completed:",e);const{data:t,error:r}=await V.from("study_assignments").select("id, study_items, completed").eq("id",e).single();if(r)throw console.error("❌ Error loading assignment for completion check:",r),r;if(!t){console.warn("⚠️ Assignment not found for completion check:",e);return}if(t.completed){console.log("ℹ️ Assignment already marked as completed:",e);return}console.log("📚 Assignment study items:",t.study_items);const{data:n,error:s}=await V.from("quiz_sessions").select("id, questions, status, completed_at").eq("assignment_id",e).eq("status","completed");if(s)throw console.error("❌ Error loading quiz sessions for assignment:",s),s;if(console.log("🎯 Completed quiz sessions for assignment:",(n==null?void 0:n.length)||0),!n||n.length===0){console.log("ℹ️ No completed quiz sessions found for assignment");return}const i=new Set;n.forEach(u=>{u.questions&&Array.isArray(u.questions)&&u.questions.forEach(d=>{if(d.book_of_bible&&d.chapter){const f=`${d.book_of_bible}:${d.chapter}`;i.add(f)}})}),console.log("✅ Chapters completed through quizzes:",Array.from(i));const o=t.study_items||[],l=new Set;o.forEach(u=>{u.chapters.forEach(d=>{const f=`${u.book}:${d}`;l.add(f)})}),console.log("📋 Required chapters for assignment:",Array.from(l));const c=Array.from(l).every(u=>i.has(u));if(console.log("🎯 All chapters completed?",c),c){console.log("🎉 All chapters completed! Marking assignment as completed:",e);const{error:u}=await V.from("study_assignments").update({completed:!0,completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(u)throw console.error("❌ Error marking assignment as completed:",u),u;console.log("✅ Assignment marked as completed successfully")}else{const u=i.size,d=l.size;console.log(`📊 Assignment progress: ${u}/${d} chapters completed`)}}catch(t){throw console.error("💥 Failed to check/mark assignment completion:",t),t}}const nm=500;function DM(e,t){const r=(t-1)*nm,n=t*nm,s=e-r,i=n-e,o=s/nm*100;return{current:s,needed:i,percentage:Math.min(o,100)}}const tu=10,ES=b.createContext(void 0);function MM({children:e}){const[t,r]=b.useState([]),{user:n,developerLog:s,refreshUser:i}=ve(),{showNotification:o}=AM();b.useEffect(()=>{n?l():r([])},[n]);const l=b.useCallback(async()=>{if(n)try{const{data:_,error:j}=await V.from("quiz_sessions").select("id, title, type, status, total_points, max_points, total_actual_time_spent_seconds, completed_at, created_at").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(50);if(j)throw j;r(_||[])}catch(_){console.error("Error loading quiz sessions:",_)}},[n]),c=b.useCallback(async _=>{if(!n)throw new Error("User not authenticated");try{s("🚀 Creating quiz session...",_);const{data:j,error:N}=await V.from("quiz_sessions").insert([_]).select().single();if(N)throw s("❌ Error creating quiz session:",N),N;return s("✅ Quiz session created successfully:",j),r(S=>[j,...S]),j.id}catch(j){throw s("💥 Error creating quiz session:",j),j}},[n]),u=b.useCallback(_=>t.find(j=>j.id===_)||null,[t]),d=b.useCallback(_=>t.filter(j=>j.user_id===_&&j.status==="active"),[t]),f=b.useCallback((_,j)=>t.find(N=>N.assignment_id===_&&N.user_id===j)||null,[t]),m=b.useCallback(async _=>{if(!n)throw new Error("User not authenticated");try{s("🗑️ Deleting quiz session using RPC function:",_);const{data:j,error:N}=await V.rpc("delete_quiz_and_adjust_gamification",{p_quiz_session_id:_,p_user_id:n.id});if(N)throw s("❌ Error calling delete RPC function:",N),N;if(!(j!=null&&j.success)){const S=(j==null?void 0:j.error)||"Failed to delete quiz session";throw s("❌ RPC function returned error:",S),new Error(S)}s("✅ Quiz session deleted successfully via RPC"),r(S=>S.filter(P=>P.id!==_));try{await i(),s("✅ User data refreshed after quiz deletion")}catch(S){s("⚠️ Could not refresh user data after deletion:",S)}}catch(j){throw s("💥 Error deleting quiz session:",j),j}},[n,s,i]),h=_=>!_||!Array.isArray(_)?0:_.reduce((j,N)=>j+(Number(N.pointsEarned)||0),0),p=_=>!_||!Array.isArray(_)?0:_.reduce((j,N)=>j+(Number(N.timeSpent)||0),0),y=async _=>{if(!_.assignment_id)return 0;try{s("📅 Checking for on-time completion bonus for assignment:",_.assignment_id);const{data:j,error:N}=await V.from("study_assignments").select("date").eq("id",_.assignment_id).single();if(N||!j)return s("⚠️ Could not fetch assignment date for bonus XP check:",N),0;const S=new Date(j.date),P=new Date(_.completed_at||new Date);return zp(S,P)?(s("🎉 On-time completion bonus earned:",tu,"XP"),tu):(s("📅 Assignment completed on different day - no bonus XP"),0)}catch(j){return s("💥 Error checking for bonus XP:",j),0}},x=async()=>{if(n)try{const{data:_,error:j}=await V.from("achievements").select("*");if(j)throw j;const{data:N,error:S}=await V.from("user_achievements").select("achievement_id").eq("user_id",n.id);if(S)throw S;const P=new Set((N==null?void 0:N.map(C=>C.achievement_id))||[]);for(const C of _||[]){if(P.has(C.id))continue;let I=!1;switch(C.criteria_type){case"total_quizzes_completed":const{count:T,error:D}=await V.from("quiz_sessions").select("*",{count:"exact",head:!0}).eq("user_id",n.id).eq("status","completed");if(D)throw D;I=(T||0)>=C.criteria_value;break;case"total_points_earned":const{data:z,error:q}=await V.from("user_stats").select("total_xp").eq("user_id",n.id).single();!q&&z&&(I=z.total_xp>=C.criteria_value);break;case"longest_streak":const{data:L,error:O}=await V.from("user_stats").select("longest_streak").eq("user_id",n.id).single();!O&&L&&(I=L.longest_streak>=C.criteria_value);break;default:s("⚠️ Unknown achievement criteria type:",C.criteria_type);break}if(I){const{error:T}=await V.from("user_achievements").insert({user_id:n.id,achievement_id:C.id,unlocked_at:new Date().toISOString()});if(T){s("❌ Error unlocking achievement:",T);continue}s("🏆 Achievement unlocked:",C.name),o("achievement",C)}}}catch(_){s("💥 Error checking achievements:",_)}},v=b.useCallback(async(_,j)=>{if(!_)throw new Error("Session ID is required");if(!j)throw new Error("Updates object is required");if(!n)throw new Error("User not authenticated");try{s("🔄 Updating quiz session:",_,"with updates:",j);const N=t.find(P=>P.id===_);if(!N)throw new Error(`Session with ID ${_} not found`);let S={...j};if(j.results){const P=h(j.results),C=p(j.results);S.total_points=P,S.total_actual_time_spent_seconds=C,s("🔄 Recalculated derived values:",{calculatedTotalPoints:P,calculatedTimeSpent:C,resultsCount:j.results.length})}if(j.status==="completed"){s("🎯 Quiz session being marked as completed");let P=0;N.assignment_id&&(P=await y({...N,completed_at:S.completed_at||new Date().toISOString()}),P>0&&(S.bonus_xp=P,o("achievement",{id:"bonus-xp",name:"On-Time Completion Bonus!",description:`You earned ${tu} bonus XP for completing your study assignment on time!`,criteria_type:"bonus_xp",criteria_value:tu,badge_icon_url:"/images/badges/perfect.png"})));const{error:C}=await V.from("quiz_sessions").update(S).eq("id",_);if(C)throw s("❌ Error updating quiz session:",C),C;if(s("✅ Quiz session updated successfully"),N.assignment_id)try{s("📚 Marking assignment as completed:",N.assignment_id),await OM(N.assignment_id),s("✅ Assignment marked as completed")}catch(I){s("❌ Failed to mark assignment as completed:",I)}try{setTimeout(async()=>{try{await i(),s("✅ Post-completion: user stats refreshed")}catch(I){s("⚠️ Post-completion: user stats refresh failed (non-blocking):",I)}},400),await x()}catch(I){s("❌ Error in gamification updates:",I)}}else{const{error:P}=await V.from("quiz_sessions").update(S).eq("id",_);if(P)throw s("❌ Error updating quiz session:",P),P}r(P=>P.map(C=>C.id===_?{...C,...S}:C)),s("✅ Quiz session update completed successfully")}catch(N){throw s("💥 Error in updateQuizSession:",N),N}},[n,t,s,o]),g=b.useCallback(async(_,j)=>{if(!n)throw new Error("User not authenticated");if(!_)throw new Error("Session ID is required");try{s("🔄 Updating quiz approval status:",_,"to:",j);const{error:N}=await V.from("quiz_sessions").update({approval_status:j,updated_at:new Date().toISOString()}).eq("id",_);if(N)throw s("❌ Error updating quiz approval status:",N),N;r(S=>S.map(P=>P.id===_?{...P,approval_status:j}:P)),s("✅ Quiz approval status updated successfully")}catch(N){throw s("💥 Error in updateQuizApprovalStatus:",N),N}},[n,s]),w={sessions:t,createQuizSession:c,updateQuizSession:v,loadQuizSession:u,loadUserSessions:l,getActiveSessionsForUser:d,getSessionForAssignment:f,deleteQuizSession:m,updateQuizApprovalStatus:g};return a.jsx(ES.Provider,{value:w,children:e})}function fi(){const e=b.useContext(ES);if(e===void 0)throw new Error("useQuizSession must be used within a QuizSessionProvider");return e}function dt({children:e,requireAdmin:t=!1,requireUser:r=!1,allowedTeamRoles:n}){const{user:s,loading:i,hasSession:o,profileLoading:l,developerLog:c}=ve(),u=bs();if(c("🚦 ProtectedRoute: Rendering with user:",s,"loading:",i,"hasSession:",o,"profileLoading:",l,"path:",u.pathname),i)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!s)return o&&l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):a.jsx(Xn,{to:"/login",replace:!0});if(t&&s.role!=="admin")return a.jsx(Xn,{to:"/dashboard",replace:!0});if(r&&s.role==="admin")return a.jsx(Xn,{to:"/dashboard",replace:!0});if(n&&s.teamRole&&!n.includes(s.teamRole))return a.jsx(Xn,{to:"/dashboard",replace:!0});try{return a.jsx(a.Fragment,{children:e})}catch(d){return console.error("ProtectedRoute error:",d),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please try refreshing the page."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})})}}const Lp=[{id:"prod_SkGQB88LYZDhx4",name:"PBE Pro Play Yearly",description:"Annual subscription to PBE Pro Play with advanced features and unlimited access.",priceId:"price_1RoltBEGamTK7gLp3vFhnNpg",mode:"subscription",price:150,currency:"GBP",interval:"year",features:["Unlimited quiz sessions","Advanced analytics","Priority support","All question tiers","Team collaboration","Study schedule management"]},{id:"prod_SkG8EHn9mio3Tg",name:"PBE Pro Plan",description:"Monthly subscription to PBE Pro with enhanced features and team management.",priceId:"price_1RolccEGamTK7gLpzKYZ7aYj",mode:"subscription",price:15,currency:"GBP",interval:"month",features:["Enhanced quiz features","Team management","Progress tracking","Pro question access","Custom quiz builder","Basic analytics"]}];function Ko(e,t){const r=t||"GBP",n=typeof e=="number"&&!isNaN(e)?e:0;return new Intl.NumberFormat("en-GB",{style:"currency",currency:r}).format(n)}function xa(e){return new Date(e*1e3).toLocaleDateString()}function _l(e){if(e<60)return`${e}s`;const t=Math.floor(e/60),r=e%60;return`${t}:${r.toString().padStart(2,"0")}`}function Rp(e){const t=new Date,r=new Date(e),n=t.getTime()-r.getTime(),s=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),o=Math.floor(i/24);return s<1?"Just now":s<60?`${s} minute${s!==1?"s":""} ago`:i<24?`${i} hour${i!==1?"s":""} ago`:o<7?`${o} day${o!==1?"s":""} ago`:r.toLocaleDateString()}var vc=e=>e.type==="checkbox",Ai=e=>e instanceof Date,tr=e=>e==null;const CS=e=>typeof e=="object";var st=e=>!tr(e)&&!Array.isArray(e)&&CS(e)&&!Ai(e),IM=e=>st(e)&&e.target?vc(e.target)?e.target.checked:e.target.value:e,$M=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,zM=(e,t)=>e.has($M(t)),LM=e=>{const t=e.constructor&&e.constructor.prototype;return st(t)&&t.hasOwnProperty("isPrototypeOf")},V0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ut(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(V0&&(e instanceof Blob||n))&&(r||st(e)))if(t=r?[]:{},!r&&!LM(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Ut(e[s]));else return e;return t}var yf=e=>Array.isArray(e)?e.filter(Boolean):[],ot=e=>e===void 0,oe=(e,t,r)=>{if(!t||!st(e))return r;const n=yf(t.split(/[,[\].]+?/)).reduce((s,i)=>tr(s)?s:s[i],e);return ot(n)||n===e?ot(e[t])?r:e[t]:n},On=e=>typeof e=="boolean",W0=e=>/^\w*$/.test(e),AS=e=>yf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ue=(e,t,r)=>{let n=-1;const s=W0(t)?[t]:AS(t),i=s.length,o=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==o){const u=e[l];c=st(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const bb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},yn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Wn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};se.createContext(null);var RM=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==yn.all&&(t._proxyFormState[o]=!n||yn.all),e[o]}});return s};const qM=typeof window<"u"?b.useLayoutEffect:b.useEffect;var Mn=e=>typeof e=="string",FM=(e,t,r,n,s)=>Mn(e)?(n&&t.watch.add(e),oe(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),oe(r,i))):(n&&(t.watchAll=!0),r),UM=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Nl=e=>Array.isArray(e)?e:[e],wb=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},qp=e=>tr(e)||!CS(e);function Rs(e,t){if(qp(e)||qp(t))return e===t;if(Ai(e)&&Ai(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const i=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Ai(i)&&Ai(o)||st(i)&&st(o)||Array.isArray(i)&&Array.isArray(o)?!Rs(i,o):i!==o)return!1}}return!0}var cr=e=>st(e)&&!Object.keys(e).length,K0=e=>e.type==="file",vn=e=>typeof e=="function",id=e=>{if(!V0)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},TS=e=>e.type==="select-multiple",H0=e=>e.type==="radio",BM=e=>H0(e)||vc(e),sm=e=>id(e)&&e.isConnected;function QM(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ot(e)?n++:e[t[n++]];return e}function VM(e){for(const t in e)if(e.hasOwnProperty(t)&&!ot(e[t]))return!1;return!0}function ht(e,t){const r=Array.isArray(t)?t:W0(t)?[t]:AS(t),n=r.length===1?e:QM(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(st(n)&&cr(n)||Array.isArray(n)&&VM(n))&&ht(e,r.slice(0,-1)),e}var OS=e=>{for(const t in e)if(vn(e[t]))return!0;return!1};function ad(e,t={}){const r=Array.isArray(e);if(st(e)||r)for(const n in e)Array.isArray(e[n])||st(e[n])&&!OS(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ad(e[n],t[n])):tr(e[n])||(t[n]=!0);return t}function DS(e,t,r){const n=Array.isArray(e);if(st(e)||n)for(const s in e)Array.isArray(e[s])||st(e[s])&&!OS(e[s])?ot(t)||qp(r[s])?r[s]=Array.isArray(e[s])?ad(e[s],[]):{...ad(e[s])}:DS(e[s],tr(t)?{}:t[s],r[s]):r[s]=!Rs(e[s],t[s]);return r}var Ho=(e,t)=>DS(e,t,ad(t));const jb={value:!1,isValid:!1},_b={value:!0,isValid:!0};var MS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ot(e[0].attributes.value)?ot(e[0].value)||e[0].value===""?_b:{value:e[0].value,isValid:!0}:_b:jb}return jb},IS=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ot(e)?e:t?e===""?NaN:e&&+e:r&&Mn(e)?new Date(e):n?n(e):e;const Nb={isValid:!1,value:null};var $S=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Nb):Nb;function Sb(e){const t=e.ref;return K0(t)?t.files:H0(t)?$S(e.refs).value:TS(t)?[...t.selectedOptions].map(({value:r})=>r):vc(t)?MS(e.refs).value:IS(ot(t.value)?e.ref.value:t.value,e)}var WM=(e,t,r,n)=>{const s={};for(const i of e){const o=oe(t,i);o&&Ue(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},od=e=>e instanceof RegExp,Go=e=>ot(e)?e:od(e)?e.source:st(e)?od(e.value)?e.value.source:e.value:e,kb=e=>({isOnSubmit:!e||e===yn.onSubmit,isOnBlur:e===yn.onBlur,isOnChange:e===yn.onChange,isOnAll:e===yn.all,isOnTouch:e===yn.onTouched});const Pb="AsyncFunction";var KM=e=>!!e&&!!e.validate&&!!(vn(e.validate)&&e.validate.constructor.name===Pb||st(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Pb)),HM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Eb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Sl=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=oe(e,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sl(l,t))break}else if(st(l)&&Sl(l,t))break}}};function Cb(e,t,r){const n=oe(e,r);if(n||W0(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=oe(t,i),l=oe(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:r}}var GM=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return cr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||yn.all))},YM=(e,t,r)=>!e||!t||e===t||Nl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),XM=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,JM=(e,t)=>!yf(oe(e,t)).length&&ht(e,t),ZM=(e,t,r)=>{const n=Nl(oe(e,r));return Ue(n,"root",t[r]),Ue(e,r,n),e},Eu=e=>Mn(e);function Ab(e,t,r="validate"){if(Eu(e)||Array.isArray(e)&&e.every(Eu)||On(e)&&!e)return{type:r,message:Eu(e)?e:"",ref:t}}var ya=e=>st(e)&&!od(e)?e:{value:e,message:""},Tb=async(e,t,r,n,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:m,pattern:h,validate:p,name:y,valueAsNumber:x,mount:v}=e._f,g=oe(r,y);if(!v||t.has(y))return{};const w=l?l[0]:o,_=D=>{s&&w.reportValidity&&(w.setCustomValidity(On(D)?"":D||""),w.reportValidity())},j={},N=H0(o),S=vc(o),P=N||S,C=(x||K0(o))&&ot(o.value)&&ot(g)||id(o)&&o.value===""||g===""||Array.isArray(g)&&!g.length,I=UM.bind(null,y,n,j),T=(D,z,q,L=Wn.maxLength,O=Wn.minLength)=>{const A=D?z:q;j[y]={type:D?L:O,message:A,ref:o,...I(D?L:O,A)}};if(i?!Array.isArray(g)||!g.length:c&&(!P&&(C||tr(g))||On(g)&&!g||S&&!MS(l).isValid||N&&!$S(l).isValid)){const{value:D,message:z}=Eu(c)?{value:!!c,message:c}:ya(c);if(D&&(j[y]={type:Wn.required,message:z,ref:w,...I(Wn.required,z)},!n))return _(z),j}if(!C&&(!tr(f)||!tr(m))){let D,z;const q=ya(m),L=ya(f);if(!tr(g)&&!isNaN(g)){const O=o.valueAsNumber||g&&+g;tr(q.value)||(D=O>q.value),tr(L.value)||(z=O<L.value)}else{const O=o.valueAsDate||new Date(g),A=$=>new Date(new Date().toDateString()+" "+$),k=o.type=="time",E=o.type=="week";Mn(q.value)&&g&&(D=k?A(g)>A(q.value):E?g>q.value:O>new Date(q.value)),Mn(L.value)&&g&&(z=k?A(g)<A(L.value):E?g<L.value:O<new Date(L.value))}if((D||z)&&(T(!!D,q.message,L.message,Wn.max,Wn.min),!n))return _(j[y].message),j}if((u||d)&&!C&&(Mn(g)||i&&Array.isArray(g))){const D=ya(u),z=ya(d),q=!tr(D.value)&&g.length>+D.value,L=!tr(z.value)&&g.length<+z.value;if((q||L)&&(T(q,D.message,z.message),!n))return _(j[y].message),j}if(h&&!C&&Mn(g)){const{value:D,message:z}=ya(h);if(od(D)&&!g.match(D)&&(j[y]={type:Wn.pattern,message:z,ref:o,...I(Wn.pattern,z)},!n))return _(z),j}if(p){if(vn(p)){const D=await p(g,r),z=Ab(D,w);if(z&&(j[y]={...z,...I(Wn.validate,z.message)},!n))return _(z.message),j}else if(st(p)){let D={};for(const z in p){if(!cr(D)&&!n)break;const q=Ab(await p[z](g,r),w,z);q&&(D={...q,...I(z,q.message)},_(q.message),n&&(j[y]=D))}if(!cr(D)&&(j[y]={ref:w,...D},!n))return j}}return _(!0),j};const eI={mode:yn.onSubmit,reValidateMode:yn.onChange,shouldFocusError:!0};function tI(e={}){let t={...eI,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:vn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s=st(t.defaultValues)||st(t.values)?Ut(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Ut(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:wb(),state:wb()},h=t.criteriaMode===yn.all,p=M=>B=>{clearTimeout(u),u=setTimeout(M,B)},y=async M=>{if(!t.disabled&&(d.isValid||f.isValid||M)){const B=t.resolver?cr((await S()).errors):await C(n,!0);B!==r.isValid&&m.state.next({isValid:B})}},x=(M,B)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(l.mount)).forEach(W=>{W&&(B?Ue(r.validatingFields,W,B):ht(r.validatingFields,W))}),m.state.next({validatingFields:r.validatingFields,isValidating:!cr(r.validatingFields)}))},v=(M,B=[],W,F,H=!0,G=!0)=>{if(F&&W&&!t.disabled){if(o.action=!0,G&&Array.isArray(oe(n,M))){const Z=W(oe(n,M),F.argA,F.argB);H&&Ue(n,M,Z)}if(G&&Array.isArray(oe(r.errors,M))){const Z=W(oe(r.errors,M),F.argA,F.argB);H&&Ue(r.errors,M,Z),JM(r.errors,M)}if((d.touchedFields||f.touchedFields)&&G&&Array.isArray(oe(r.touchedFields,M))){const Z=W(oe(r.touchedFields,M),F.argA,F.argB);H&&Ue(r.touchedFields,M,Z)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ho(s,i)),m.state.next({name:M,isDirty:T(M,B),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ue(i,M,B)},g=(M,B)=>{Ue(r.errors,M,B),m.state.next({errors:r.errors})},w=M=>{r.errors=M,m.state.next({errors:r.errors,isValid:!1})},_=(M,B,W,F)=>{const H=oe(n,M);if(H){const G=oe(i,M,ot(W)?oe(s,M):W);ot(G)||F&&F.defaultChecked||B?Ue(i,M,B?G:Sb(H._f)):q(M,G),o.mount&&y()}},j=(M,B,W,F,H)=>{let G=!1,Z=!1;const ce={name:M};if(!t.disabled){if(!W||F){(d.isDirty||f.isDirty)&&(Z=r.isDirty,r.isDirty=ce.isDirty=T(),G=Z!==ce.isDirty);const fe=Rs(oe(s,M),B);Z=!!oe(r.dirtyFields,M),fe?ht(r.dirtyFields,M):Ue(r.dirtyFields,M,!0),ce.dirtyFields=r.dirtyFields,G=G||(d.dirtyFields||f.dirtyFields)&&Z!==!fe}if(W){const fe=oe(r.touchedFields,M);fe||(Ue(r.touchedFields,M,W),ce.touchedFields=r.touchedFields,G=G||(d.touchedFields||f.touchedFields)&&fe!==W)}G&&H&&m.state.next(ce)}return G?ce:{}},N=(M,B,W,F)=>{const H=oe(r.errors,M),G=(d.isValid||f.isValid)&&On(B)&&r.isValid!==B;if(t.delayError&&W?(c=p(()=>g(M,W)),c(t.delayError)):(clearTimeout(u),c=null,W?Ue(r.errors,M,W):ht(r.errors,M)),(W?!Rs(H,W):H)||!cr(F)||G){const Z={...F,...G&&On(B)?{isValid:B}:{},errors:r.errors,name:M};r={...r,...Z},m.state.next(Z)}},S=async M=>{x(M,!0);const B=await t.resolver(i,t.context,WM(M||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return x(M),B},P=async M=>{const{errors:B}=await S(M);if(M)for(const W of M){const F=oe(B,W);F?Ue(r.errors,W,F):ht(r.errors,W)}else r.errors=B;return B},C=async(M,B,W={valid:!0})=>{for(const F in M){const H=M[F];if(H){const{_f:G,...Z}=H;if(G){const ce=l.array.has(G.name),fe=H._f&&KM(H._f);fe&&d.validatingFields&&x([F],!0);const xe=await Tb(H,l.disabled,i,h,t.shouldUseNativeValidation&&!B,ce);if(fe&&d.validatingFields&&x([F]),xe[G.name]&&(W.valid=!1,B))break;!B&&(oe(xe,G.name)?ce?ZM(r.errors,xe,G.name):Ue(r.errors,G.name,xe[G.name]):ht(r.errors,G.name))}!cr(Z)&&await C(Z,B,W)}}return W.valid},I=()=>{for(const M of l.unMount){const B=oe(n,M);B&&(B._f.refs?B._f.refs.every(W=>!sm(W)):!sm(B._f.ref))&&ye(M)}l.unMount=new Set},T=(M,B)=>!t.disabled&&(M&&B&&Ue(i,M,B),!Rs($(),s)),D=(M,B,W)=>FM(M,l,{...o.mount?i:ot(B)?s:Mn(M)?{[M]:B}:B},W,B),z=M=>yf(oe(o.mount?i:s,M,t.shouldUnregister?oe(s,M,[]):[])),q=(M,B,W={})=>{const F=oe(n,M);let H=B;if(F){const G=F._f;G&&(!G.disabled&&Ue(i,M,IS(B,G)),H=id(G.ref)&&tr(B)?"":B,TS(G.ref)?[...G.ref.options].forEach(Z=>Z.selected=H.includes(Z.value)):G.refs?vc(G.ref)?G.refs.forEach(Z=>{(!Z.defaultChecked||!Z.disabled)&&(Array.isArray(H)?Z.checked=!!H.find(ce=>ce===Z.value):Z.checked=H===Z.value||!!H)}):G.refs.forEach(Z=>Z.checked=Z.value===H):K0(G.ref)?G.ref.value="":(G.ref.value=H,G.ref.type||m.state.next({name:M,values:Ut(i)})))}(W.shouldDirty||W.shouldTouch)&&j(M,H,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&E(M)},L=(M,B,W)=>{for(const F in B){if(!B.hasOwnProperty(F))return;const H=B[F],G=M+"."+F,Z=oe(n,G);(l.array.has(M)||st(H)||Z&&!Z._f)&&!Ai(H)?L(G,H,W):q(G,H,W)}},O=(M,B,W={})=>{const F=oe(n,M),H=l.array.has(M),G=Ut(B);Ue(i,M,G),H?(m.array.next({name:M,values:Ut(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&W.shouldDirty&&m.state.next({name:M,dirtyFields:Ho(s,i),isDirty:T(M,G)})):F&&!F._f&&!tr(G)?L(M,G,W):q(M,G,W),Eb(M,l)&&m.state.next({...r}),m.state.next({name:o.mount?M:void 0,values:Ut(i)})},A=async M=>{o.mount=!0;const B=M.target;let W=B.name,F=!0;const H=oe(n,W),G=fe=>{F=Number.isNaN(fe)||Ai(fe)&&isNaN(fe.getTime())||Rs(fe,oe(i,W,fe))},Z=kb(t.mode),ce=kb(t.reValidateMode);if(H){let fe,xe;const qe=B.type?Sb(H._f):IM(M),Cn=M.type===bb.BLUR||M.type===bb.FOCUS_OUT,vh=!HM(H._f)&&!t.resolver&&!oe(r.errors,W)&&!H._f.deps||XM(Cn,oe(r.touchedFields,W),r.isSubmitted,ce,Z),Io=Eb(W,l,Cn);Ue(i,W,qe),Cn?(H._f.onBlur&&H._f.onBlur(M),c&&c(0)):H._f.onChange&&H._f.onChange(M);const $o=j(W,qe,Cn),Oc=!cr($o)||Io;if(!Cn&&m.state.next({name:W,type:M.type,values:Ut(i)}),vh)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Cn&&y():Cn||y()),Oc&&m.state.next({name:W,...Io?{}:$o});if(!Cn&&Io&&m.state.next({...r}),t.resolver){const{errors:zo}=await S([W]);if(G(qe),F){const be=Cb(r.errors,n,W),Jt=Cb(zo,n,be.name||W);fe=Jt.error,W=Jt.name,xe=cr(zo)}}else x([W],!0),fe=(await Tb(H,l.disabled,i,h,t.shouldUseNativeValidation))[W],x([W]),G(qe),F&&(fe?xe=!1:(d.isValid||f.isValid)&&(xe=await C(n,!0)));F&&(H._f.deps&&E(H._f.deps),N(W,xe,fe,$o))}},k=(M,B)=>{if(oe(r.errors,B)&&M.focus)return M.focus(),1},E=async(M,B={})=>{let W,F;const H=Nl(M);if(t.resolver){const G=await P(ot(M)?M:H);W=cr(G),F=M?!H.some(Z=>oe(G,Z)):W}else M?(F=(await Promise.all(H.map(async G=>{const Z=oe(n,G);return await C(Z&&Z._f?{[G]:Z}:Z)}))).every(Boolean),!(!F&&!r.isValid)&&y()):F=W=await C(n);return m.state.next({...!Mn(M)||(d.isValid||f.isValid)&&W!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:W}:{},errors:r.errors}),B.shouldFocus&&!F&&Sl(n,k,M?H:l.mount),F},$=M=>{const B={...o.mount?i:s};return ot(M)?B:Mn(M)?oe(B,M):M.map(W=>oe(B,W))},R=(M,B)=>({invalid:!!oe((B||r).errors,M),isDirty:!!oe((B||r).dirtyFields,M),error:oe((B||r).errors,M),isValidating:!!oe(r.validatingFields,M),isTouched:!!oe((B||r).touchedFields,M)}),U=M=>{M&&Nl(M).forEach(B=>ht(r.errors,B)),m.state.next({errors:M?r.errors:{}})},J=(M,B,W)=>{const F=(oe(n,M,{_f:{}})._f||{}).ref,H=oe(r.errors,M)||{},{ref:G,message:Z,type:ce,...fe}=H;Ue(r.errors,M,{...fe,...B,ref:F}),m.state.next({name:M,errors:r.errors,isValid:!1}),W&&W.shouldFocus&&F&&F.focus&&F.focus()},de=(M,B)=>vn(M)?m.state.subscribe({next:W=>M(D(void 0,B),W)}):D(M,B,!0),he=M=>m.state.subscribe({next:B=>{YM(M.name,B.name,M.exact)&&GM(B,M.formState||d,ut,M.reRenderRoot)&&M.callback({values:{...i},...r,...B})}}).unsubscribe,ee=M=>(o.mount=!0,f={...f,...M.formState},he({...M,formState:f})),ye=(M,B={})=>{for(const W of M?Nl(M):l.mount)l.mount.delete(W),l.array.delete(W),B.keepValue||(ht(n,W),ht(i,W)),!B.keepError&&ht(r.errors,W),!B.keepDirty&&ht(r.dirtyFields,W),!B.keepTouched&&ht(r.touchedFields,W),!B.keepIsValidating&&ht(r.validatingFields,W),!t.shouldUnregister&&!B.keepDefaultValue&&ht(s,W);m.state.next({values:Ut(i)}),m.state.next({...r,...B.keepDirty?{isDirty:T()}:{}}),!B.keepIsValid&&y()},Ct=({disabled:M,name:B})=>{(On(M)&&o.mount||M||l.disabled.has(B))&&(M?l.disabled.add(B):l.disabled.delete(B))},Q=(M,B={})=>{let W=oe(n,M);const F=On(B.disabled)||On(t.disabled);return Ue(n,M,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:M}},name:M,mount:!0,...B}}),l.mount.add(M),W?Ct({disabled:On(B.disabled)?B.disabled:t.disabled,name:M}):_(M,!0,B.value),{...F?{disabled:B.disabled||t.disabled}:{},...t.progressive?{required:!!B.required,min:Go(B.min),max:Go(B.max),minLength:Go(B.minLength),maxLength:Go(B.maxLength),pattern:Go(B.pattern)}:{},name:M,onChange:A,onBlur:A,ref:H=>{if(H){Q(M,B),W=oe(n,M);const G=ot(H.value)&&H.querySelectorAll&&H.querySelectorAll("input,select,textarea")[0]||H,Z=BM(G),ce=W._f.refs||[];if(Z?ce.find(fe=>fe===G):G===W._f.ref)return;Ue(n,M,{_f:{...W._f,...Z?{refs:[...ce.filter(sm),G,...Array.isArray(oe(s,M))?[{}]:[]],ref:{type:G.type,name:M}}:{ref:G}}}),_(M,!1,void 0,G)}else W=oe(n,M,{}),W._f&&(W._f.mount=!1),(t.shouldUnregister||B.shouldUnregister)&&!(zM(l.array,M)&&o.action)&&l.unMount.add(M)}}},te=()=>t.shouldFocusError&&Sl(n,k,l.mount),le=M=>{On(M)&&(m.state.next({disabled:M}),Sl(n,(B,W)=>{const F=oe(n,W);F&&(B.disabled=F._f.disabled||M,Array.isArray(F._f.refs)&&F._f.refs.forEach(H=>{H.disabled=F._f.disabled||M}))},0,!1))},Y=(M,B)=>async W=>{let F;W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let H=Ut(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:G,values:Z}=await S();r.errors=G,H=Z}else await C(n);if(l.disabled.size)for(const G of l.disabled)Ue(H,G,void 0);if(ht(r.errors,"root"),cr(r.errors)){m.state.next({errors:{}});try{await M(H,W)}catch(G){F=G}}else B&&await B({...r.errors},W),te(),setTimeout(te);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cr(r.errors)&&!F,submitCount:r.submitCount+1,errors:r.errors}),F)throw F},Ve=(M,B={})=>{oe(n,M)&&(ot(B.defaultValue)?O(M,Ut(oe(s,M))):(O(M,B.defaultValue),Ue(s,M,Ut(B.defaultValue))),B.keepTouched||ht(r.touchedFields,M),B.keepDirty||(ht(r.dirtyFields,M),r.isDirty=B.defaultValue?T(M,Ut(oe(s,M))):T()),B.keepError||(ht(r.errors,M),d.isValid&&y()),m.state.next({...r}))},me=(M,B={})=>{const W=M?Ut(M):s,F=Ut(W),H=cr(M),G=H?s:F;if(B.keepDefaultValues||(s=W),!B.keepValues){if(B.keepDirtyValues){const Z=new Set([...l.mount,...Object.keys(Ho(s,i))]);for(const ce of Array.from(Z))oe(r.dirtyFields,ce)?Ue(G,ce,oe(i,ce)):O(ce,oe(G,ce))}else{if(V0&&ot(M))for(const Z of l.mount){const ce=oe(n,Z);if(ce&&ce._f){const fe=Array.isArray(ce._f.refs)?ce._f.refs[0]:ce._f.ref;if(id(fe)){const xe=fe.closest("form");if(xe){xe.reset();break}}}}for(const Z of l.mount)O(Z,oe(G,Z))}i=Ut(G),m.array.next({values:{...G}}),m.state.next({values:{...G}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:B.keepSubmitCount?r.submitCount:0,isDirty:H?!1:B.keepDirty?r.isDirty:!!(B.keepDefaultValues&&!Rs(M,s)),isSubmitted:B.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:H?{}:B.keepDirtyValues?B.keepDefaultValues&&i?Ho(s,i):r.dirtyFields:B.keepDefaultValues&&M?Ho(s,M):B.keepDirty?r.dirtyFields:{},touchedFields:B.keepTouched?r.touchedFields:{},errors:B.keepErrors?r.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Oe=(M,B)=>me(vn(M)?M(i):M,B),et=(M,B={})=>{const W=oe(n,M),F=W&&W._f;if(F){const H=F.refs?F.refs[0]:F.ref;H.focus&&(H.focus(),B.shouldSelect&&vn(H.select)&&H.select())}},ut=M=>{r={...r,...M}},Xt={control:{register:Q,unregister:ye,getFieldState:R,handleSubmit:Y,setError:J,_subscribe:he,_runSchema:S,_focusError:te,_getWatch:D,_getDirty:T,_setValid:y,_setFieldArray:v,_setDisabledField:Ct,_setErrors:w,_getFieldArray:z,_reset:me,_resetDefaultValues:()=>vn(t.defaultValues)&&t.defaultValues().then(M=>{Oe(M,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:le,_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return l},set _names(M){l=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:ee,trigger:E,register:Q,handleSubmit:Y,watch:de,setValue:O,getValues:$,reset:Oe,resetField:Ve,clearErrors:U,unregister:ye,setError:J,setFocus:et,getFieldState:R};return{...Xt,formControl:Xt}}function Yi(e={}){const t=se.useRef(void 0),r=se.useRef(void 0),[n,s]=se.useState({isDirty:!1,isValidating:!1,isLoading:vn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:vn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:tI(e),formState:n},e.formControl&&e.defaultValues&&!vn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,qM(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),se.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),se.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),se.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),se.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),se.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),se.useEffect(()=>{e.values&&!Rs(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),se.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=RM(n,i),t.current}function Re({type:e,title:t,message:r,dismissible:n=!1,onDismiss:s,className:i=""}){const o=()=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-700";case"error":return"bg-red-50 border-red-200 text-red-700";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-700";case"info":return"bg-blue-50 border-blue-200 text-blue-700";default:return"bg-gray-50 border-gray-200 text-gray-700"}},l=()=>{const c="h-5 w-5 flex-shrink-0";switch(e){case"success":return a.jsx(Dt,{className:`${c} text-green-600`});case"error":return a.jsx(tn,{className:`${c} text-red-600`});case"warning":return a.jsx(qn,{className:`${c} text-yellow-600`});case"info":return a.jsx(xb,{className:`${c} text-blue-600`});default:return a.jsx(xb,{className:`${c} text-gray-600`})}};return a.jsx("div",{className:`border rounded-lg p-4 ${o()} ${i}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[l(),a.jsxs("div",{className:"flex-1 min-w-0",children:[t&&a.jsx("h3",{className:"text-sm font-medium mb-1",children:t}),a.jsx("p",{className:"text-sm",children:r})]}),n&&s&&a.jsx("button",{onClick:s,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(Ln,{className:"h-4 w-4"})})]})})}function zt({size:e="md",text:t,className:r="",fullScreen:n=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},i={sm:"text-sm",md:"text-base",lg:"text-lg"};return n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto mb-4 ${s[e]}`,children:a.jsx(yb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})}):a.jsx("div",{className:`flex items-center justify-center ${r}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto ${t?"mb-4":""} ${s[e]}`,children:a.jsx(yb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})})}function lo({size:e="sm",className:t=""}){const r={sm:"h-4 w-4",md:"h-5 w-5"};return a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-current ${r[e]} ${t}`})}const Fp={disabledRoutes:["/documentation","/features","/signup"],redirectTo:"/login",betaMessage:"Welcome to PBE Journey Beta! Sign in to access the application.",showBetaBadge:!1};function rI(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{login:o,loading:l,developerLog:c}=ve(),u=Nt(),{register:d,handleSubmit:f,formState:{errors:m}}=Yi(),h=async y=>{const x=`login_${y.email}`;if(!Xv.isAllowed(x,5,3e5)){n("Too many login attempts. Please wait 5 minutes before trying again.");return}if(!A4(y.email).isValid){n("Please enter a valid email address");return}c("Form submitted with data:",y);try{n(""),i(!0),c("Attempting login...");const g=y.email.toLowerCase().trim();await o(g,y.password),Xv.reset(x),Vs.getInstance().logSecurityEvent({type:"login",userId:g,details:{success:!0}}),c("Login successful, navigating to dashboard"),u("/dashboard")}catch(g){console.error("Login error:",g),Vs.getInstance().logSecurityEvent({type:"login",userId:y.email,details:{success:!1,error:g.message}}),n(g.message||"Invalid email or password")}finally{i(!1)}},p=y=>{c("Form submit event triggered"),y.preventDefault(),f(h)(y)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Vn,{className:"h-7 w-7 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),Fp.showBetaBadge,a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Fp.betaMessage})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:p,children:[r&&a.jsx(Re,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),m.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:e?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),m.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password.message})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Forgot your password?"})})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Signing in..."})]}):"Sign in"})]})})]})})}function nI(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{forgotPassword:o,loading:l}=ve(),{register:c,handleSubmit:u,formState:{errors:d},getValues:f}=Yi(),m=async h=>{try{n(""),i(!0),await o(h.email),t(!0)}catch(p){console.error("Forgot password error:",p),n(p.message||"Failed to send reset email")}finally{i(!1)}};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Yl,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Check your email"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a password reset link to"," ",a.jsx("span",{className:"font-medium",children:f("email")})]})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-6",children:"Click the link in the email to reset your password. The link will expire in 1 hour."}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Qs,{to:"/login",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-all duration-200",children:"Back to Sign In"}),a.jsx("button",{onClick:()=>t(!1),className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200",children:"Send another email"})]})]})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Vn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Forgot your password?"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:u(m),children:[r&&a.jsx(Re,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your email address",...c("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),d.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Sending reset email..."})]}):"Send reset email"}),a.jsx("div",{className:"text-center",children:a.jsxs(Qs,{to:"/login",className:"flex items-center justify-center space-x-2 text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to sign in"})]})})]})})]})})}function sI(){const e=Nt(),[t,r]=b.useState(!1),[n,s]=b.useState(!1),[i,o]=b.useState(""),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,m]=b.useState(null),[h,p]=b.useState(null),{resetPasswordWithToken:y,loading:x}=ve(),{register:v,handleSubmit:g,watch:w,formState:{errors:_}}=Yi(),[j,N]=b.useState(!1),[S,P]=b.useState(null),C=w("password");console.log("🔍 ResetPassword Debug:",{error:i,success:l,accessToken:f,resetType:h,loading:x,windowLocationHash:window.location.hash,windowLocationHref:window.location.href}),b.useEffect(()=>{const D=(()=>{const A=window.location.hash;if(!A)return{};const k=new URLSearchParams(A.substring(1)),E={};for(const[$,R]of k.entries())E[$]=R;return E})();if(D.error){console.error("Supabase auth error from hash:",{error:D.error,error_code:D.error_code,error_description:D.error_description}),D.error_code==="otp_expired"?(console.log("🔍 Setting error: OTP expired"),o("The password reset link has expired. Please request a new password reset.")):(console.log("🔍 Setting error: Auth error -",D.error_description||D.error),o(`Authentication error: ${D.error_description||D.error}`));return}const z=D.access_token,q=D.type;if(!z||typeof z!="string"){P("Invalid reset token format"),o("Invalid or malformed reset link. Please request a new password reset.");return}if(z.split(".").length!==3){P("Invalid token structure"),o("Invalid reset link format. Please request a new password reset.");return}if(z.length<50){P("Token too short"),o("Invalid reset link. Please request a new password reset.");return}if(!/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+$/.test(z)){P("Invalid token characters"),o("Invalid reset link. Please request a new password reset.");return}if(q!=="recovery"){P("Invalid token type"),o("Invalid reset link type. Please request a new password reset.");return}m(z),p(q),N(!0)},[]),b.useEffect(()=>{},[]),b.useEffect(()=>{f&&h==="recovery"&&o("")},[f,h]);const I=async T=>{if(!f||!j){o("Invalid reset token");return}if(S){o(S);return}try{o(""),d(!0),await y(f,T.password),c(!0),setTimeout(()=>{e("/login")},3e3)}catch(D){console.error("Reset password error:",D),o(D.message||"Failed to reset password")}finally{d(!1)}};return l?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Dt,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Password reset successful"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Vn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Reset your password"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:g(I),children:[i&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[a.jsx("div",{className:"font-bold",children:"Debug Error Display:"}),a.jsx("div",{children:i}),a.jsxs("div",{className:"text-xs mt-2",children:["Access Token: ",f?"Present":"Missing"," | Reset Type: ",h||"Missing"," | Hash: ",window.location.hash||"Empty"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:t?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your new password",...v("password",{required:"Password is required",minLength:{value:12,message:"Password must be at least 12 characters"},validate:T=>{const D=BN(T);return D.isValid||D.error}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),_.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Confirm your new password",...v("confirmPassword",{required:"Please confirm your password",validate:T=>T===C||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!n),children:n?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),_.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:u||!f||!j||!!S,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Updating password..."})]}):"Update password"})]})})]})})}function G0(){const{developerLog:e}=ve(),{user:t}=ve(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[d,f]=b.useState(0),m=b.useCallback(async(y=!1)=>{if(!t){n(null),i([]),l(!1);return}const x=Date.now();if(!y&&x-d<5e3){e("🔄 Using cached subscription data");return}try{l(!0),u(null),e("🔄 Fetching subscription data from database...");const{data:v,error:g}=await V.from("stripe_customers").select("customer_id").eq("user_id",t.id).maybeSingle();g&&console.error("❌ Error checking stripe customer:",g),e("🔍 Stripe customer data:",(v==null?void 0:v.customer_id)||"No customer found");const{data:w,error:_}=await V.from("stripe_user_subscriptions").select("customer_id, subscription_id, subscription_status, price_id, current_period_start, current_period_end, cancel_at_period_end, payment_method_brand, payment_method_last4").maybeSingle();e("🔍 Raw stripe_user_subscriptions data:",w),e("🔍 stripe_user_subscriptions error:",_),_?(console.error("❌ Error fetching subscription:",_),_.code==="42P01"||_.message.includes("does not exist")?(console.warn("⚠️ Stripe subscription view not accessible, user likely has no subscription"),n(null)):(u("Failed to load subscription data"),n(null))):(n(w||null),e("✅ Subscription data loaded:",w?`Found subscription with price_id: ${w.price_id}`:"No subscription"));const{data:j,error:N}=await V.from("stripe_user_orders").select("customer_id, order_id, checkout_session_id, payment_intent_id, amount_total, currency, payment_status, order_status, order_date").order("order_date",{ascending:!1}).limit(5);N?(console.error("❌ Error fetching orders:",N),i([])):(i(j||[]),e("✅ Orders data loaded:",(j==null?void 0:j.length)||0,"orders"));const{data:S,error:P}=await V.from("subscriptions").select("plan, status, created_at").eq("user_id",t.id).maybeSingle();e("🔍 Raw main subscriptions table data:",S),e("🔍 Main subscriptions error:",P),P?console.error("❌ Error fetching main subscription:",P):(e("🔍 Main subscription data - Plan:",(S==null?void 0:S.plan)||"No plan found",(S==null?void 0:S.status)||"No status"),e("🔍 Full main subscription object:",S)),f(x)}catch(v){console.error("💥 Error fetching Stripe data:",v),u("Failed to load billing data"),n(null),i([])}finally{l(!1)}},[t,d,e]),h=b.useCallback(()=>(e("🔄 Force refreshing subscription data..."),m(!0)),[m,e]),p=b.useCallback(async()=>{if(!(r!=null&&r.subscription_id))return{success:!1,error:"No active subscription found"};try{e("🔄 Cancelling subscription:",r.subscription_id);const{data:y,error:x}=await V.functions.invoke("stripe-manage-subscription",{body:{action:"cancel",subscription_id:r.subscription_id}});return x?(console.error("❌ Error cancelling subscription:",x),{success:!1,error:x.message||"Failed to cancel subscription"}):y.success?(e("✅ Subscription cancelled successfully"),await h(),{success:!0}):(console.error("❌ Subscription cancellation failed:",y.error),{success:!1,error:y.error||"Failed to cancel subscription"})}catch(y){return console.error("💥 Error cancelling subscription:",y),{success:!1,error:y.message||"An unexpected error occurred"}}},[r,h,e]);return b.useEffect(()=>{m()},[m]),{subscription:r,orders:s,loading:o,error:c,refetch:m,forceRefresh:h,cancelCurrentSubscription:p}}function iI({toggleSidebar:e}){const{user:t,logout:r}=ve(),n=Nt(),{subscription:s,loading:i}=G0(),[o,l]=b.useState(0),c=se.useMemo(()=>i||!(s!=null&&s.price_id)?null:Lp.find(h=>h.priceId===s.price_id)||null,[s,i]);b.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{count:h,error:p}=await V.from("team_invitations").select("*",{count:"exact",head:!0}).eq("email",t.email).eq("status","pending").gt("expires_at",new Date().toISOString());if(p){console.error("Error loading invitations count:",p);return}l(h||0)}catch(h){console.error("Error loading invitations count:",h)}},d=()=>{r(),n("/login")},f=()=>i||!c?null:c.interval==="year"?a.jsx(hs,{className:"h-4 w-4 text-yellow-500"}):a.jsx(Gi,{className:"h-4 w-4 text-blue-500"}),m=()=>i?"Loading...":c?c.name:"Free Plan";return a.jsx("header",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 py-4 ",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"sm:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(mM,{className:"h-5 w-5"})}),a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:[a.jsx(nM,{className:"h-5 w-5"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:o>9?"9+":o})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsxs("div",{className:"hidden sm:flex flex-col text-right",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),Fp.showBetaBadge,!i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[f(),a.jsx("span",{className:"text-xs text-gray-500",children:m()})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-gray-300 border-t-gray-600"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 cursor-pointer",children:a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center",children:a.jsx($p,{className:"h-4 w-4 text-white"})})}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[a.jsxs("button",{onClick:()=>n("/settings"),className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[a.jsx(Qa,{className:"h-4 w-4"}),a.jsx("span",{children:"Settings"})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:d,className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Ip,{className:"h-4 w-4"}),a.jsx("span",{children:"Sign Out"})]})]})]})]})]})]})})}function aI({isSidebarOpen:e,toggleSidebar:t}){const r=bs(),{user:n,logout:s}=ve(),[i,o]=b.useState(!1),l=(n==null?void 0:n.role)==="admin",c=(n==null?void 0:n.teamRole)==="owner"||(n==null?void 0:n.teamRole)==="admin",u=()=>{o(!i)},d=()=>{s()},f=[{name:"Dashboard",icon:cM,path:"/dashboard",show:!0},{name:"Quiz Center",icon:Ce,path:"/quiz",show:!0},{name:"Study Schedule",icon:Yt,path:"/schedule",show:!0},{name:"Achievements",icon:Cr,path:"/achievements",show:!0},{name:"Leaderboard",icon:Kt,path:"/leaderboard",show:!!(n!=null&&n.teamId)},{name:"Team",icon:Xe,path:"/team",show:c},{name:"Analytics",icon:sr,path:"/analytics",show:c},{name:"Billing",icon:sd,path:"/billing",show:(n==null?void 0:n.teamRole)==="owner"}],m=[{name:"Admin Panel",icon:wM,path:"/admin",show:l},{name:"User Management",icon:Xe,path:"/admin/users",show:l},{name:"Question Management",icon:Ce,path:"/admin/questions",show:l},{name:"Plan Management",icon:xS,path:"/admin/plans",show:l},{name:"Achievement Management",icon:Cr,path:"/admin/achievements",show:l},{name:"Settings",icon:Qa,path:"/settings",show:l}],h=p=>r.pathname===p;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transition-transform duration-300 transform ${e?"translate-x-0":"-translate-x-full"} sm:hidden`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(Ce,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Qs,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-8 mb-2 px-3",children:a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"})}),a.jsx("nav",{className:"space-y-1",children:m.filter(p=>p.show).map(p=>a.jsxs(Qs,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:d,className:"flex items-center space-x-3 px-3 py-2 w-full text-left rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Ip,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign Out"})]})})]})]}),a.jsxs("div",{className:`hidden sm:flex flex-col h-full ${i?"w-20":"w-64"} bg-white border-r border-gray-200 transition-all duration-300`,children:[a.jsxs("div",{className:`flex items-center ${i?"justify-center":"justify-between"} h-16 px-4 border-b border-gray-200`,children:[!i&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(Ce,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),i&&a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(Ce,{className:"h-5 w-5 text-white"})}),a.jsx("button",{onClick:u,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:i?a.jsx(gf,{className:"h-5 w-5"}):a.jsx(F0,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Qs,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`mt-8 mb-2 ${i?"text-center":"px-3"}`,children:[!i&&a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"}),i&&a.jsx("div",{className:"h-px bg-gray-200 my-2"})]}),a.jsx("nav",{className:"space-y-1",children:m.filter(p=>p.show).map(p=>a.jsxs(Qs,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("button",{onClick:d,className:`flex items-center rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200 ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2 w-full text-left"}`,title:i?"Sign Out":"",children:[a.jsx(Ip,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:"Sign Out"})]})})]})]})}function ge({children:e,hideHeaderAndSidebar:t=!1}){const[r,n]=b.useState(!1),s=()=>{n(!r)};return t?a.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(aI,{isSidebarOpen:r,toggleSidebar:s}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 sm:hidden",onClick:s}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(iI,{toggleSidebar:s}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:e})]})]})}function pt({title:e,value:t,subtitle:r,icon:n,iconColor:s="text-indigo-600",trend:i,className:o=""}){const l=()=>{if(!i)return"";switch(i.type){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}};return a.jsxs("div",{className:`bg-white p-4 sm:p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 ${o}`,children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(n,{className:`h-5 w-5 sm:h-6 sm:w-6 ${s}`})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:e}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:t}),r&&a.jsx("p",{className:"text-xs text-gray-500",children:r})]})]}),i&&a.jsx("div",{className:"mt-3 sm:mt-4",children:a.jsx("span",{className:`text-xs sm:text-sm font-medium ${l()}`,children:i.value})})]})}function Y0(){const{user:e,developerLog:t}=ve(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),m=b.useCallback(async()=>{if(!e){t("🔍 useGamificationData: No user authenticated, skipping data fetch"),n(null),i([]),l([]),u(!1);return}t("🔍 useGamificationData: Starting gamification data fetch for user:",e.id),u(!0),f(null);try{const{data:x,error:v}=await V.from("user_stats").select("*").eq("user_id",e.id).maybeSingle();if(v)throw v;t("✅ useGamificationData: User stats fetched (raw):",x);const{data:g,error:w}=await V.from("quiz_sessions").select("completed_at").eq("user_id",e.id).eq("status","completed").order("completed_at",{ascending:!1});if(w)throw w;const _=kS(g||[]),j=PM(g||[]);t("✅ useGamificationData: Calculated streaks:",{currentStreak:_,longestStreakComputed:j});const N={...x||{user_id:e.id,total_xp:0,current_level:1,longest_streak:0},longest_streak:Math.max((x==null?void 0:x.longest_streak)||0,j||0),current_streak:_};n(N),t("✅ useGamificationData: Final user stats:",N);const{data:S,error:P}=await V.from("user_achievements").select("*").eq("user_id",e.id);if(P)throw P;i(S||[]),t("✅ useGamificationData: User achievements fetched:",(S==null?void 0:S.length)||0);const{data:C,error:I}=await V.from("achievements").select("*");if(I)throw I;l(C||[]),t("✅ useGamificationData: All achievements fetched:",(C==null?void 0:C.length)||0)}catch(x){console.error("💥 useGamificationData: Error fetching gamification data:",x),f(x.message||"Failed to load gamification data"),n(null),i([]),l([])}finally{u(!1)}},[e,t]),h=b.useCallback(async x=>{try{t("📝 Creating new achievement...");const{data:v,error:g}=await V.from("achievements").insert([x]).select().single();if(g)throw t("❌ Error creating achievement:",g),g;return t("✅ Achievement created successfully:",v),l(w=>[...w,v]),v}catch(v){throw t("💥 Error creating achievement:",v),v}},[t]),p=b.useCallback(async(x,v)=>{try{t("📝 Updating achievement:",x);const{data:g,error:w}=await V.from("achievements").update(v).eq("id",x).select().single();if(w)throw t("❌ Error updating achievement:",w),w;return t("✅ Achievement updated successfully:",g),l(_=>_.map(j=>j.id===x?g:j)),g}catch(g){throw t("💥 Error updating achievement:",g),g}},[t]),y=b.useCallback(async x=>{try{t("🗑️ Deleting achievement:",x);const{error:v}=await V.from("achievements").delete().eq("id",x);if(v)throw t("❌ Error deleting achievement:",v),v;t("✅ Achievement deleted successfully"),l(g=>g.filter(w=>w.id!==x))}catch(v){throw t("💥 Error deleting achievement:",v),v}},[t]);return b.useEffect(()=>{m()},[m]),{userStats:r,userAchievements:s,achievements:o,loading:c,error:d,refreshGamificationData:m,createAchievement:h,updateAchievement:p,deleteAchievement:y}}function X0(){const{user:e,developerLog:t}=ve(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),d=g=>{t("🔧 ensureStudyItemsArray: Raw assignment from DB:",g);const w={...g,date:typeof g.date=="string"?SS(g.date):g.date,study_items:g.study_items||[]};return t("✅ ensureStudyItemsArray: Normalized assignment:",w),w},f=d,m=b.useCallback(async()=>{if(e!=null&&e.id)try{t("📥 Loading team members for user:",e.id);const{data:g,error:w}=await V.rpc("get_team_members_for_user",{p_user_id:e.id});if(w){console.error("❌ Error loading team members:",w),u("Failed to load team members");return}if(t("📊 Team members function result:",g),!(g!=null&&g.success)){console.error("❌ Team members function failed:",g==null?void 0:g.error),u("Failed to load team members");return}const _=g.team_members||[];t("✅ Team members loaded:",_),i(_)}catch(g){console.error("💥 Error loading team members:",g),u("Failed to load team members")}},[e==null?void 0:e.id,t]),h=b.useCallback(async()=>{if(e!=null&&e.teamId)try{t("📥 Loading study assignments for team:",e.teamId);const{data:g,error:w}=await V.from("study_assignments").select("id, team_id, user_id, date, study_items, description, completed, completed_at, created_at").eq("team_id",e.teamId).order("date",{ascending:!0}).limit(100);if(w){console.error("❌ Error loading assignments:",w),u("Failed to load assignments");return}t("📊 Raw assignments data from DB:",g);const _=[];for(const j of g||[]){const N=d(j);if(t("🔍 Processing assignment:",{id:j.id,completed:j.completed,date:j.date,study_items:j.study_items}),j.completed)try{t("🔍 Fetching quiz session data for completed assignment:",j.id);const{data:S,error:P}=await V.from("quiz_sessions").select("id, total_points, max_points, total_actual_time_spent_seconds, completed_at, questions").eq("assignment_id",j.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!P&&S?(t("✅ Found quiz session data for assignment:",j.id,S),N.quiz_session_id=S.id,N.total_points_earned=S.total_points,N.max_points_possible=S.max_points,N.total_questions_answered=Array.isArray(S.questions)?S.questions.length:0,N.total_time_spent_minutes=S.total_actual_time_spent_seconds?Math.round(S.total_actual_time_spent_seconds/60):0,t("✅ Assignment populated with quiz data:",{assignmentId:j.id,quiz_session_id:N.quiz_session_id,total_points_earned:N.total_points_earned,max_points_possible:N.max_points_possible,total_questions_answered:N.total_questions_answered,total_time_spent_minutes:N.total_time_spent_minutes})):t("⚠️ No quiz session found for completed assignment:",j.id,P)}catch(S){t("💥 Error fetching quiz session for assignment:",j.id,S)}else t("ℹ️ Assignment not completed, skipping quiz session fetch:",j.id);_.push(N)}t("✅ Transformed assignments:",_),n(_)}catch(g){console.error("💥 Error loading assignments:",g),u("Failed to load assignments")}},[e==null?void 0:e.teamId,t]),p=b.useCallback(async g=>{try{l(!0),u(null),t("💾 Saving assignment:",g);const w={id:g.id,user_id:g.user_id,team_id:g.team_id,date:SM(g.date),study_items:g.study_items,description:g.description,created_by:g.created_by||(e==null?void 0:e.id),completed:g.completed||!1,completed_at:g.completed_at},{data:_}=await V.from("study_assignments").select("id").eq("id",g.id).maybeSingle();if(_){t("📝 Updating existing assignment");const{error:j}=await V.from("study_assignments").update({study_items:w.study_items,description:w.description,completed:w.completed,completed_at:w.completed_at,updated_at:new Date().toISOString()}).eq("id",g.id);if(j)throw console.error("❌ Error updating assignment:",j),j;n(N=>N.map(S=>S.id===g.id?g:S))}else{t("➕ Creating new assignment");const{error:j}=await V.from("study_assignments").insert([w]);if(j)throw console.error("❌ Error creating assignment:",j),j;n(N=>[...N,g])}t("✅ Assignment saved successfully")}catch(w){throw console.error("💥 Error saving assignment:",w),u("Failed to save assignment"),w}finally{l(!1)}},[e==null?void 0:e.id,t]),y=b.useCallback(async g=>{try{l(!0),u(null),t("🗑️ Deleting assignment:",g);const{error:w}=await V.from("study_assignments").delete().eq("id",g);if(w)throw console.error("❌ Error deleting assignment:",w),w;n(_=>_.filter(j=>j.id!==g)),t("✅ Assignment deleted successfully")}catch(w){throw console.error("💥 Error deleting assignment:",w),u("Failed to delete assignment"),w}finally{l(!1)}},[t]),x=b.useCallback(async g=>{if(!(e!=null&&e.teamId)||!g)return null;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(g))throw new Error("Invalid assignment ID format");try{t("📥 Loading assignment by ID:",g);const{data:_,error:j}=await V.from("study_assignments").select("*").eq("id",g).eq("team_id",e.teamId).maybeSingle();if(j)throw console.error("❌ Error loading assignment:",j),j;if(!_)return console.warn("⚠️ Assignment not found:",g),null;if(_.team_id!==e.teamId)throw new Error("Unauthorized access to assignment");if(!(_.user_id===e.id||e.teamRole==="owner"||e.teamRole==="admin"))throw new Error("Insufficient permissions to view assignment");return t("✅ Assignment loaded:",_),d(_)}catch(_){throw console.error("💥 Error loading assignment by ID:",_),_}},[e==null?void 0:e.teamId,t]),v=b.useCallback(async()=>{if(!(e!=null&&e.teamId)){i([]),n([]);return}try{l(!0),u(null),await Promise.all([m(),h()])}catch(g){console.error("💥 Error loading data:",g),u("Failed to load data")}finally{l(!1)}},[e==null?void 0:e.teamId,m,h]);return b.useEffect(()=>{v()},[v]),{assignments:r,teamMembers:s,loading:o,error:c,normalizeAssignment:f,saveAssignment:p,deleteAssignment:y,getAssignmentById:x,loadAssignments:v}}function an({columns:e,data:t,emptyState:r,className:n="",loading:s=!1,onRowClick:i,getRowClassName:o}){const l=t||[],c=r==null?void 0:r.icon;return s?a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:e.map(u=>a.jsx("th",{className:`px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${u.headerClassName||""}`,style:u.width?{width:u.width}:void 0,children:u.header},u.key))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:e.length,className:"px-6 py-12 text-center",children:r?a.jsxs(a.Fragment,{children:[c&&a.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),r.action]}):a.jsx("p",{className:"text-gray-500",children:"No data available"})})}):l.map((u,d)=>a.jsx("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${i?"cursor-pointer":""} ${o?o(u,d):""}`,onClick:()=>i==null?void 0:i(u,d),children:e.map(f=>a.jsx("td",{className:`px-4 sm:px-6 py-4 ${f.className||""}`,children:f.render?f.render(u,d):u[f.key]},f.key))},d))})]})})})}function zS({allAssignments:e,loading:t,user:r,questions:n,getSessionForAssignment:s,developerLog:i}){var f;const o=Nt(),l=b.useMemo(()=>{const m=Wr(new Date),h=new Date(m);h.setDate(m.getDate()-m.getDay());const p=new Date(h);return p.setDate(h.getDate()+6),e.filter(y=>{const x=Wr(y.date);return x>=h&&x<=p}).sort((y,x)=>y.date.getTime()-x.date.getTime())},[e]),c=m=>{o(`/quiz/study-assignment/${m.id}`,{state:{selectedStudyItems:m.study_items}})},u=se.useCallback(m=>{var h;return kM(m,n,((h=r==null?void 0:r.subscription)==null?void 0:h.plan)||"free",i)},[n,(f=r==null?void 0:r.subscription)==null?void 0:f.plan,i]),d=se.useMemo(()=>[{key:"day",header:"Day",render:m=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:ao(m.date,{weekday:"long"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:ao(m.date,{month:"short",day:"numeric"})})]}),className:"whitespace-nowrap"},{key:"book_chapters",header:"Book and Chapters",render:m=>a.jsxs("div",{className:"text-sm text-gray-900 break-words",children:[oo(m.study_items,n)," (",u(m.study_items)," Qs)"]})},{key:"questions_count",header:"Questions",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_questions_answered!==void 0?(i==null||i("🔍 Completed assignment questions data:",{assignmentId:m.id,total_questions_answered:m.total_questions_answered,completed:m.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:m.total_questions_answered})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:u(m.study_items)})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"score",header:"Score",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_points_earned!==void 0&&m.max_points_possible!==void 0?(()=>{i==null||i("🔍 Completed assignment score data:",{assignmentId:m.id,total_points_earned:m.total_points_earned,max_points_possible:m.max_points_possible,completed:m.completed});const h=m.max_points_possible>0?Math.round(m.total_points_earned/m.max_points_possible*100):0;return a.jsxs("div",{className:`font-bold text-lg ${h>=90?"text-green-600":h>=70?"text-blue-600":"text-red-600"}`,children:[h,"%"]})})():a.jsx("span",{className:"text-gray-400",children:"—"})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"time",header:"Time",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_time_spent_minutes!==void 0?(i==null||i("🔍 Completed assignment time data:",{assignmentId:m.id,total_time_spent_minutes:m.total_time_spent_minutes,completed:m.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[m.total_time_spent_minutes,"m"]})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-gray-400",children:"—"})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"start",header:"Start",render:m=>a.jsx("div",{className:"text-center",children:m.completed?a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Completed"}):r?(()=>{const h=s(m.id,r.id);return h?a.jsx("button",{onClick:()=>o(`/quiz/runner/${h.id}`),className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition-colors duration-200",children:"Resume"}):a.jsx("button",{onClick:()=>c(m),className:"bg-indigo-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-indigo-700 transition-colors duration-200",children:"Start"})})():null}),className:"text-center",headerClassName:"text-center"}],[u,r,s,o,c,i]);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Weekly Schedule"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Study assignments for this week"})]})]}),a.jsx(an,{columns:d,data:l,loading:t,emptyState:{icon:Yt,title:"No Assignments This Week",description:"You don't have any study assignments scheduled for this week. Check your full schedule or contact your team admin."}})]})}function oI(){const{user:e,developerLog:t}=ve();se.useEffect(()=>{var y,x;t("🔍 Dashboard: Component loaded with user:",e),t("🔍 Dashboard: User subscription plan:",(y=e==null?void 0:e.subscription)==null?void 0:y.plan),t("🔍 Dashboard: User plan settings:",e==null?void 0:e.planSettings),t("🔍 Dashboard: User question tier access:",(x=e==null?void 0:e.planSettings)==null?void 0:x.question_tier_access)},[e,t]);const{userStats:r,userAchievements:n,achievements:s,loading:i,error:o}=Y0(),{assignments:l,loading:c}=X0(),{getSessionForAssignment:u}=fi(),{questions:d,loading:f}=aa();se.useEffect(()=>{if(t("🔍 Dashboard: Questions loaded from context:",d.length,"total questions"),t("🔍 Dashboard: Questions loading state:",f),d.length>0){const y=d.reduce((v,g)=>(v[g.tier]=(v[g.tier]||0)+1,v),{});t("🔍 Dashboard: Questions by tier:",y);const x=d.reduce((v,g)=>(v[g.book_of_bible]=(v[g.book_of_bible]||0)+1,v),{});t("🔍 Dashboard: Questions by book:",x)}},[d,f,t]);const m=Nt();se.useEffect(()=>{var y;t("*** Dashboard render: questions.length =",d.length),t("Dashboard render: questions.length =",d.length),t("Dashboard render: user subscription plan =",(y=e==null?void 0:e.subscription)==null?void 0:y.plan),t("Dashboard render: user plan settings =",e==null?void 0:e.planSettings)},[d,e,t]);const p=r?DM(r.total_xp,r.current_level):{current:0,needed:1e3,percentage:0};return a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[f&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading questions..."})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your progress and recent activity."})]}),!f&&a.jsx("div",{className:"mb-8",children:a.jsx(zS,{allAssignments:l.filter(y=>y.user_id===(e==null?void 0:e.id)),loading:c,user:e,questions:d,getSessionForAssignment:u,developerLog:t})}),!i&&!o&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Progress"}),r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[a.jsx(pt,{title:"Level",value:r.current_level,subtitle:`${r.total_xp.toLocaleString()} total XP`,icon:Gi,iconColor:"text-yellow-600"}),a.jsx(pt,{title:"Longest Streak",value:`${r.longest_streak} days`,subtitle:"consecutive study days",icon:Vn,iconColor:"text-orange-600"}),a.jsx(pt,{title:"Current Streak",value:`${r.current_streak||0} day${(r.current_streak||0)!==1?"s":""}`,subtitle:"consecutive study days",icon:no,iconColor:"text-green-600"}),a.jsx(pt,{title:"Achievements",value:n.length,subtitle:"unlocked",icon:Cr,iconColor:"text-purple-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Level Progress"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Level ",r.current_level," (",Math.round(p.percentage),"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${p.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:[r.total_xp.toLocaleString()," XP"]}),a.jsxs("span",{children:[p.needed," XP to Level ",r.current_level+1]})]})]})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progress Yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Complete your first quiz to start tracking your progress, XP, and study streak!"}),a.jsx("button",{onClick:()=>m("/quiz"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[!i&&!o&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Achievements"}),a.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((y,x)=>{const v=s.find(g=>g.id===y.achievement_id);return a.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("div",{className:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Kt,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(v==null?void 0:v.name)||"Achievement Unlocked"}),(v==null?void 0:v.description)&&a.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.description}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(y.unlocked_at).toLocaleDateString()})]})]},`${y.user_id}-${y.achievement_id}`)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Qs,{to:"/quiz",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Start Quiz"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Begin a new quiz session"})]}),a.jsx(mb,{className:"h-4 w-4 text-gray-400"})]})}),a.jsx(Qs,{to:"/schedule",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"View Schedule"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Check your study assignments"})]}),a.jsx(mb,{className:"h-4 w-4 text-gray-400"})]})})]})]})]})]})})}function lI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function cI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function uI(e){return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function dI(e){return(e==null?void 0:e.role)==="admin"}function fI(){const{user:e,updateUserProfile:t,updatePassword:r,loading:n,isDeveloperMode:s,toggleDeveloperMode:i}=ve(),[o,l]=b.useState("profile"),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[m,h]=b.useState(null),[p,y]=b.useState(null),[x,v]=b.useState(null),[g,w]=b.useState(null),_=Yi({defaultValues:{name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||""}});se.useEffect(()=>{e&&_.reset({name:e.name,email:e.email})},[e,_]);const j=Yi(),N=async I=>{try{y(null),h(null),await t({name:I.name,email:I.email}),h("Profile updated successfully!"),setTimeout(()=>h(null),3e3)}catch(T){console.error("Error updating profile:",T),y(T.message||"Failed to update profile")}},S=async I=>{try{w(null),v(null),await r(I.newPassword),v("Password updated successfully!"),j.reset(),setTimeout(()=>v(null),3e3)}catch(T){console.error("Error updating password:",T),w(T.message||"Failed to update password")}},C=[{id:"profile",name:"Profile",icon:$p},{id:"security",name:"Security",icon:Nn},{id:"developer",name:"Developer",icon:Qa}].filter(I=>I.id==="developer"?dI(e):!0);return a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences."})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:C.map(I=>a.jsxs("button",{onClick:()=>l(I.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o===I.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(I.icon,{className:"h-4 w-4"}),a.jsx("span",{children:I.name})]},I.id))})}),a.jsxs("div",{className:"p-6",children:[o==="profile"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),a.jsxs("form",{onSubmit:_.handleSubmit(N),className:"space-y-6",children:[m&&a.jsx(Re,{type:"success",message:m,className:"mb-6"}),p&&a.jsx(Re,{type:"error",message:p,className:"mb-6"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:"h-20 w-20 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx($p,{className:"h-8 w-8 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Change Avatar"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"JPG, GIF or PNG. 1MB max."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("name",{required:"Name is required"})}),_.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nickname (Public Display Name)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("nickname"),placeholder:"Your public display name for leaderboards"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be shown on leaderboards instead of your full name. Leave empty to use your full name."}),_.formState.errors.nickname&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.nickname.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("email",{required:"Email is required"})}),_.formState.errors.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.email.message})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(lo,{}),a.jsx(B0,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Saving...":"Save Changes"})]})})]})]}),o==="security"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Security Settings"}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Nn,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]})]}),a.jsx("button",{className:"mt-3 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Enable 2FA"})]}),x&&a.jsx(Re,{type:"success",message:x}),g&&a.jsx(Re,{type:"error",message:g}),a.jsxs("form",{onSubmit:j.handleSubmit(S),className:"space-y-6",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Change Password"}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Nn,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Password Security"}),a.jsx("p",{children:"Since you're already authenticated, you can directly set a new password without entering your current one."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("newPassword",{required:"New password is required",minLength:{value:12,message:"Password must be at least 12 characters"},validate:I=>{const T=BN(I);return T.isValid||T.error}})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>u(!c),children:c?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.newPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.newPassword.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("confirmPassword",{required:"Please confirm your password",validate:I=>I===j.watch("newPassword")||"The passwords do not match"})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>f(!d),children:d?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.confirmPassword.message})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(lo,{}),a.jsx(yS,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Updating...":"Update Password"})]})})]})]})]}),o==="developer"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Developer Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Developer Mode"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable detailed console logging for debugging purposes. This will show internal application logs in the browser console."})]}),a.jsx("button",{onClick:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${s?"bg-indigo-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${s?"translate-x-6":"translate-x-1"}`})})]}),s&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium",children:"Developer Mode Active"}),a.jsx("p",{children:"Console logging is now enabled. Open your browser's developer tools (F12) to view detailed logs."})]})]})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"About Developer Mode"}),a.jsxs("ul",{className:"mt-2 space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Shows authentication flow logs"}),a.jsx("li",{children:"• Displays API request/response details"}),a.jsx("li",{children:"• Logs component state changes"}),a.jsx("li",{children:"• Helps troubleshoot application issues"}),a.jsx("li",{children:"• Setting persists across browser sessions"})]})]})]})})]})]})]})]})]})})}function hI(e){switch(e){case"owner":return"👑";case"admin":return"🛡️";default:return"👥"}}function mI(e){switch(e){case"owner":return hs;case"admin":return Nn;default:return Xe}}function LS(){const{user:e,logout:t,developerLog:r}=ve(),[n,s]=b.useState([]),[i,o]=b.useState([]),[l,c]=b.useState(!1),[u,d]=b.useState(null),f=b.useCallback(()=>lI(e),[e]),m=b.useCallback(async(j,N,S,P)=>{r("🔍 Processing member:",{memberId:j,userId:j,canViewDetails:P});try{const{data:C,error:I}=await V.rpc("get_team_member_profile",{p_user_id:j,p_team_id:N});if(I){console.warn("get_team_member_profile function not available, falling back to basic approach:",I);const{data:T,error:D}=await V.rpc("get_user_name_by_id",{p_user_id:j});return D&&console.warn(`Error getting name for user ${j}:`,D),j===(S==null?void 0:S.id)?{id:j,name:S.name||T||"Unknown User",email:S.email||"Email not available",lastActive:"Recently"}:{id:j,name:T||"Unknown User",email:P?"Run MANUAL_DB_FUNCTION.sql to enable email access":"Email restricted",lastActive:"Recently"}}else{if(C&&typeof C=="object"&&!C.error)return{id:C.id||j,name:C.name||"Unknown User",email:C.email||"Email not available",lastActive:"Recently"};{console.warn("get_team_member_profile returned error:",C);const{data:T,error:D}=await V.rpc("get_user_name_by_id",{p_user_id:j});return{id:j,name:j===(S==null?void 0:S.id)?S.name:T||"Unknown User",email:j===(S==null?void 0:S.id)?S.email:P?"Contact admin for email access":"Email restricted",lastActive:"Recently"}}}}catch{return{id:j,name:j===(S==null?void 0:S.id)?S.name:"Team Member",email:j===(S==null?void 0:S.id)?S.email:"Email restricted",lastActive:"Recently"}}},[r]),h=b.useCallback(async()=>{if(e!=null&&e.teamId)try{c(!0),d(null);const{data:j,error:N}=await V.from("team_members").select(`
          id,
          user_id,
          team_id,
          role,
          status,
          joined_at
        `).eq("team_id",e.teamId);if(N){console.error("Error loading team members:",N),d("Failed to load team members");return}r("🔍 Raw team members data:",{teamId:e.teamId,membersCount:(j==null?void 0:j.length)||0,membersData:j});const S=[];r("🔍 Starting member transformation. Processing",(j==null?void 0:j.length)||0,"members");for(const P of j||[]){const C=await m(P.user_id,e.teamId,e,f());S.push({id:P.id,userId:P.user_id,teamId:P.team_id,role:P.role,status:P.status,joinedAt:P.joined_at,user:C})}if(r("🔍 Final transformed members:",{originalCount:(j==null?void 0:j.length)||0,transformedCount:S.length,members:S.map(P=>({id:P.id,userId:P.userId,role:P.role,status:P.status,userName:P.user.name,userEmail:P.user.email}))}),s(S),f()){const{data:P,error:C}=await V.from("team_invitations").select("*").eq("team_id",e.teamId).eq("status","pending").gt("expires_at",new Date().toISOString());if(C)console.error("Error loading team invitations:",C);else{const I=(P||[]).map(T=>({id:T.id,teamId:T.team_id,email:T.email,role:T.role,invitedBy:T.invited_by,token:T.token,status:T.status,expiresAt:T.expires_at,createdAt:T.created_at}));o(I)}}else o([])}catch(j){console.error("Error loading team data:",j),d("Failed to load team data")}finally{c(!1)}},[e==null?void 0:e.teamId,e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.email,f,m,r]),p=b.useCallback(async j=>{try{c(!0),d(null),r("🚫 Suspending team member:",j);const N=n.find(P=>P.id===j);if(!N)return{success:!1,error:"Member not found"};if(N.role==="owner")return{success:!1,error:"Cannot suspend the team owner"};const{error:S}=await V.from("team_members").update({status:"suspended",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error("❌ Error suspending member:",S),{success:!1,error:"Failed to suspend member"}):(r("✅ Member suspended successfully"),N.userId===(e==null?void 0:e.id)&&(r("🚪 User suspended themselves, logging out..."),setTimeout(()=>{t()},1e3)),await h(),{success:!0})}catch(N){return console.error("💥 Error suspending member:",N),{success:!1,error:"Failed to suspend member"}}finally{c(!1)}},[n,e==null?void 0:e.id,t,h,r]),y=b.useCallback(async j=>{try{if(c(!0),d(null),r("✅ Reinstating team member:",j),!n.find(P=>P.id===j))return{success:!1,error:"Member not found"};const{error:S}=await V.from("team_members").update({status:"active",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error("❌ Error reinstating member:",S),{success:!1,error:"Failed to reinstate member"}):(r("✅ Member reinstated successfully"),await h(),{success:!0})}catch(N){return console.error("💥 Error reinstating member:",N),{success:!1,error:"Failed to reinstate member"}}finally{c(!1)}},[n,h,r]),x=b.useCallback(async(j,N)=>{if(!(e!=null&&e.teamId)||!j.trim())return{success:!1,error:"Please enter a valid email address"};try{c(!0),d(null);const{data:S,error:P}=await V.rpc("invite_team_member",{p_team_id:e.teamId,p_email:j.trim(),p_role:N});if(P)return console.error("Error calling invite_team_member function:",P),{success:!1,error:"Failed to send invitation. Please try again."};if(!S.success)return{success:!1,error:S.error||"Failed to send invitation"};r("✅ Invitation created successfully:",S);try{await V.functions.invoke("send-email-brevo",{body:{to:j.trim(),subject:`You're invited to join ${e.teamName||"a team"} on PBE Journey!`,htmlContent:`
              <p>Hello,</p>
              <p>You have been invited by ${e.name} to join their team on PBE Journey as a ${N}.</p>
              <p>Click the link below to accept your invitation:</p>
              <p><a href="${S.invitation_link}">${S.invitation_link}</a></p>
              <p>This link will expire in 7 days.</p>
              <p>Best regards,<br>The PBE Journey Team</p>
            `}})}catch(C){console.error("❌ Failed to send invitation email via Brevo:",C)}return await h(),{success:!0,invitationLink:S.invitation_link}}catch(S){return console.error("💥 Error inviting member:",S),{success:!1,error:"An unexpected error occurred. Please try again."}}finally{c(!1)}},[e==null?void 0:e.teamId,h,r]),v=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await V.from("team_invitations").update({expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString(),updated_at:new Date().toISOString()}).eq("id",j);return N?(console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}):(await h(),{success:!0})}catch(N){return console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}}finally{c(!1)}},[h]),g=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await V.from("team_invitations").delete().eq("id",j);return N?(console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}):(await h(),{success:!0})}catch(N){return console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}}finally{c(!1)}},[h]),w=b.useCallback(j=>`${window.location.origin}/invitations/accept?token=${j}`,[]),_={totalMembers:n.length,admins:n.filter(j=>j.role==="admin"||j.role==="owner").length,pendingInvites:i.length,activeMembers:n.filter(j=>j.status==="active").length};return b.useEffect(()=>{e!=null&&e.teamId?h():(s([]),o([]))},[e==null?void 0:e.teamId,h]),{teamMembers:n,teamInvitations:i,teamStats:_,loading:l,error:u,setError:d,inviteMember:x,suspendMember:p,reinstateMember:y,resendInvitation:v,cancelInvitation:g,generateInvitationLink:w,getRoleIcon:hI,loadTeamData:h}}function pI({teamId:e,userId:t,startDate:r,endDate:n}){const{developerLog:s}=ve(),[i,o]=b.useState(null),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){s("🔍 useAnalyticsData: No teamId provided, skipping data fetch"),c(!1),o(null);return}s("🔍 useAnalyticsData: Starting data fetch with params:",{teamId:e,userId:t,startDate:r,endDate:n}),c(!0),d(null);try{let m=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, total_actual_time_spent_seconds").eq("team_id",e).eq("status","completed");if(t?(s("🔍 useAnalyticsData: Filtering by userId:",t),m=m.eq("user_id",t)):s("🔍 useAnalyticsData: Fetching data for all team members"),r&&(m=m.gte("completed_at",r.toISOString())),n){const D=new Date(n);D.setDate(D.getDate()+1),m=m.lt("completed_at",D.toISOString())}const{data:h,error:p}=await m;if(p)throw p;s("🔍 useAnalyticsData: Fetched sessions for analytics:",h),s("🔍 useAnalyticsData: Sessions fetched:",(h==null?void 0:h.length)||0,"sessions"),s("🔍 useAnalyticsData: Sessions data:",h);const y=(h==null?void 0:h.map(D=>D.id))||[];s("🔍 useAnalyticsData: Completed session IDs for analytics:",y),s("🔍 useAnalyticsData: Completed session IDs:",y);let x=V.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, answered_at");if(y.length>0)x=x.in("quiz_session_id",y);else{s("🔍 useAnalyticsData: No completed sessions found, returning empty data"),o({totalQuizzesCompleted:0,totalQuestionsAnswered:0,averageScore:0,totalTimeSpentMinutes:0,studyStreak:0,totalPointsEarned:0,totalPossiblePoints:0}),c(!1);return}if(t&&(x=x.eq("user_id",t)),r&&(x=x.gte("answered_at",r.toISOString())),n){const D=new Date(n);D.setDate(D.getDate()+1),x=x.lt("answered_at",D.toISOString())}const{data:v,error:g}=await x;if(g)throw g;s("🔍 useAnalyticsData: Fetched question logs for analytics:",v),s("🔍 useAnalyticsData: Question logs fetched:",(v==null?void 0:v.length)||0,"logs"),s("🔍 useAnalyticsData: Question logs data:",v);const w=(h==null?void 0:h.length)||0,_=(v==null?void 0:v.length)||0;let j=0,N=0;v==null||v.forEach(D=>{j+=D.points_earned,N+=D.total_points_possible});const S=N>0?j/N*100:0,P=(h==null?void 0:h.reduce((D,z)=>{const q=z.total_actual_time_spent_seconds?Math.round(z.total_actual_time_spent_seconds/60):0;return D+q},0))||0;s("🔍 useAnalyticsData: Study time from estimated_minutes:",P);const C=(h==null?void 0:h.map(D=>({completed_at:D.completed_at})))||[],I=EM(C),T={totalQuizzesCompleted:w,totalQuestionsAnswered:_,averageScore:S,totalTimeSpentMinutes:P,studyStreak:I,totalPointsEarned:j,totalPossiblePoints:N};s("🔍 useAnalyticsData: Calculated analytics data:",T),o(T)}catch(m){console.error("Error fetching analytics data:",m),d(m.message||"Failed to load analytics data"),o(null)}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function gI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useKnowledgeGapsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useKnowledgeGapsData: Starting knowledge gaps analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log("🔍 useKnowledgeGapsData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const j=new Date(n);j.setDate(j.getDate()+1),f=f.lt("completed_at",j.toISOString())}const{data:m,error:h}=await f;if(h)throw h;console.log("🔍 useKnowledgeGapsData: Found completed sessions:",(m==null?void 0:m.length)||0);const p=(m==null?void 0:m.map(j=>j.id))||[];if(p.length===0){console.log("🔍 useKnowledgeGapsData: No completed sessions found, returning empty data"),i([]),l(!1);return}let y=V.from("quiz_question_logs").select(`
          points_earned,
          total_points_possible,
          is_correct,
          questions!inner (
            book_of_bible,
            chapter,
            tier
          )
        `).in("quiz_session_id",p);t&&(y=y.eq("user_id",t));const{data:x,error:v}=await y;if(v)throw v;if(console.log("🔍 useKnowledgeGapsData: Question logs fetched:",(x==null?void 0:x.length)||0),!x||x.length===0){i([]),l(!1);return}const g=new Map;x.forEach(j=>{const N=j.questions;if(!N)return;const S=`book:${N.book_of_bible}`;g.has(S)||g.set(S,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"book",book:N.book_of_bible});const P=g.get(S);P.totalAttempts++,P.totalPointsEarned+=j.points_earned,P.totalPointsPossible+=j.total_points_possible,j.is_correct&&P.correctAnswers++;const C=`chapter:${N.book_of_bible}:${N.chapter}`;g.has(C)||g.set(C,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"chapter",book:N.book_of_bible,chapter:N.chapter});const I=g.get(C);I.totalAttempts++,I.totalPointsEarned+=j.points_earned,I.totalPointsPossible+=j.total_points_possible,j.is_correct&&I.correctAnswers++;const T=`tier:${N.tier}`;g.has(T)||g.set(T,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"tier",tier:N.tier});const D=g.get(T);D.totalAttempts++,D.totalPointsEarned+=j.points_earned,D.totalPointsPossible+=j.total_points_possible,j.is_correct&&D.correctAnswers++});const w=[];g.forEach((j,N)=>{var C,I;if(j.totalAttempts<3)return;const S=j.totalPointsPossible>0?j.totalPointsEarned/j.totalPointsPossible*100:0;if(S>=90)return;let P="";if(j.type==="book"?P=j.book:j.type==="chapter"?P=`${j.book} Chapter ${j.chapter}`:j.type==="tier"&&(P=`${(C=j.tier)==null?void 0:C.charAt(0).toUpperCase()}${(I=j.tier)==null?void 0:I.slice(1)} Questions`),r&&(y=y.gte("answered_at",r.toISOString())),n){const T=new Date(n);T.setDate(T.getDate()+1),y=y.lt("answered_at",T.toISOString())}w.push({topic:P,type:j.type,averageScore:S,totalQuestions:j.totalAttempts,totalAttempts:j.totalAttempts,correctAnswers:j.correctAnswers,incorrectAnswers:j.totalAttempts-j.correctAnswers,book:j.book,chapter:j.chapter,tier:j.tier})}),w.sort((j,N)=>j.averageScore-N.averageScore);const _=w.slice(0,10);console.log("✅ useKnowledgeGapsData: Knowledge gaps analysis complete:",_.length,"gaps found"),i(_)}catch(f){console.error("❌ Error fetching knowledge gaps data:",f),u(f.message||"Failed to load knowledge gaps data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function xI({teamId:e,userId:t,timeframe:r="weekly",startDate:n,endDate:s}){const[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){console.log("🔍 useProgressionData: No teamId provided, skipping data fetch"),c(!1),o([]);return}console.log("🔍 useProgressionData: Starting progression analysis with params:",{teamId:e,userId:t,timeframe:r,startDate:n,endDate:s}),c(!0),d(null);try{const m=s||new Date,h=n||(()=>{const v=new Date(m);return r==="weekly"?v.setDate(v.getDate()-12*7):v.setMonth(v.getMonth()-12),v})(),p=[];let y=12;if(n&&s){const v=s.getTime()-n.getTime();r==="weekly"?y=Math.ceil(v/(7*24*60*60*1e3)):y=Math.ceil(v/(30*24*60*60*1e3)),y=Math.min(Math.max(y,1),24)}for(let v=y-1;v>=0;v--){let g,w,_;if(r==="weekly"){const j=new Date(m);j.setDate(m.getDate()-(m.getDay()+v*7)),j.setHours(0,0,0,0);const N=new Date(j);N.setDate(j.getDate()+6),N.setHours(23,59,59,999),g=j,w=N,_=`Week of ${j.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const j=new Date(m.getFullYear(),m.getMonth()-v,1),N=new Date(m.getFullYear(),m.getMonth()-v+1,0,23,59,59,999);g=j,w=N,_=j.toLocaleDateString("en-US",{month:"short",year:"numeric"})}n&&w<n||s&&g>s||p.push({start:g,end:w,label:_})}console.log("📅 useProgressionData: Analyzing",p.length,"periods within date range");const x=[];for(const v of p){console.log(`🔍 useProgressionData: Processing period: ${v.label}`);let g=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, total_actual_time_spent_seconds").eq("team_id",e).eq("status","completed").gte("completed_at",v.start.toISOString()).lte("completed_at",v.end.toISOString());t&&(g=g.eq("user_id",t));const{data:w,error:_}=await g;if(_)throw _;const j=(w==null?void 0:w.map(O=>O.id))||[];let N=[];if(j.length>0){let O=V.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, is_correct").gte("answered_at",v.start.toISOString()).lte("answered_at",v.end.toISOString()).in("quiz_session_id",j);t&&(O=O.eq("user_id",t));const{data:A,error:k}=await O;if(k)throw k;N=A||[]}const S=(w==null?void 0:w.length)||0,P=(N==null?void 0:N.length)||0;let C=0,I=0,T=0,D=0;N==null||N.forEach(O=>{C+=O.points_earned,I+=O.total_points_possible,O.is_correct?T++:D++});const z=I>0?C/I*100:0,q=(w==null?void 0:w.reduce((O,A)=>{const k=A.total_actual_time_spent_seconds?Math.round(A.total_actual_time_spent_seconds/60):0;return O+k},0))||0,L={period:v.label,periodStart:v.start,periodEnd:v.end,totalQuizzesCompleted:S,totalQuestionsAnswered:P,totalPointsEarned:C,totalPossiblePoints:I,averageScore:z,totalTimeSpentMinutes:q,correctAnswers:T,incorrectAnswers:D};x.push(L),console.log(`✅ useProgressionData: Period ${v.label} processed:`,L)}console.log("✅ useProgressionData: Progression analysis complete:",x.length,"data points"),o(x)}catch(m){console.error("❌ Error fetching progression data:",m),d(m.message||"Failed to load progression data"),o([])}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function RS({userId:e,startDate:t,endDate:r}){const[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{if(!e){s([]),o(!1),c(null);return}o(!0),c(null);try{console.log("🔍 useQuizHistoryData: Fetching quiz history for user:",e,"with date range:",t,r);let d=V.from("quiz_sessions_view").select(`
          id,
          title,
          type,
          completed_at,
          created_at,
          total_points,
          max_points,
          total_actual_time_spent_seconds,
          questions_count,
          approval_status
        `).eq("user_id",e).eq("status","completed");if(t&&(d=d.gte("completed_at",t.toISOString())),r){const h=new Date(r);h.setDate(h.getDate()+1),d=d.lt("completed_at",h.toISOString())}d=d.order("completed_at",{ascending:!1});const{data:f,error:m}=await d;if(m)throw console.error("❌ useQuizHistoryData: Error fetching quiz sessions:",m),m;console.log("✅ useQuizHistoryData: Fetched",(f==null?void 0:f.length)||0,"quiz history entries."),s(f||[])}catch(d){console.error("💥 useQuizHistoryData: Failed to fetch quiz history:",d),c(d.message||"Failed to load quiz history"),s([])}finally{o(!1)}},[e,t,r]);return b.useEffect(()=>{u()},[u]),{data:n,loading:i,error:l,refreshData:u}}function yI({userId:e,startDate:t,endDate:r}){const{data:n,loading:s,error:i,refreshData:o}=RS({userId:e,startDate:t,endDate:r}),[l,c]=b.useState([]);b.useEffect(()=>{c(n)},[n]);const u=b.useCallback((d,f)=>{c(m=>m.map(h=>h.id===d?{...h,...f}:h))},[]);return{data:l,loading:s,error:i,refreshData:o,updateLocalQuizHistoryEntry:u}}function vI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useStudyScheduleAnalysisData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useStudyScheduleAnalysisData: Starting study schedule analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("study_assignments").select("*").eq("team_id",e);t&&(console.log("🔍 useStudyScheduleAnalysisData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("date",r.toISOString().split("T")[0])),n&&(f=f.lte("date",n.toISOString().split("T")[0])),f=f.order("date",{ascending:!1});const{data:m,error:h}=await f;if(h)throw console.error("❌ useStudyScheduleAnalysisData: Error fetching assignments:",h),h;console.log("✅ useStudyScheduleAnalysisData: Fetched assignments:",(m==null?void 0:m.length)||0);const p=[];for(const y of m||[]){const x={...y,date:typeof y.date=="string"?SS(y.date):y.date,study_items:y.study_items||[]};if(y.completed)try{const{data:v,error:g}=await V.from("quiz_sessions").select("id, total_points, max_points, questions, total_actual_time_spent_seconds").eq("assignment_id",y.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!g&&v&&(x.quiz_session_id=v.id,x.total_points_earned=v.total_points,x.max_points_possible=v.max_points,x.total_questions_answered=Array.isArray(v.questions)?v.questions.length:0,x.total_time_spent_minutes=v.total_actual_time_spent_seconds?Math.round(v.total_actual_time_spent_seconds/60):0)}catch(v){console.warn("⚠️ Could not fetch quiz session data for assignment:",y.id,v)}p.push(x)}console.log("✅ useStudyScheduleAnalysisData: Transformed assignments:",p.length),i(p)}catch(f){console.error("❌ useStudyScheduleAnalysisData: Error fetching study schedule data:",f),u(f.message||"Failed to load study schedule data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function bI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useQuestionPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useQuestionPerformanceData: Starting question performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log("🔍 useQuestionPerformanceData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),f=f.lt("completed_at",_.toISOString())}const{data:m,error:h}=await f;if(h)throw h;console.log("🔍 useQuestionPerformanceData: Found completed sessions:",(m==null?void 0:m.length)||0);const p=(m==null?void 0:m.map(_=>_.id))||[];if(p.length===0){console.log("🔍 useQuestionPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}let y=V.from("quiz_question_logs").select(`
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          questions!inner (
            id,
            question,
            answer,
            book_of_bible,
            chapter,
            tier,
            points
          )
        `).in("quiz_session_id",p);if(t&&(y=y.eq("user_id",t)),r&&(y=y.gte("answered_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),y=y.lt("answered_at",_.toISOString())}const{data:x,error:v}=await y;if(v)throw v;if(console.log("🔍 useQuestionPerformanceData: Question logs fetched:",(x==null?void 0:x.length)||0),!x||x.length===0){i([]),l(!1);return}const g=new Map;x.forEach(_=>{const j=_.question_id,N=_.questions;if(!N)return;g.has(j)||g.set(j,{question:N,totalAttempts:0,correctAttempts:0,totalTimeSpent:0,totalPointsEarned:0,totalPointsPossible:0});const S=g.get(j);S.totalAttempts++,S.totalTimeSpent+=_.time_spent,S.totalPointsEarned+=_.points_earned,S.totalPointsPossible+=_.total_points_possible,_.is_correct&&S.correctAttempts++});const w=[];g.forEach((_,j)=>{const N=_.totalAttempts>0?Math.round(_.correctAttempts/_.totalAttempts*100):0,S=_.totalAttempts>0?Math.round(_.totalTimeSpent/_.totalAttempts):0;w.push({question_id:j,question_text:_.question.question,answer_text:_.question.answer,book_of_bible:_.question.book_of_bible,chapter:_.question.chapter,tier:_.question.tier,points:_.question.points,total_attempts:_.totalAttempts,correct_attempts:_.correctAttempts,incorrect_attempts:_.totalAttempts-_.correctAttempts,accuracy_rate:N,average_time_spent:S,total_points_earned:_.totalPointsEarned,total_points_possible:_.totalPointsPossible})}),w.sort((_,j)=>_.accuracy_rate-j.accuracy_rate),console.log("✅ useQuestionPerformanceData: Question performance analysis complete:",w.length,"questions analyzed"),i(w)}catch(f){console.error("❌ Error fetching question performance data:",f),u(f.message||"Failed to load question performance data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function wI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useEngagementData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useEngagementData: Starting engagement analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=n||new Date,m=r||(()=>{const S=new Date(f);return S.setDate(S.getDate()-30),S})();let h=V.from("quiz_sessions").select("id, completed_at, total_actual_time_spent_seconds").eq("team_id",e).eq("status","completed").gte("completed_at",m.toISOString()).lte("completed_at",f.toISOString());t&&(console.log("🔍 useEngagementData: Filtering by userId:",t),h=h.eq("user_id",t));const{data:p,error:y}=await h;if(y)throw y;console.log("🔍 useEngagementData: Found completed sessions:",(p==null?void 0:p.length)||0);const x=(p==null?void 0:p.map(S=>S.id))||[];let v=[];if(x.length>0){let S=V.from("quiz_question_logs").select("answered_at, time_spent").in("quiz_session_id",x).gte("answered_at",m.toISOString()).lte("answered_at",f.toISOString());t&&(S=S.eq("user_id",t));const{data:P,error:C}=await S;if(C)throw C;v=P||[]}console.log("🔍 useEngagementData: Question logs fetched:",v.length);const g=new Map;p==null||p.forEach(S=>{const P=new Date(S.completed_at),C=P.toISOString().split("T")[0];g.has(C)||g.set(C,{date:C,dateObj:P,quizzesCompleted:0,questionsAnswered:0,timeSpentMinutes:0,sessionTimes:[]});const I=g.get(C);I.quizzesCompleted++;const T=S.total_actual_time_spent_seconds?Math.round(S.total_actual_time_spent_seconds/60):0;I.timeSpentMinutes+=T,I.sessionTimes.push(T)}),v.forEach(S=>{const C=new Date(S.answered_at).toISOString().split("T")[0];if(g.has(C)){const I=g.get(C);I.questionsAnswered++}});const w=[],_=Array.from(g.keys()).sort();let j=0,N=new Date(f);N.setDate(N.getDate()+1),_.forEach((S,P)=>{const C=g.get(S),I=C.sessionTimes.length>0?Math.round(C.sessionTimes.reduce((z,q)=>z+q,0)/C.sessionTimes.length):0,T=new Date(S),D=new Date(N);D.setDate(D.getDate()-1),C.quizzesCompleted>0?(T.toDateString()===D.toDateString()?j++:j=1,N=T):j=0,w.push({date:S,dateObj:C.dateObj,quizzesCompleted:C.quizzesCompleted,questionsAnswered:C.questionsAnswered,timeSpentMinutes:C.timeSpentMinutes,averageSessionTime:I,studyStreak:j})}),w.sort((S,P)=>P.dateObj.getTime()-S.dateObj.getTime()),console.log("✅ useEngagementData: Engagement analysis complete:",w.length,"data points"),i(w)}catch(f){console.error("❌ Error fetching engagement data:",f),u(f.message||"Failed to load engagement data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function jI(e,t,r,n=12){const s=r||new Date;t||(()=>{const l=new Date(s);return e==="weekly"?l.setDate(l.getDate()-n*7):l.setMonth(l.getMonth()-n),l})();const i=[];let o=n;if(t&&r){const l=r.getTime()-t.getTime();e==="weekly"?o=Math.ceil(l/(7*24*60*60*1e3)):o=Math.ceil(l/(30*24*60*60*1e3)),o=Math.min(Math.max(o,1),24)}for(let l=o-1;l>=0;l--){let c,u,d;if(e==="weekly"){const f=new Date(s);f.setDate(s.getDate()-(s.getDay()+l*7)),f.setHours(0,0,0,0);const m=new Date(f);m.setDate(f.getDate()+6),m.setHours(23,59,59,999),c=f,u=m,d=`Week of ${f.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const f=new Date(s.getFullYear(),s.getMonth()-l,1),m=new Date(s.getFullYear(),s.getMonth()-l+1,0,23,59,59,999);c=f,u=m,d=f.toLocaleDateString("en-US",{month:"short",year:"numeric"})}t&&u<t||r&&c>r||i.push({start:c,end:u,label:d})}return i}async function qS(e){let t=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes, user_id").eq("team_id",e.teamId).eq("status","completed");if(e.userId&&(t=t.eq("user_id",e.userId)),e.startDate&&(t=t.gte("completed_at",e.startDate.toISOString())),e.endDate){const r=new Date(e.endDate);r.setDate(r.getDate()+1),t=t.lt("completed_at",r.toISOString())}return await t}async function FS(e,t,r=!1){if(e.length===0)return{data:[],error:null};const n=r?`points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id,
       questions!inner (book_of_bible, chapter, tier, question, answer, points)`:"points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id";let s=V.from("quiz_question_logs").select(n).in("quiz_session_id",e);if(t.userId&&(s=s.eq("user_id",t.userId)),t.startDate&&(s=s.gte("answered_at",t.startDate.toISOString())),t.endDate){const i=new Date(t.endDate);i.setDate(i.getDate()+1),s=s.lt("answered_at",i.toISOString())}return await s}function _I(e,t){return t>0?e/t*100:0}function NI(e,t=[]){let r=Math.round(e/60);if(e<30&&t.length>0){const n=t.reduce((s,i)=>s+(i.total_actual_time_spent_seconds||0),0);r=Math.round(n/60)}return r}function Ob(e){return new Set(e).size}function US(e,t){return console.error(`❌ ${t}:`,e),e.message||`Failed to load ${t.toLowerCase()}`}function Wa(e,t,r){console.log(`🔍 ${e}:`,t)}function SI({teamId:e,timeframe:t="weekly",startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useTeamPerformanceTrendsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useTeamPerformanceTrendsData: Starting team performance trends analysis with params:",{teamId:e,timeframe:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=jI(t,r,n);Wa("useTeamPerformanceTrendsData: Analyzing periods",{periodsCount:f.length,timeframe:t});const m=[],h={teamId:e,startDate:r,endDate:n};for(const p of f){Wa(`Processing period: ${p.label}`,{period:p});const y={...h,startDate:p.start,endDate:p.end},{data:x,error:v}=await qS(y);if(v)throw v;const g=(x==null?void 0:x.map(L=>L.id))||[],{data:w,error:_}=await FS(g,y);if(_)throw _;const j=(x==null?void 0:x.length)||0,N=(w==null?void 0:w.length)||0;let S=0,P=0,C=0;(w||[]).forEach(L=>{S+=L.points_earned,P+=L.total_points_possible,C+=L.time_spent});const I=_I(S,P),T=NI(C,x||[]),D=Ob((x||[]).map(L=>new Date(L.completed_at).toDateString())),z=Ob((x||[]).map(L=>L.user_id)),q={period:p.label,periodStart:p.start,periodEnd:p.end,totalQuizzesCompleted:j,totalQuestionsAnswered:N,totalPointsEarned:S,totalPossiblePoints:P,averageScore:I,totalTimeSpentMinutes:T,activeDays:D,activeMembers:z};m.push(q)}Wa("useTeamPerformanceTrendsData: Analysis complete",{dataPointsCount:m.length}),i(m)}catch(f){u(US(f,"useTeamPerformanceTrendsData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function kI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useBookChapterPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useBookChapterPerformanceData: Starting book/chapter performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f={teamId:e,userId:t,startDate:r,endDate:n},{data:m,error:h}=await qS(f);if(h)throw h;Wa("useBookChapterPerformanceData: Sessions fetched",{sessionsCount:(m==null?void 0:m.length)||0});const p=(m==null?void 0:m.map(w=>w.id))||[];if(p.length===0){console.log("🔍 useBookChapterPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}const{data:y,error:x}=await FS(p,f,!0);if(x)throw x;if(Wa("useBookChapterPerformanceData: Question logs fetched",{logsCount:(y==null?void 0:y.length)||0}),!y||y.length===0){i([]),l(!1);return}const v=new Map;y.forEach(w=>{const _=w.questions;if(!_)return;const j=`${_.book_of_bible}:${_.chapter}`;v.has(j)||v.set(j,{book_of_bible:_.book_of_bible,chapter:_.chapter,total_attempts:0,correct_attempts:0,total_time_spent:0,total_points_earned:0,total_points_possible:0});const N=v.get(j);N.total_attempts++,N.total_time_spent+=w.time_spent,N.total_points_earned+=w.points_earned,N.total_points_possible+=w.total_points_possible,w.is_correct&&N.correct_attempts++});const g=[];v.forEach(w=>{const _=w.total_attempts>0?Math.round(w.correct_attempts/w.total_attempts*100):0,j=w.total_attempts>0?Math.round(w.total_time_spent/w.total_attempts):0,N=w.total_points_possible>0?Math.round(w.total_points_earned/w.total_points_possible*100):0;g.push({book_of_bible:w.book_of_bible,chapter:w.chapter,total_attempts:w.total_attempts,correct_attempts:w.correct_attempts,incorrect_attempts:w.total_attempts-w.correct_attempts,accuracy_rate:_,average_time_spent:j,total_points_earned:w.total_points_earned,total_points_possible:w.total_points_possible,points_efficiency:N})}),g.sort((w,_)=>w.accuracy_rate-_.accuracy_rate),Wa("useBookChapterPerformanceData: Analysis complete",{dataPointsCount:g.length}),i(g)}catch(f){u(US(f,"useBookChapterPerformanceData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}const BS=b.createContext(void 0);function PI({children:e,value:t}){return a.jsx(BS.Provider,{value:t,children:e})}function hi(){const e=b.useContext(BS);if(e===void 0)throw new Error("useAnalyticsContext must be used within an AnalyticsProvider");return e}function Up({teamMembers:e,selectedMemberId:t,onSelectMember:r,selectedMemberInfo:n,disabled:s=!1,includeAllTeamOption:i=!1}){var o,l;return e.length===0&&!i?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to manage study schedules."})]})}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:s?`${n==null?void 0:n.user.name}'s Study Schedule`:"Viewing Performance For:"}),s?a.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-base font-medium text-gray-900 min-w-64 capitalize",children:[n==null?void 0:n.role," Access"]}):a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:t===void 0?"":t,onChange:c=>r(c.target.value===""?void 0:c.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 text-base font-medium text-gray-900 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 w-full sm:min-w-64",disabled:s,children:[i&&a.jsx("option",{value:"",children:"All Team"}),t&&e.find(c=>c.userId===t)&&a.jsxs("option",{value:t,children:[(o=e.find(c=>c.userId===t))==null?void 0:o.user.name," (",(l=e.find(c=>c.userId===t))==null?void 0:l.role,")"]},t),e.filter(c=>c.role==="member"&&c.userId!==t).map(c=>a.jsxs("option",{value:c.userId,children:[c.user.name," (",c.role,")"]},c.userId))]}),a.jsx(iM,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]})})})}function QS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=QS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ne(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=QS(e))&&(n&&(n+=" "),n+=t);return n}var vf={},VS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(VS);var J0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(J0);var Z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Z0);var bf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const u=r[i];l?u==="\\"&&i+1<s?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(bf);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VS,r=J0,n=Z0,s=bf;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(vf);var EI=vf.get;const Xi=Qn(EI);var WS={exports:{}},Ie={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=Symbol.for("react.transitional.element"),tx=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Nf=Symbol.for("react.consumer"),Sf=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Af=Symbol.for("react.lazy"),CI=Symbol.for("react.view_transition"),AI=Symbol.for("react.client.reference");function on(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ex:switch(e=e.type,e){case wf:case _f:case jf:case Pf:case Ef:case CI:return e;default:switch(e=e&&e.$$typeof,e){case Sf:case kf:case Af:case Cf:return e;case Nf:return e;default:return t}}case tx:return t}}}Ie.ContextConsumer=Nf;Ie.ContextProvider=Sf;Ie.Element=ex;Ie.ForwardRef=kf;Ie.Fragment=wf;Ie.Lazy=Af;Ie.Memo=Cf;Ie.Portal=tx;Ie.Profiler=_f;Ie.StrictMode=jf;Ie.Suspense=Pf;Ie.SuspenseList=Ef;Ie.isContextConsumer=function(e){return on(e)===Nf};Ie.isContextProvider=function(e){return on(e)===Sf};Ie.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ex};Ie.isForwardRef=function(e){return on(e)===kf};Ie.isFragment=function(e){return on(e)===wf};Ie.isLazy=function(e){return on(e)===Af};Ie.isMemo=function(e){return on(e)===Cf};Ie.isPortal=function(e){return on(e)===tx};Ie.isProfiler=function(e){return on(e)===_f};Ie.isStrictMode=function(e){return on(e)===jf};Ie.isSuspense=function(e){return on(e)===Pf};Ie.isSuspenseList=function(e){return on(e)===Ef};Ie.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wf||e===_f||e===jf||e===Pf||e===Ef||typeof e=="object"&&e!==null&&(e.$$typeof===Af||e.$$typeof===Cf||e.$$typeof===Sf||e.$$typeof===Nf||e.$$typeof===kf||e.$$typeof===AI||e.getModuleId!==void 0)};Ie.typeOf=on;WS.exports=Ie;var TI=WS.exports,pr=e=>e===0?0:e>0?1:-1,Dr=e=>typeof e=="number"&&e!=+e,Ti=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ae=e=>(typeof e=="number"||e instanceof Number)&&!Dr(e),Fn=e=>ae(e)||typeof e=="string",OI=0,co=e=>{var t=++OI;return"".concat(e||"").concat(t)},kn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ae(t)&&typeof t!="string")return n;var i;if(Ti(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Dr(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},KS=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},gn=(e,t)=>ae(e)&&ae(t)?r=>e+r*(t-e):()=>t;function HS(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Xi(n,t))===r)}var Me=e=>e===null||typeof e>"u",bc=e=>Me(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),DI=["viewBox","children"],MI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Db=["points","pathLength"],im={svg:DI,polygon:Db,polyline:Db},rx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],nx=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{rx.includes(s)&&(n[s]=i=>r[s](r,i))}),n},II=(e,t,r)=>n=>(e(t,r,n),null),sx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];rx.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=II(i,t,r))}),n},Mb=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Ib=null,am=null,GS=e=>{if(e===Ib&&Array.isArray(am))return am;var t=[];return b.Children.forEach(e,r=>{Me(r)||(TI.isFragment(r)?t=t.concat(GS(r.props.children)):t.push(r))}),am=t,Ib=e,t};function ix(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>Mb(s)):n=[Mb(t)],GS(e).forEach(s=>{var i=Xi(s,"type.displayName")||Xi(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var YS=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,$I=(e,t,r,n)=>{var s,i=(s=n&&(im==null?void 0:im[n]))!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||MI.includes(t))||r&&rx.includes(t)},Pe=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;$I((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},zI=["children","width","height","viewBox","className","style","title","desc"];function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bp.apply(null,arguments)}function LI(e,t){if(e==null)return{};var r,n,s=RI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XS=b.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=LI(e,zI),f=i||{width:n,height:s,x:0,y:0},m=Ne("recharts-surface",o);return b.createElement("svg",Bp({},Pe(d,!0,"svg"),{className:m,width:n,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,c),b.createElement("desc",null,u),r)}),qI=["children","className"];function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qp.apply(null,arguments)}function FI(e,t){if(e==null)return{};var r,n,s=UI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mr=b.forwardRef((e,t)=>{var{children:r,className:n}=e,s=FI(e,qI),i=Ne("recharts-layer",n);return b.createElement("g",Qp({className:i},Pe(s,!0),{ref:t}),r)}),BI=b.createContext(null);function ze(e){return function(){return e}}const JS=Math.cos,ld=Math.sin,En=Math.sqrt,cd=Math.PI,Tf=2*cd,Vp=Math.PI,Wp=2*Vp,_i=1e-6,QI=Wp-_i;function ZS(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function VI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ZS;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class WI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ZS:VI(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>_i)if(!(Math.abs(f*c-u*d)>_i)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,p=s-l,y=c*c+u*u,x=h*h+p*p,v=Math.sqrt(y),g=Math.sqrt(m),w=i*Math.tan((Vp-Math.acos((y+m-x)/(2*v*g)))/2),_=w/g,j=w/v;Math.abs(_-1)>_i&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*h>d*p)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,f=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>_i||Math.abs(this._y1-d)>_i)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%Wp+Wp),m>QI?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>_i&&this._append`A${n},${n},0,${+(m>=Vp)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ax(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new WI(t)}function ox(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function e2(e){this._context=e}e2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Of(e){return new e2(e)}function t2(e){return e[0]}function r2(e){return e[1]}function n2(e,t){var r=ze(!0),n=null,s=Of,i=null,o=ax(l);e=typeof e=="function"?e:e===void 0?t2:ze(e),t=typeof t=="function"?t:t===void 0?r2:ze(t);function l(c){var u,d=(c=ox(c)).length,f,m=!1,h;for(n==null&&(i=s(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ze(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ze(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ze(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function ru(e,t,r){var n=null,s=ze(!0),i=null,o=Of,l=null,c=ax(u);e=typeof e=="function"?e:e===void 0?t2:ze(+e),t=typeof t=="function"?t:ze(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?r2:ze(+r);function u(f){var m,h,p,y=(f=ox(f)).length,x,v=!1,g,w=new Array(y),_=new Array(y);for(i==null&&(l=o(g=c())),m=0;m<=y;++m){if(!(m<y&&s(x=f[m],m,f))===v)if(v=!v)h=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=m-1;p>=h;--p)l.point(w[p],_[p]);l.lineEnd(),l.areaEnd()}v&&(w[m]=+e(x,m,f),_[m]=+t(x,m,f),l.point(n?+n(x,m,f):w[m],r?+r(x,m,f):_[m]))}if(g)return l=null,g+""||null}function d(){return n2().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ze(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ze(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ze(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ze(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:ze(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class s2{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function KI(e){return new s2(e,!0)}function HI(e){return new s2(e,!1)}const lx={draw(e,t){const r=En(t/cd);e.moveTo(r,0),e.arc(0,0,r,0,Tf)}},GI={draw(e,t){const r=En(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},i2=En(1/3),YI=i2*2,XI={draw(e,t){const r=En(t/YI),n=r*i2;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},JI={draw(e,t){const r=En(t),n=-r/2;e.rect(n,n,r,r)}},ZI=.8908130915292852,a2=ld(cd/10)/ld(7*cd/10),e$=ld(Tf/10)*a2,t$=-JS(Tf/10)*a2,r$={draw(e,t){const r=En(t*ZI),n=e$*r,s=t$*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Tf*i/5,l=JS(o),c=ld(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},om=En(3),n$={draw(e,t){const r=-En(t/(om*3));e.moveTo(0,r*2),e.lineTo(-om*r,-r),e.lineTo(om*r,-r),e.closePath()}},qr=-.5,Fr=En(3)/2,Kp=1/En(12),s$=(Kp/2+1)*3,i$={draw(e,t){const r=En(t/s$),n=r/2,s=r*Kp,i=n,o=r*Kp+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(qr*n-Fr*s,Fr*n+qr*s),e.lineTo(qr*i-Fr*o,Fr*i+qr*o),e.lineTo(qr*l-Fr*c,Fr*l+qr*c),e.lineTo(qr*n+Fr*s,qr*s-Fr*n),e.lineTo(qr*i+Fr*o,qr*o-Fr*i),e.lineTo(qr*l+Fr*c,qr*c-Fr*l),e.closePath()}};function a$(e,t){let r=null,n=ax(s);e=typeof e=="function"?e:ze(e||lx),t=typeof t=="function"?t:ze(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:ze(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:ze(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function ud(){}function dd(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function o2(e){this._context=e}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function o$(e){return new o2(e)}function l2(e){this._context=e}l2.prototype={areaStart:ud,areaEnd:ud,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l$(e){return new l2(e)}function c2(e){this._context=e}c2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c$(e){return new c2(e)}function u2(e){this._context=e}u2.prototype={areaStart:ud,areaEnd:ud,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function u$(e){return new u2(e)}function $b(e){return e<0?-1:1}function zb(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return($b(i)+$b(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Lb(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function lm(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function fd(e){this._context=e}fd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lm(this,this._t0,Lb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lm(this,Lb(this,r=zb(this,e,t)),r);break;default:lm(this,this._t0,r=zb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function d2(e){this._context=new f2(e)}(d2.prototype=Object.create(fd.prototype)).point=function(e,t){fd.prototype.point.call(this,t,e)};function f2(e){this._context=e}f2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function d$(e){return new fd(e)}function f$(e){return new d2(e)}function h2(e){this._context=e}h2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Rb(e),s=Rb(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rb(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function h$(e){return new h2(e)}function Df(e,t){this._context=e,this._t=t}Df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function m$(e){return new Df(e,.5)}function p$(e){return new Df(e,0)}function g$(e){return new Df(e,1)}function uo(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Hp(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function x$(e,t){return e[t]}function y$(e){const t=[];return t.key=e,t}function v$(){var e=ze([]),t=Hp,r=uo,n=x$;function s(i){var o=Array.from(e.apply(this,arguments),y$),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=ox(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ze(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:ze(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Hp:typeof i=="function"?i:ze(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??uo,s):r},s}function b$(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}uo(e,t)}}function w$(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}uo(e,t)}}function j$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,p=0;p<l;++p){var y=e[t[p]],x=y[n][1]||0,v=y[n-1][1]||0;h+=x-v}c+=f,u+=h*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,uo(e,t)}}var _$=["type","size","sizeType"];function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gp.apply(null,arguments)}function qb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qb(Object(r),!0).forEach(function(n){N$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N$(e,t,r){return(t=S$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S$(e){var t=k$(e,"string");return typeof t=="symbol"?t:t+""}function k$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P$(e,t){if(e==null)return{};var r,n,s=E$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function E$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var m2={symbolCircle:lx,symbolCross:GI,symbolDiamond:XI,symbolSquare:JI,symbolStar:r$,symbolTriangle:n$,symbolWye:i$},C$=Math.PI/180,A$=e=>{var t="symbol".concat(bc(e));return m2[t]||lx},T$=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*C$;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},O$=(e,t)=>{m2["symbol".concat(bc(e))]=t},p2=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=P$(e,_$),i=Fb(Fb({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var f=A$(t),m=a$().type(f).size(T$(r,n,t));return m()},{className:l,cx:c,cy:u}=i,d=Pe(i,!0);return c===+c&&u===+u&&r===+r?b.createElement("path",Gp({},d,{className:Ne("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};p2.registerSymbol=O$;var g2={},x2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(x2);var cx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(cx);var y2={},Mf={},v2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(v2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v2;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Mf);var b2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(b2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mf,r=b2;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(y2);var w2={},j2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vf;function r(n){return function(s){return t.get(s,n)}}e.property=r})(j2);var _2={},cm={},um={},ux={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ux);var dx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(dx);var If={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(If);var Ub;function D$(){return Ub||(Ub=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=ux,n=dx,s=If;function i(f,m,h){return typeof h!="function"?t.isMatch(f,m):o(f,m,function p(y,x,v,g,w,_){const j=h(y,x,v,g,w,_);return j!==void 0?!!j:o(y,x,p,_)},new Map)}function o(f,m,h,p){if(m===f)return!0;switch(typeof m){case"object":return l(f,m,h,p);case"function":return Object.keys(m).length>0?o(f,{...m},h,p):s.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:s.eq(f,m)}}function l(f,m,h,p){if(m==null)return!0;if(Array.isArray(m))return u(f,m,h,p);if(m instanceof Map)return c(f,m,h,p);if(m instanceof Set)return d(f,m,h,p);const y=Object.keys(m);if(f==null)return y.length===0;if(y.length===0)return!0;if(p&&p.has(m))return p.get(m)===f;p&&p.set(m,f);try{for(let x=0;x<y.length;x++){const v=y[x];if(!n.isPrimitive(f)&&!(v in f)||m[v]===void 0&&f[v]!==void 0||m[v]===null&&f[v]!==null||!h(f[v],m[v],v,f,m,p))return!1}return!0}finally{p&&p.delete(m)}}function c(f,m,h,p){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,x]of m.entries()){const v=f.get(y);if(h(v,x,y,f,m,p)===!1)return!1}return!0}function u(f,m,h,p){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let x=0;x<m.length;x++){const v=m[x];let g=!1;for(let w=0;w<f.length;w++){if(y.has(w))continue;const _=f[w];let j=!1;if(h(_,v,x,f,m,p)&&(j=!0),j){y.add(w),g=!0;break}}if(!g)return!1}return!0}function d(f,m,h,p){return m.size===0?!0:f instanceof Set?u([...f],[...m],h,p):!1}e.isMatchWith=i,e.isSetMatch=d}(um)),um}var Bb;function fx(){return Bb||(Bb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D$();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(cm)),cm}var N2={},hx={},mx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(mx);var $f={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})($f);var zf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",h="[object Object]",p="[object Error]",y="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",g="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",P="[object BigInt64Array]",C="[object Float32Array]",I="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=y,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=C,e.float64ArrayTag=I,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=S,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=g,e.uint32ArrayTag=w,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=v})(zf);var S2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(S2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx,r=$f,n=zf,s=dx,i=S2;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,m,h=new Map,p=void 0){const y=p==null?void 0:p(d,f,m,h);if(y!=null)return y;if(s.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const x=new Array(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,m,h,p);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;h.set(d,x);for(const[v,g]of d)x.set(v,l(g,v,m,h,p));return x}if(d instanceof Set){const x=new Set;h.set(d,x);for(const v of d)x.add(l(v,void 0,m,h,p));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,m,h,p);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,x),c(x,d,m,h,p),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return h.set(d,x),c(x,d,m,h,p),x}if(d instanceof Blob){const x=new Blob([d],{type:d.type});return h.set(d,x),c(x,d,m,h,p),x}if(d instanceof Error){const x=new d.constructor;return h.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,m,h,p),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return h.set(d,x),c(x,d,m,h,p),x}return d}function c(d,f,m=d,h,p){const y=[...Object.keys(f),...t.getSymbols(f)];for(let x=0;x<y.length;x++){const v=y[x],g=Object.getOwnPropertyDescriptor(d,v);(g==null||g.writable)&&(d[v]=l(f[v],v,m,h,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(hx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(N2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=N2;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(_2);var k2={},P2={},E2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx,r=zf;function n(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(E2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E2;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(P2);var C2={},px={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(px);var A2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$f;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(A2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J0,r=px,n=A2,s=bf;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(C2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx(),r=Z0,n=P2,s=vf,i=C2;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(k2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx,r=j2,n=_2,s=k2;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(w2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x2,r=cx,n=y2,s=w2;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(g2);var M$=g2.uniqBy;const Qb=Qn(M$);function I$(e,t,r){return t===!0?Qb(e,r):typeof t=="function"?Qb(e,t):e}var T2={exports:{}},O2={},D2={exports:{}},M2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=b;function $$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z$=typeof Object.is=="function"?Object.is:$$,L$=fo.useState,R$=fo.useEffect,q$=fo.useLayoutEffect,F$=fo.useDebugValue;function U$(e,t){var r=t(),n=L$({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return q$(function(){s.value=r,s.getSnapshot=t,dm(s)&&i({inst:s})},[e,r,t]),R$(function(){return dm(s)&&i({inst:s}),e(function(){dm(s)&&i({inst:s})})},[e]),F$(r),r}function dm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!z$(e,r)}catch{return!0}}function B$(e,t){return t()}var Q$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?B$:U$;M2.useSyncExternalStore=fo.useSyncExternalStore!==void 0?fo.useSyncExternalStore:Q$;D2.exports=M2;var V$=D2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=b,W$=V$;function K$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var H$=typeof Object.is=="function"?Object.is:K$,G$=W$.useSyncExternalStore,Y$=Lf.useRef,X$=Lf.useEffect,J$=Lf.useMemo,Z$=Lf.useDebugValue;O2.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=Y$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=J$(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return f=p}return f=h}if(p=f,H$(d,h))return p;var y=n(h);return s!==void 0&&s(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=G$(e,i[0],i[1]);return X$(function(){o.hasValue=!0,o.value=l},[l]),Z$(l),l};T2.exports=O2;var e3=T2.exports,gx=b.createContext(null),t3=e=>e,yt=()=>{var e=b.useContext(gx);return e?e.store.dispatch:t3},Cu=()=>{},r3=()=>Cu,n3=(e,t)=>e===t;function ue(e){var t=b.useContext(gx);return e3.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:r3,t?t.store.getState:Cu,t?t.store.getState:Cu,t?e:Cu,n3)}function s3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function i3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function a3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Vb=e=>Array.isArray(e)?e:[e];function o3(e){const t=Array.isArray(e[0])?e[0]:e;return a3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function l3(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var c3=class{constructor(e){this.value=e}deref(){return this.value}},u3=typeof WeakRef<"u"?WeakRef:c3,d3=0,Wb=1;function nu(){return{s:d3,v:void 0,o:null,p:null}}function I2(e,t={}){let r=nu();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let m=0,h=c;m<h;m++){const p=arguments[m];if(typeof p=="function"||typeof p=="object"&&p!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const x=y.get(p);x===void 0?(l=nu(),y.set(p,l)):l=x}else{let y=l.p;y===null&&(l.p=y=new Map);const x=y.get(p);x===void 0?(l=nu(),y.set(p,l)):l=x}}const u=l;let d;if(l.s===Wb)d=l.v;else if(d=e.apply(null,arguments),i++,n){const m=((f=s==null?void 0:s.deref)==null?void 0:f.call(s))??s;m!=null&&n(m,d)&&(d=m,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new u3(d):d}return u.s=Wb,u.v=d,d}return o.clearCache=()=>{r=nu(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function f3(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),s3(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:m=[],argsMemoize:h=I2,argsMemoizeOptions:p=[],devModeChecks:y={}}=d,x=Vb(m),v=Vb(p),g=o3(s),w=f(function(){return i++,u.apply(null,arguments)},...x),_=h(function(){o++;const N=l3(g,arguments);return l=w.apply(null,N),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var K=f3(I2),h3=Object.assign((e,t=K)=>{i3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>h3}),$2={},z2={},L2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(L2);var R2={},xx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(xx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xx,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(R2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L2,r=R2,n=bf;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,p)=>{let y=h;for(let x=0;x<p.length&&y!=null;++x)y=y[p[x]];return y},d=(h,p)=>p==null||h==null?p:typeof h=="object"&&"key"in h?Object.hasOwn(p,h.key)?p[h.key]:u(p,h.path):typeof h=="function"?h(p):Array.isArray(h)?u(p,h):typeof p=="object"?p[h]:p,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(p=>d(p,h))})).slice().sort((h,p)=>{for(let y=0;y<f.length;y++){const x=t.compareValues(h.criteria[y],p.criteria[y],l[y]);if(x!==0)return x}return 0}).map(h=>h.original)}e.orderBy=s})(z2);var q2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}e.flatten=t})(q2);var yx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=px,r=Mf,n=ux,s=If;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(yx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z2,r=q2,n=yx;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})($2);var m3=$2.sortBy;const Rf=Qn(m3);var F2=e=>e.legend.settings,p3=e=>e.legend.size,g3=e=>e.legend.payload;K([g3,F2],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Rf(n,r):n});var su=1;function x3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),n=b.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>su||Math.abs(o.left-t.left)>su||Math.abs(o.top-t.top)>su||Math.abs(o.width-t.width)>su)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function At(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var y3=typeof Symbol=="function"&&Symbol.observable||"@@observable",Kb=y3,fm=()=>Math.random().toString(36).substring(7).split("").join("."),v3={INIT:`@@redux/INIT${fm()}`,REPLACE:`@@redux/REPLACE${fm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fm()}`},hd=v3;function vx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function U2(e,t,r){if(typeof e!="function")throw new Error(At(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(At(1));return r(U2)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((x,v)=>{o.set(v,x)}))}function d(){if(c)throw new Error(At(3));return s}function f(x){if(typeof x!="function")throw new Error(At(4));if(c)throw new Error(At(5));let v=!0;u();const g=l++;return o.set(g,x),function(){if(v){if(c)throw new Error(At(6));v=!1,u(),o.delete(g),i=null}}}function m(x){if(!vx(x))throw new Error(At(7));if(typeof x.type>"u")throw new Error(At(8));if(typeof x.type!="string")throw new Error(At(17));if(c)throw new Error(At(9));try{c=!0,s=n(s,x)}finally{c=!1}return(i=o).forEach(g=>{g()}),x}function h(x){if(typeof x!="function")throw new Error(At(10));n=x,m({type:hd.REPLACE})}function p(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(At(11));function g(){const _=v;_.next&&_.next(d())}return g(),{unsubscribe:x(g)}},[Kb](){return this}}}return m({type:hd.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:h,[Kb]:p}}function b3(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hd.INIT})>"u")throw new Error(At(12));if(typeof r(void 0,{type:hd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function B2(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{b3(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],h=o[f],p=m(h,l);if(typeof p>"u")throw l&&l.type,new Error(At(14));u[f]=p,c=c||p!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function md(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function w3(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(At(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=md(...l)(s.dispatch),{...s,dispatch:i}}}function Q2(e){return vx(e)&&"type"in e&&typeof e.type=="string"}var V2=Symbol.for("immer-nothing"),Hb=Symbol.for("immer-draftable"),Ir=Symbol.for("immer-state");function bn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ho=Object.getPrototypeOf;function Ji(e){return!!e&&!!e[Ir]}function ms(e){var t;return e?W2(e)||Array.isArray(e)||!!e[Hb]||!!((t=e.constructor)!=null&&t[Hb])||Ff(e)||Uf(e):!1}var j3=Object.prototype.constructor.toString();function W2(e){if(!e||typeof e!="object")return!1;const t=ho(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===j3}function pd(e,t){qf(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function qf(e){const t=e[Ir];return t?t.type_:Array.isArray(e)?1:Ff(e)?2:Uf(e)?3:0}function Yp(e,t){return qf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K2(e,t,r){const n=qf(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function _3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ff(e){return e instanceof Map}function Uf(e){return e instanceof Set}function Ni(e){return e.copy_||e.base_}function Xp(e,t){if(Ff(e))return new Map(e);if(Uf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=W2(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ir];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(ho(e),n)}else{const n=ho(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function bx(e,t=!1){return Bf(e)||Ji(e)||!ms(e)||(qf(e)>1&&(e.set=e.add=e.clear=e.delete=N3),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>bx(n,!0))),e}function N3(){bn(2)}function Bf(e){return Object.isFrozen(e)}var S3={};function Zi(e){const t=S3[e];return t||bn(0,e),t}var Xl;function H2(){return Xl}function k3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gb(e,t){t&&(Zi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jp(e){Zp(e),e.drafts_.forEach(P3),e.drafts_=null}function Zp(e){e===Xl&&(Xl=e.parent_)}function Yb(e){return Xl=k3(Xl,e)}function P3(e){const t=e[Ir];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Xb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ir].modified_&&(Jp(t),bn(4)),ms(e)&&(e=gd(t,e),t.parent_||xd(t,e)),t.patches_&&Zi("Patches").generateReplacementPatches_(r[Ir].base_,e,t.patches_,t.inversePatches_)):e=gd(t,r,[]),Jp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==V2?e:void 0}function gd(e,t,r){if(Bf(t))return t;const n=t[Ir];if(!n)return pd(t,(s,i)=>Jb(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return xd(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),pd(i,(l,c)=>Jb(e,n,s,l,c,r,o)),xd(e,s,!1),r&&e.patches_&&Zi("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Jb(e,t,r,n,s,i,o){if(Ji(s)){const l=i&&t&&t.type_!==3&&!Yp(t.assigned_,n)?i.concat(n):void 0,c=gd(e,s,l);if(K2(r,n,c),Ji(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(ms(s)&&!Bf(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gd(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&xd(e,s)}}function xd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bx(t,r)}function E3(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:H2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=wx;r&&(s=[n],i=Jl);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var wx={get(e,t){if(t===Ir)return e;const r=Ni(e);if(!Yp(r,t))return C3(e,r,t);const n=r[t];return e.finalized_||!ms(n)?n:n===hm(e.base_,t)?(mm(e),e.copy_[t]=tg(n,e)):n},has(e,t){return t in Ni(e)},ownKeys(e){return Reflect.ownKeys(Ni(e))},set(e,t,r){const n=G2(Ni(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=hm(Ni(e),t),i=s==null?void 0:s[Ir];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(_3(r,s)&&(r!==void 0||Yp(e.base_,t)))return!0;mm(e),eg(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return hm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mm(e),eg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ni(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){bn(11)},getPrototypeOf(e){return ho(e.base_)},setPrototypeOf(){bn(12)}},Jl={};pd(wx,(e,t)=>{Jl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jl.deleteProperty=function(e,t){return Jl.set.call(this,e,t,void 0)};Jl.set=function(e,t,r){return wx.set.call(this,e[0],t,r,e[0])};function hm(e,t){const r=e[Ir];return(r?Ni(r):e)[t]}function C3(e,t,r){var s;const n=G2(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function G2(e,t){if(!(t in e))return;let r=ho(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ho(r)}}function eg(e){e.modified_||(e.modified_=!0,e.parent_&&eg(e.parent_))}function mm(e){e.copy_||(e.copy_=Xp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var A3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&bn(6),n!==void 0&&typeof n!="function"&&bn(7);let s;if(ms(t)){const i=Yb(this),o=tg(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Jp(i):Zp(i)}return Gb(i,n),Xb(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===V2&&(s=void 0),this.autoFreeze_&&bx(s,!0),n){const i=[],o=[];Zi("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else bn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ms(e)||bn(8),Ji(e)&&(e=os(e));const t=Yb(this),r=tg(e,void 0);return r[Ir].isManual_=!0,Zp(t),r}finishDraft(e,t){const r=e&&e[Ir];(!r||!r.isManual_)&&bn(9);const{scope_:n}=r;return Gb(n,t),Xb(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Zi("Patches").applyPatches_;return Ji(e)?n(e,t):this.produce(e,s=>n(s,t))}};function tg(e,t){const r=Ff(e)?Zi("MapSet").proxyMap_(e,t):Uf(e)?Zi("MapSet").proxySet_(e,t):E3(e,t);return(t?t.scope_:H2()).drafts_.push(r),r}function os(e){return Ji(e)||bn(10,e),Y2(e)}function Y2(e){if(!ms(e)||Bf(e))return e;const t=e[Ir];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Xp(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Xp(e,!0);return pd(r,(n,s)=>{K2(r,n,Y2(s))}),t&&(t.finalized_=!1),r}var $r=new A3,X2=$r.produce;$r.produceWithPatches.bind($r);$r.setAutoFreeze.bind($r);$r.setUseStrictShallowCopy.bind($r);$r.applyPatches.bind($r);$r.createDraft.bind($r);$r.finishDraft.bind($r);function J2(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var T3=J2(),O3=J2,D3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?md:md.apply(null,arguments)};function nn(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Tr(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Q2(n)&&n.type===e,r}var Z2=class cl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,cl.prototype)}static get[Symbol.species](){return cl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new cl(...t[0].concat(this)):new cl(...t.concat(this))}};function Zb(e){return ms(e)?X2(e,()=>{}):e}function iu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function M3(e){return typeof e=="boolean"}var I3=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new Z2;return r&&(M3(r)?o.push(T3):o.push(O3(r.extraArgument))),o},$3="RTK_autoBatch",ew=e=>t=>{setTimeout(t,e)},z3=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ew(10):e.type==="callback"?e.queueNotification:ew(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),m=n.subscribe(f);return l.add(d),()=>{m(),l.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[$3]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},L3=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new Z2(e);return n&&s.push(z3(typeof n=="object"?n:void 0)),s};function R3(e){const t=I3(),{reducer:r=void 0,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(vx(r))c=B2(r);else throw new Error(Tr(1));let u;typeof n=="function"?u=n(t):u=t();let d=md;s&&(d=D3({trace:!1,...typeof s=="object"&&s}));const f=w3(...u),m=L3(f);let h=typeof l=="function"?l(m):m();const p=d(...h);return U2(c,o,p)}function ek(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Tr(28));if(l in t)throw new Error(Tr(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function q3(e){return typeof e=="function"}function F3(e,t){let[r,n,s]=ek(t),i;if(q3(e))i=()=>Zb(e());else{const l=Zb(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Ji(d)){const h=f(d,c);return h===void 0?d:h}else{if(ms(d))return X2(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},l)}return o.getInitialState=i,o}var U3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",B3=(e=21)=>{let t="",r=e;for(;r--;)t+=U3[Math.random()*64|0];return t},Q3=Symbol.for("rtk-slice-createasyncthunk");function V3(e,t){return`${e}/${t}`}function W3({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Q3];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Tr(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(H3()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(Tr(12));if(N in u.sliceCaseReducersByType)throw new Error(Tr(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:V3(i,_),createNotation:typeof s.reducers=="function"};Y3(j)?J3(N,j,d,t):G3(N,j,d)});function f(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?ek(s.extraReducers):[s.extraReducers],S={..._,...u.sliceCaseReducersByType};return F3(s.initialState,P=>{for(let C in S)P.addCase(C,S[C]);for(let C of u.sliceMatchers)P.addMatcher(C.matcher,C.reducer);for(let C of j)P.addMatcher(C.matcher,C.reducer);N&&P.addDefaultCase(N)})}const m=_=>_,h=new Map,p=new WeakMap;let y;function x(_,j){return y||(y=f()),y(_,j)}function v(){return y||(y=f()),y.getInitialState()}function g(_,j=!1){function N(P){let C=P[_];return typeof C>"u"&&j&&(C=iu(p,N,v)),C}function S(P=m){const C=iu(h,j,()=>new WeakMap);return iu(C,P,()=>{const I={};for(const[T,D]of Object.entries(s.selectors??{}))I[T]=K3(D,P,()=>iu(p,P,v),j);return I})}return{reducerPath:_,getSelectors:S,get selectors(){return S(N)},selectSlice:N}}const w={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...g(o),injectInto(_,{reducerPath:j,...N}={}){const S=j??o;return _.inject({reducerPath:S,reducer:x},N),{...w,...g(S,!0)}}};return w}}function K3(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var ln=W3();function H3(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function G3({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!X3(n))throw new Error(Tr(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?nn(e,o):nn(e))}function Y3(e){return e._reducerDefinitionType==="asyncThunk"}function X3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function J3({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Tr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=s(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||au,pending:l||au,rejected:c||au,settled:u||au})}function au(){}var Z3="task",tk="listener",rk="completed",jx="cancelled",e5=`task-${jx}`,t5=`task-${rk}`,rg=`${tk}-${jx}`,r5=`${tk}-${rk}`,Qf=class{constructor(e){wh(this,"name","TaskAbortError");wh(this,"message");this.code=e,this.message=`${Z3} ${jx} (reason: ${e})`}},_x=(e,t)=>{if(typeof e!="function")throw new TypeError(Tr(32))},yd=()=>{},nk=(e,t=yd)=>(e.catch(t),e),sk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Li=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ri=e=>{if(e.aborted){const{reason:t}=e;throw new Qf(t)}};function ik(e,t){let r=yd;return new Promise((n,s)=>{const i=()=>s(new Qf(e.reason));if(e.aborted){i();return}r=sk(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=yd})}var n5=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Qf?"cancelled":"rejected",error:r}}finally{t==null||t()}},vd=e=>t=>nk(ik(e,t).then(r=>(Ri(e),r))),ak=e=>{const t=vd(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ka}=Object,tw={},Vf="listenerMiddleware",s5=(e,t)=>{const r=n=>sk(e,()=>Li(n,e.reason));return(n,s)=>{_x(n);const i=new AbortController;r(i);const o=n5(async()=>{Ri(e),Ri(i.signal);const l=await n({pause:vd(i.signal),delay:ak(i.signal),signal:i.signal});return Ri(i.signal),l},()=>Li(i,t5));return s!=null&&s.autoJoin&&t.push(o.catch(yd)),{result:vd(e)(o),cancel(){Li(i,e5)}}}},i5=(e,t)=>{const r=async(n,s)=>{Ri(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),c([f,m.getState(),m.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await ik(t,Promise.race(l));return Ri(t),c}finally{i()}};return(n,s)=>nk(r(n,s))},ok=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=nn(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Tr(21));return _x(i),{predicate:s,type:t,effect:i}},lk=Ka(e=>{const{type:t,predicate:r,effect:n}=ok(e);return{id:B3(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Tr(22))}}},{withTypes:()=>lk}),rw=(e,t)=>{const{type:r,effect:n,predicate:s}=ok(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},ng=e=>{e.pending.forEach(t=>{Li(t,rg)})},a5=e=>()=>{e.forEach(ng),e.clear()},nw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},ck=Ka(nn(`${Vf}/add`),{withTypes:()=>ck}),o5=nn(`${Vf}/removeAll`),uk=Ka(nn(`${Vf}/remove`),{withTypes:()=>uk}),l5=(...e)=>{console.error(`${Vf}/error`,...e)},wc=(e={})=>{const t=new Map,{extra:r,onError:n=l5}=e;_x(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&ng(d)}),i=d=>{const f=rw(t,d)??lk(d);return s(f)};Ka(i,{withTypes:()=>i});const o=d=>{const f=rw(t,d);return f&&(f.unsubscribe(),d.cancelActive&&ng(f)),!!f};Ka(o,{withTypes:()=>o});const l=async(d,f,m,h)=>{const p=new AbortController,y=i5(i,p.signal),x=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,Ka({},m,{getOriginalState:h,condition:(v,g)=>y(v,g).then(Boolean),take:y,delay:ak(p.signal),pause:vd(p.signal),extra:r,signal:p.signal,fork:s5(p.signal,x),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((v,g,w)=>{v!==p&&(Li(v,rg),w.delete(v))})},cancel:()=>{Li(p,rg),d.pending.delete(p)},throwIfCancelled:()=>{Ri(p.signal)}})))}catch(v){v instanceof Qf||nw(n,v,{raisedBy:"effect"})}finally{await Promise.all(x),Li(p,r5),d.pending.delete(p)}},c=a5(t);return{middleware:d=>f=>m=>{if(!Q2(m))return f(m);if(ck.match(m))return i(m.payload);if(o5.match(m)){c();return}if(uk.match(m))return o(m.payload);let h=d.getState();const p=()=>{if(h===tw)throw new Error(Tr(23));return h};let y;try{if(y=f(m),t.size>0){const x=d.getState(),v=Array.from(t.values());for(const g of v){let w=!1;try{w=g.predicate(m,x,h)}catch(_){w=!1,nw(n,_,{raisedBy:"predicate"})}w&&l(g,m,d,p)}}}finally{h=tw}return y},startListening:i,stopListening:o,clearListeners:c}};function Tr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var c5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},dk=ln({name:"chartLayout",initialState:c5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:u5,setLayout:d5,setChartSize:f5,setScale:h5}=dk.actions,m5=dk.reducer;function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(n){p5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p5(e,t,r){return(t=g5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g5(e){var t=x5(e,"string");return typeof t=="symbol"?t:t+""}function x5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bd=Math.PI/180,y5=e=>e*180/Math.PI,It=(e,t,r,n)=>({x:e+Math.cos(-bd*n)*r,y:t+Math.sin(-bd*n)*r}),v5=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},b5=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},w5=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=b5({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:y5(c),angleInRadian:c}},j5=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},_5=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},N5=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=w5({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=j5(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?iw(iw({},t),{},{radius:s,angle:_5(d,t)}):null};function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(n){S5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S5(e,t,r){return(t=k5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k5(e){var t=P5(e,"string");return typeof t=="symbol"?t:t+""}function P5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ht(e,t,r){return Me(e)||Me(t)?r:Fn(t)?Xi(e,t,r):typeof t=="function"?t(e):r}var E5=(e,t,r,n,s)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(pr(d-u)!==pr(f-d)){var h=[];if(pr(f-d)===pr(s[1]-s[0])){m=f;var p=d+s[1]-s[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{m=u;var y=f+s[1]-s[0];h[0]=Math.min(d,(y+d)/2),h[1]=Math.max(d,(y+d)/2)}var x=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>x[0]&&e<=x[1]||e>=h[0]&&e<=h[1]){({index:o}=r[c]);break}}else{var v=Math.min(u,f),g=Math.max(u,f);if(e>(v+d)/2&&e<=(g+d)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},C5=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ae(e[i]))return Vr(Vr({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ae(e[o]))return Vr(Vr({},e),{},{[o]:e[o]+(s||0)})}return e},mi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",fk=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},hk=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:h}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=s==="category"&&o.bandwidth?o.bandwidth()/p:0;if(y=h==="angleAxis"&&i&&i.length>=2?pr(i[0]-i[1])*2*y:y,f||m){var x=(f||m||[]).map((v,g)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+y,value:v,offset:y,index:g}});return x.filter(v=>!Dr(v.coordinate))}return c&&u?u.map((v,g)=>({coordinate:o(v)+y,value:v,index:g,offset:y})):o.ticks&&!r&&d!=null?o.ticks(d).map((v,g)=>({coordinate:o(v)+y,value:v,offset:y,index:g})):o.domain().map((v,g)=>({coordinate:o(v)+y,value:n?n[v]:v,index:g,offset:y}))},ow=1e-4,A5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-ow,i=Math.max(n[0],n[1])+ow,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},T5=(e,t)=>{if(!t||t.length!==2||!ae(t[0])||!ae(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ae(e[0])||e[0]<r)&&(s[0]=r),(!ae(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},O5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=Dr(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},D5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Dr(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},M5={sign:O5,expand:b$,none:uo,silhouette:w$,wiggle:j$,positive:D5},I5=(e,t,r)=>{var n=M5[r],s=v$().keys(t).value((i,o)=>+Ht(i,o,0)).order(Hp).offset(n);return s(e)};function mk(e){return e==null?void 0:String(e)}function lw(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Me(s[t.dataKey])){var l=HS(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Ht(s,Me(o)?t.dataKey:o);return Me(c)?null:t.scale(c)}var cw=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ht(i,t.dataKey,t.scale.domain()[o]);return Me(l)?null:t.scale(l)-s/2+n},$5=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},z5=e=>{var t=e.flat(2).filter(ae);return[Math.min(...t),Math.max(...t)]},L5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],R5=(e,t,r)=>{if(e!=null)return L5(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=z5(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},uw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Rf(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function fw(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Vr(Vr({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Wf(e,t){if(e)return String(e);if(typeof t=="string")return t}function q5(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?N5({x:e,y:t},n):null}var F5=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Vr(Vr(Vr({},n),It(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Vr(Vr(Vr({},n),It(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},U5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ws=e=>e.layout.width,js=e=>e.layout.height,B5=e=>e.layout.scale,pk=e=>e.layout.margin,Nx=K(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sx=K(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Q5="data-recharts-item-index",V5="data-recharts-item-data-key",Kf=60;function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(n){W5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W5(e,t,r){return(t=K5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K5(e){var t=H5(e,"string");return typeof t=="symbol"?t:t+""}function H5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G5=e=>e.brush.height,St=K([ws,js,pk,G5,Nx,Sx,F2,p3],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((p,y)=>{var{orientation:x}=y;if(!y.mirror&&!y.hide){var v=typeof y.width=="number"?y.width:Kf;return Cs(Cs({},p),{},{[x]:p[x]+v})}return p},{left:r.left||0,right:r.right||0}),u=s.reduce((p,y)=>{var{orientation:x}=y;return!y.mirror&&!y.hide?Cs(Cs({},p),{},{[x]:Xi(p,"".concat(x))+y.height}):p},{top:r.top||0,bottom:r.bottom||0}),d=Cs(Cs({},u),c),f=d.bottom;d.bottom+=n,d=C5(d,o,l);var m=e-d.left-d.right,h=t-d.top-d.bottom;return Cs(Cs({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(h,0)})}),Y5=K(St,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),gk=K(ws,js,(e,t)=>({x:0,y:0,width:e,height:t})),X5=b.createContext(null),or=()=>b.useContext(X5)!=null,Hf=e=>e.brush,Gf=K([Hf,St,pk],(e,t,r)=>({height:e.height,x:ae(e.x)?e.x:t.left,y:ae(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ae(e.width)?e.width:t.width})),kx=()=>{var e,t=or(),r=ue(Y5),n=ue(Gf),s=(e=ue(Hf))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},J5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},xk=()=>{var e;return(e=ue(St))!==null&&e!==void 0?e:J5},yk=()=>ue(ws),vk=()=>ue(js),Te=e=>e.layout.layoutType,Yf=()=>ue(Te),Z5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},bk=ln({name:"legend",initialState:Z5,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=os(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:OK,setLegendSettings:DK,addLegendPayload:ez,removeLegendPayload:tz}=bk.actions,rz=bk.reducer;function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sg.apply(null,arguments)}function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(r),!0).forEach(function(n){nz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nz(e,t,r){return(t=sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=iz(e,"string");return typeof t=="symbol"?t:t+""}function iz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function az(e){return Array.isArray(e)&&Fn(e[0])&&Fn(e[1])?e.join(" ~ "):e}var oz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,h=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?Rf(i,l):i).map((S,P)=>{if(S.type==="none")return null;var C=S.formatter||o||az,{value:I,name:T}=S,D=I,z=T;if(C){var q=C(I,T,S,P,i);if(Array.isArray(q))[D,z]=q;else if(q!=null)D=q;else return null}var L=pm({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:L},Fn(z)?b.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Fn(z)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},D),b.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},p=pm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=pm({margin:0},s),x=!Me(d),v=x?d:"",g=Ne("recharts-default-tooltip",c),w=Ne("recharts-tooltip-label",u);x&&f&&i!==void 0&&i!==null&&(v=f(d,i));var _=m?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",sg({className:g,style:p},_),b.createElement("p",{className:w,style:y},b.isValidElement(v)?v:"".concat(v)),h())},Yo="recharts-tooltip-wrapper",lz={visibility:"hidden"};function cz(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ne(Yo,{["".concat(Yo,"-right")]:ae(r)&&t&&ae(t.x)&&r>=t.x,["".concat(Yo,"-left")]:ae(r)&&t&&ae(t.x)&&r<t.x,["".concat(Yo,"-bottom")]:ae(n)&&t&&ae(t.y)&&n>=t.y,["".concat(Yo,"-top")]:ae(n)&&t&&ae(t.y)&&n<t.y})}function pw(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&ae(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),f=r[n]+s;if(t[n])return o[n]?d:f;var m=c[n];if(m==null)return 0;if(o[n]){var h=d,p=m;return h<p?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var y=f+l,x=m+u;return y>x?Math.max(d,m):Math.max(f,m)}function uz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function dz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=pw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=pw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=uz({translateX:d,translateY:f,useTranslate3d:l})):u=lz,{cssProperties:u,cssClasses:cz({translateX:d,translateY:f,coordinate:r})}}function gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(r),!0).forEach(function(n){ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ig(e,t,r){return(t=fz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fz(e){var t=hz(e,"string");return typeof t=="symbol"?t:t+""}function hz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mz extends b.PureComponent{constructor(){super(...arguments),ig(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ig(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:h,wrapperStyle:p,lastBoundingBox:y,innerRef:x,hasPortalFromProps:v}=this.props,{cssClasses:g,cssProperties:w}=dz({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:m,viewBox:h}),_=v?{}:ou(ou({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=ou(ou({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:g,style:j,ref:x},i)}}var pz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Po={isSsr:pz()},wk=()=>ue(e=>e.rootProps.accessibilityLayer);function zr(e){return Number.isFinite(e)}function wd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ag.apply(null,arguments)}function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(r),!0).forEach(function(n){gz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gz(e,t,r){return(t=xz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xz(e){var t=yz(e,"string");return typeof t=="symbol"?t:t+""}function yz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vw={curveBasisClosed:l$,curveBasisOpen:c$,curveBasis:o$,curveBumpX:KI,curveBumpY:HI,curveLinearClosed:u$,curveLinear:Of,curveMonotoneX:d$,curveMonotoneY:f$,curveNatural:h$,curveStep:m$,curveStepAfter:g$,curveStepBefore:p$},lu=e=>zr(e.x)&&zr(e.y),Xo=e=>e.x,Jo=e=>e.y,vz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(bc(e));return(r==="curveMonotone"||r==="curveBump")&&t?vw["".concat(r).concat(t==="vertical"?"Y":"X")]:vw[r]||Of},bz=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=vz(t,s),l=i?r.filter(lu):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>lu(f)):n,d=l.map((f,m)=>yw(yw({},f),{},{base:u[m]}));return s==="vertical"?c=ru().y(Jo).x1(Xo).x0(f=>f.base.x):c=ru().x(Xo).y1(Jo).y0(f=>f.base.y),c.defined(lu).curve(o),c(d)}return s==="vertical"&&ae(n)?c=ru().y(Jo).x1(Xo).x0(n):ae(n)?c=ru().x(Xo).y1(Jo).y0(n):c=n2().x(Xo).y(Jo),c.defined(lu).curve(o),c(l)},jk=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?bz(e):n;return b.createElement("path",ag({},Pe(e,!1),nx(e),{className:Ne("recharts-curve",t),d:i===null?void 0:i,ref:s}))},wz=["x","y","top","left","width","height","className"];function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(null,arguments)}function bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(r),!0).forEach(function(n){_z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _z(e,t,r){return(t=Nz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nz(e){var t=Sz(e,"string");return typeof t=="symbol"?t:t+""}function Sz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kz(e,t){if(e==null)return{};var r,n,s=Pz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Pz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ez=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Cz=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=kz(e,wz),u=jz({x:t,y:r,top:n,left:s,width:i,height:o},c);return!ae(t)||!ae(r)||!ae(i)||!ae(o)||!ae(n)||!ae(s)?null:b.createElement("path",og({},Pe(u,!0),{className:Ne("recharts-cross",l),d:Ez(t,r,i,o,n,s)}))};function Az(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){Oz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oz(e,t,r){return(t=Dz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dz(e){var t=Mz(e,"string");return typeof t=="symbol"?t:t+""}function Mz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _s(e,t){var r=Tz({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var _k={},Nk={},Sk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(Sk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sk,r=mx,n=$f,s=zf,i=If;function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,m,h,p,y){const x=y(u,d,f,m,h,p);if(x!==void 0)return x;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,p,y)}return c(u,d,p,y)}function c(u,d,f,m){if(Object.is(u,d))return!0;let h=n.getTag(u),p=n.getTag(d);if(h===s.argumentsTag&&(h=s.objectTag),p===s.argumentsTag&&(p=s.objectTag),h!==p)return!1;switch(h){case s.stringTag:return u.toString()===d.toString();case s.numberTag:{const v=u.valueOf(),g=d.valueOf();return i.eq(v,g)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(u.valueOf(),d.valueOf());case s.regexpTag:return u.source===d.source&&u.flags===d.flags;case s.functionTag:return u===d}f=f??new Map;const y=f.get(u),x=f.get(d);if(y!=null&&x!=null)return y===d;f.set(u,d),f.set(d,u);try{switch(h){case s.mapTag:{if(u.size!==d.size)return!1;for(const[v,g]of u.entries())if(!d.has(v)||!l(g,d.get(v),v,u,d,f,m))return!1;return!0}case s.setTag:{if(u.size!==d.size)return!1;const v=Array.from(u.values()),g=Array.from(d.values());for(let w=0;w<v.length;w++){const _=v[w],j=g.findIndex(N=>l(_,N,void 0,u,d,f,m));if(j===-1)return!1;g.splice(j,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let v=0;v<u.length;v++)if(!l(u[v],d[v],v,u,d,f,m))return!1;return!0}case s.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case s.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case s.errorTag:return u.name===d.name&&u.message===d.message;case s.objectTag:{if(!(c(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const g=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(g.length!==w.length)return!1;for(let _=0;_<g.length;_++){const j=g[_],N=u[j];if(!Object.hasOwn(d,j))return!1;const S=d[j];if(!l(N,S,j,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(Nk);var kk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(kk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk,r=kk;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(_k);var Iz=_k.isEqual;const $z=Qn(Iz);function zz(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var jd=1e-4,Pk=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Ek=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),jw=(e,t)=>r=>{var n=Pk(e,t);return Ek(n,r)},Lz=(e,t)=>r=>{var n=Pk(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return Ek(s,r)},_w=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,n,r,s]=o);var u=jw(t,r),d=jw(n,s),f=Lz(t,r),m=p=>p>1?1:p<0?0:p,h=p=>{for(var y=p>1?1:p,x=y,v=0;v<8;++v){var g=u(x)-y,w=f(x);if(Math.abs(g-y)<jd||w<jd)return d(x);x=m(x-g/w)}return d(x)};return h.isStepper=!1,h},Rz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*s/1e3,m=c*s/1e3+o;return Math.abs(m-l)<jd&&Math.abs(f)<jd?[l,0]:[m,f]};return i.isStepper=!0,i.dt=s,i},qz=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _w(e);case"spring":return Rz();default:if(e.split("(")[0]==="cubic-bezier")return _w(e)}return typeof e=="function"?e:null};function Nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(r),!0).forEach(function(n){Fz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fz(e,t,r){return(t=Uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uz(e){var t=Bz(e,"string");return typeof t=="symbol"?t:t+""}function Bz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qz=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Vz=(e,t,r)=>e.map(n=>"".concat(Qz(n)," ").concat(t,"ms ").concat(r)).join(","),Wz=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ec=(e,t)=>Object.keys(t).reduce((r,n)=>Sw(Sw({},r),{},{[n]:e(n,t[n])}),{});function kw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kw(Object(r),!0).forEach(function(n){Kz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kz(e,t,r){return(t=Hz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hz(e){var t=Gz(e,"string");return typeof t=="symbol"?t:t+""}function Gz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _d=(e,t,r)=>e+(t-e)*r,lg=e=>{var{from:t,to:r}=e;return t!==r},Ck=(e,t,r)=>{var n=ec((s,i)=>{if(lg(i)){var[o,l]=e(i.from,i.to,i.velocity);return Ot(Ot({},i),{},{from:o,velocity:l})}return i},t);return r<1?ec((s,i)=>lg(i)?Ot(Ot({},i),{},{velocity:_d(i.velocity,n[s].velocity,r),from:_d(i.from,n[s].from,r)}):i,t):Ck(e,n,r-1)};function Yz(e,t,r,n,s,i){var o,l=n.reduce((m,h)=>Ot(Ot({},m),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>ec((m,h)=>h.from,l),u=()=>!Object.values(l).filter(lg).length,d=null,f=m=>{o||(o=m);var h=m-o,p=h/r.dt;l=Ck(r,l,p),s(Ot(Ot(Ot({},e),t),c())),o=m,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function Xz(e,t,r,n,s,i,o){var l=null,c=s.reduce((f,m)=>Ot(Ot({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,h=ec((y,x)=>_d(...x,r(m)),c);if(i(Ot(Ot(Ot({},e),t),h)),m<1)l=o.setTimeout(d);else{var p=ec((y,x)=>_d(...x,r(1)),c);i(Ot(Ot(Ot({},e),t),p))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Jz=(e,t,r,n,s,i)=>{var o=Wz(e,t);return r.isStepper===!0?Yz(e,t,r,o,s,i):Xz(e,t,r,n,o,s,i)};class Zz{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var eL=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cg.apply(null,arguments)}function tL(e,t){if(e==null)return{};var r,n,s=rL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(r),!0).forEach(function(n){Oi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oi(e,t,r){return(t=nL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nL(e){var t=sL(e,"string");return typeof t=="symbol"?t:t+""}function sL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iL(){return zz(new Zz)}class Px extends b.PureComponent{constructor(t,r){super(t,r),Oi(this,"mounted",!1),Oi(this,"manager",null),Oi(this,"stopJSAnimation",null),Oi(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(u);return}if(!($z(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?l:t.to;if(this.state&&c){var m={style:s?{[s]:f}:f};(s&&c[s]!==f||!s&&c!==f)&&this.setState(m)}this.runAnimation(As(As({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Jz(r,n,qz(i),s,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=s?{[s]:i}:i,f=Vz(Object.keys(d),n,o);this.manager.start([l,r,As(As({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:h,animationManager:p}=t,y=tL(t,eL),x=b.Children.count(r),v=this.state.style;if(typeof r=="function")return r(v);if(!l||x===0||s<=0)return r;var g=w=>{var{style:_={},className:j}=w.props,N=b.cloneElement(w,As(As({},y),{},{style:As(As({},_),v),className:j}));return N};return x===1?g(b.Children.only(r)):b.createElement("div",null,b.Children.map(r,w=>g(w)))}}Oi(Px,"displayName","Animate");Oi(Px,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var aL=b.createContext(null);function ea(e){var t,r,n=b.useContext(aL);return b.createElement(Px,cg({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:iL()}))}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nd.apply(null,arguments)}var Ew=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=s[f]>i?i:s[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var h=Math.min(i,s);u="M ".concat(e,",").concat(t+o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,`
            L `).concat(e+r-l*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,`
            L `).concat(e+r,",").concat(t+n-o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,`
            L `).concat(e+l*h,",").concat(t+n,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},oL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ak=e=>{var t=_s(e,oL),r=b.useRef(null),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&s(v)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isAnimationActive:p,isUpdateAnimationActive:y}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var x=Ne("recharts-rectangle",d);return y?b.createElement(ea,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:f,isActive:y},v=>{var{width:g,height:w,x:_,y:j}=v;return b.createElement(ea,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,isActive:p,easing:f},b.createElement("path",Nd({},Pe(t,!0),{className:x,d:Ew(_,j,g,w,u),ref:r})))}):b.createElement("path",Nd({},Pe(t,!0),{className:x,d:Ew(i,o,l,c,u)}))};function Tk(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=It(t,r,n,s),l=It(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function ug(){return ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ug.apply(null,arguments)}var lL=(e,t)=>{var r=pr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},cu=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/bd,f=c?s:s+i*d,m=It(t,r,u,f),h=It(t,r,n,f),p=c?s-i*d:s,y=It(t,r,u*Math.cos(d*bd),p);return{center:m,circleTangency:h,lineTangency:y,theta:d}},Ok=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=lL(i,o),c=i+l,u=It(t,r,s,i),d=It(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=It(t,r,n,i),h=It(t,r,n,c);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},cL=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=pr(u-c),{circleTangency:f,lineTangency:m,theta:h}=cu({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:y,theta:x}=cu({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-x;if(v<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):Ok({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var g="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=cu({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:S,theta:P}=cu({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),C=l?Math.abs(c-u):Math.abs(c-u)-j-P;if(C<0&&i===0)return"".concat(g,"L").concat(t,",").concat(r,"Z");g+="L".concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else g+="L".concat(t,",").concat(r,"Z");return g},uL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Dk=e=>{var t=_s(e,uL),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<s||u===d)return null;var m=Ne("recharts-sector",f),h=i-s,p=kn(o,h,0,!0),y;return p>0&&Math.abs(u-d)<360?y=cL({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=Ok({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),b.createElement("path",ug({},Pe(t,!0),{className:m,d:y}))};function dL(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,m=It(l,c,u,f),h=It(l,c,d,f);n=m.x,s=m.y,i=h.x,o=h.y}else return Tk(t);return[{x:n,y:s},{x:i,y:o}]}var Mk={},Ik={},$k={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xx;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})($k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$k;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Ik);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yx,r=Ik;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=n})(Mk);var fL=Mk.range;const zk=Qn(fL);function ti(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ex(e){let t,r,n;e.length!==2?(t=ti,r=(l,c)=>ti(e(l),c),n=(l,c)=>e(l)-c):(t=e===ti||e===hL?e:mL,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function mL(){return 0}function Lk(e){return e===null?NaN:+e}function*pL(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const gL=Ex(ti),jc=gL.right;Ex(Lk).center;class Cw extends Map{constructor(t,r=vL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Aw(this,t))}has(t){return super.has(Aw(this,t))}set(t,r){return super.set(xL(this,t),r)}delete(t){return super.delete(yL(this,t))}}function Aw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function xL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function yL({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function vL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bL(e=ti){if(e===ti)return Rk;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Rk(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wL=Math.sqrt(50),jL=Math.sqrt(10),_L=Math.sqrt(2);function Sd(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=wL?10:i>=jL?5:i>=_L?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Sd(e,t,r*2):[l,c,u]}function dg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Sd(t,e,r):Sd(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function fg(e,t,r){return t=+t,e=+e,r=+r,Sd(e,t,r)[2]}function hg(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?fg(t,e,r):fg(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Tw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Ow(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function qk(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?Rk:bL(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+m)),p=Math.min(n,Math.floor(t+(c-u)*f/c+m));qk(e,t,h,p,s)}const i=e[t];let o=r,l=n;for(Zo(e,r,t),s(e[n],i)>0&&Zo(e,r,n);o<l;){for(Zo(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Zo(e,r,l):(++l,Zo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Zo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function NL(e,t,r){if(e=Float64Array.from(pL(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Ow(e);if(t>=1)return Tw(e);var n,s=(n-1)*t,i=Math.floor(s),o=Tw(qk(e,i).subarray(0,i+1)),l=Ow(e.subarray(i+1));return o+(l-o)*(s-i)}}function SL(e,t,r=Lk){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function kL(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function cn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ns(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mg=Symbol("implicit");function Cx(){var e=new Cw,t=[],r=[],n=mg;function s(i){let o=e.get(i);if(o===void 0){if(n!==mg)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Cw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Cx(t,r).unknown(n)},cn.apply(s,arguments),s}function Ax(){var e=Cx().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=s<n,p=h?s:n,y=h?n:s;i=(y-p)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),p+=(y-p-i*(m-c))*d,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var x=kL(m).map(function(v){return p+i*v});return r(h?x.reverse():x)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Ax(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},cn.apply(f(),arguments)}function Fk(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Fk(t())},e}function PL(){return Fk(Ax.apply(null,arguments).paddingInner(1))}function Tx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Uk(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function _c(){}var tc=.7,kd=1/tc,Ha="\\s*([+-]?\\d+)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EL=/^#([0-9a-f]{3,8})$/,CL=new RegExp(`^rgb\\(${Ha},${Ha},${Ha}\\)$`),AL=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),TL=new RegExp(`^rgba\\(${Ha},${Ha},${Ha},${rc}\\)$`),OL=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${rc}\\)$`),DL=new RegExp(`^hsl\\(${rc},${Rn},${Rn}\\)$`),ML=new RegExp(`^hsla\\(${rc},${Rn},${Rn},${rc}\\)$`),Dw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tx(_c,nc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Mw,formatHex:Mw,formatHex8:IL,formatHsl:$L,formatRgb:Iw,toString:Iw});function Mw(){return this.rgb().formatHex()}function IL(){return this.rgb().formatHex8()}function $L(){return Bk(this).formatHsl()}function Iw(){return this.rgb().formatRgb()}function nc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=EL.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$w(t):r===3?new gr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?uu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?uu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=CL.exec(e))?new gr(t[1],t[2],t[3],1):(t=AL.exec(e))?new gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TL.exec(e))?uu(t[1],t[2],t[3],t[4]):(t=OL.exec(e))?uu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DL.exec(e))?Rw(t[1],t[2]/100,t[3]/100,1):(t=ML.exec(e))?Rw(t[1],t[2]/100,t[3]/100,t[4]):Dw.hasOwnProperty(e)?$w(Dw[e]):e==="transparent"?new gr(NaN,NaN,NaN,0):null}function $w(e){return new gr(e>>16&255,e>>8&255,e&255,1)}function uu(e,t,r,n){return n<=0&&(e=t=r=NaN),new gr(e,t,r,n)}function zL(e){return e instanceof _c||(e=nc(e)),e?(e=e.rgb(),new gr(e.r,e.g,e.b,e.opacity)):new gr}function pg(e,t,r,n){return arguments.length===1?zL(e):new gr(e,t,r,n??1)}function gr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Tx(gr,pg,Uk(_c,{brighter(e){return e=e==null?kd:Math.pow(kd,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gr(qi(this.r),qi(this.g),qi(this.b),Pd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zw,formatHex:zw,formatHex8:LL,formatRgb:Lw,toString:Lw}));function zw(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}`}function LL(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}${Di((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lw(){const e=Pd(this.opacity);return`${e===1?"rgb(":"rgba("}${qi(this.r)}, ${qi(this.g)}, ${qi(this.b)}${e===1?")":`, ${e})`}`}function Pd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Di(e){return e=qi(e),(e<16?"0":"")+e.toString(16)}function Rw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new wn(e,t,r,n)}function Bk(e){if(e instanceof wn)return new wn(e.h,e.s,e.l,e.opacity);if(e instanceof _c||(e=nc(e)),!e)return new wn;if(e instanceof wn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new wn(o,l,c,e.opacity)}function RL(e,t,r,n){return arguments.length===1?Bk(e):new wn(e,t,r,n??1)}function wn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Tx(wn,RL,Uk(_c,{brighter(e){return e=e==null?kd:Math.pow(kd,e),new wn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new wn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new gr(gm(e>=240?e-240:e+120,s,n),gm(e,s,n),gm(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new wn(qw(this.h),du(this.s),du(this.l),Pd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pd(this.opacity);return`${e===1?"hsl(":"hsla("}${qw(this.h)}, ${du(this.s)*100}%, ${du(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qw(e){return e=(e||0)%360,e<0?e+360:e}function du(e){return Math.max(0,Math.min(1,e||0))}function gm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ox=e=>()=>e;function qL(e,t){return function(r){return e+r*t}}function FL(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function UL(e){return(e=+e)==1?Qk:function(t,r){return r-t?FL(t,r,e):Ox(isNaN(t)?r:t)}}function Qk(e,t){var r=t-e;return r?qL(e,r):Ox(isNaN(e)?t:e)}const Fw=function e(t){var r=UL(t);function n(s,i){var o=r((s=pg(s)).r,(i=pg(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=Qk(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function BL(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function QL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VL(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Eo(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function WL(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ed(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function KL(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Eo(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var gg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xm=new RegExp(gg.source,"g");function HL(e){return function(){return e}}function GL(e){return function(t){return e(t)+""}}function YL(e,t){var r=gg.lastIndex=xm.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=gg.exec(e))&&(s=xm.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Ed(n,s)})),r=xm.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?GL(c[0].x):HL(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Eo(e,t){var r=typeof t,n;return t==null||r==="boolean"?Ox(t):(r==="number"?Ed:r==="string"?(n=nc(t))?(t=n,Fw):YL:t instanceof nc?Fw:t instanceof Date?WL:QL(t)?BL:Array.isArray(t)?VL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?KL:Ed)(e,t)}function Dx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function XL(e,t){t===void 0&&(t=e,e=Eo);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function JL(e){return function(){return e}}function Cd(e){return+e}var Uw=[0,1];function rr(e){return e}function xg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:JL(isNaN(t)?NaN:.5)}function ZL(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function eR(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=xg(s,n),i=r(o,i)):(n=xg(n,s),i=r(i,o)),function(l){return i(n(l))}}function tR(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=xg(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=jc(e,l,1,n)-1;return i[c](s[c](l))}}function Nc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xf(){var e=Uw,t=Uw,r=Eo,n,s,i,o=rr,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==rr&&(o=ZL(e[0],e[m-1])),l=m>2?tR:eR,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(s((u||(u=l(t,e.map(n),Ed)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Cd),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=Dx,d()},f.clamp=function(m){return arguments.length?(o=m?!0:rr,d()):o!==rr},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,h){return n=m,s=h,d()}}function Mx(){return Xf()(rr,rr)}function rR(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ad(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mo(e){return e=Ad(Math.abs(e)),e?e[1]:NaN}function nR(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function sR(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var iR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sc(e){if(!(t=iR.exec(e)))throw new Error("invalid format: "+e);var t;return new Ix({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sc.prototype=Ix.prototype;function Ix(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ix.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aR(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var Vk;function oR(e,t){var r=Ad(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(Vk=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ad(e,Math.max(0,t+i-1))[0]}function Bw(e,t){var r=Ad(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Qw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rR,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bw(e*100,t),r:Bw,s:oR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Vw(e){return e}var Ww=Array.prototype.map,Kw=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function lR(e){var t=e.grouping===void 0||e.thousands===void 0?Vw:nR(Ww.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Vw:sR(Ww.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=sc(f);var m=f.fill,h=f.align,p=f.sign,y=f.symbol,x=f.zero,v=f.width,g=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(g=!0,j="g"):Qw[j]||(w===void 0&&(w=12),_=!0,j="g"),(x||m==="0"&&h==="=")&&(x=!0,m="0",h="=");var N=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=y==="$"?n:/[%p]/.test(j)?o:"",P=Qw[j],C=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function I(T){var D=N,z=S,q,L,O;if(j==="c")z=P(T)+z,T="";else{T=+T;var A=T<0||1/T<0;if(T=isNaN(T)?c:P(Math.abs(T),w),_&&(T=aR(T)),A&&+T==0&&p!=="+"&&(A=!1),D=(A?p==="("?p:l:p==="-"||p==="("?"":p)+D,z=(j==="s"?Kw[8+Vk/3]:"")+z+(A&&p==="("?")":""),C){for(q=-1,L=T.length;++q<L;)if(O=T.charCodeAt(q),48>O||O>57){z=(O===46?s+T.slice(q+1):T.slice(q))+z,T=T.slice(0,q);break}}}g&&!x&&(T=t(T,1/0));var k=D.length+T.length+z.length,E=k<v?new Array(v-k+1).join(m):"";switch(g&&x&&(T=t(E+T,E.length?v-z.length:1/0),E=""),h){case"<":T=D+T+z+E;break;case"=":T=D+E+T+z;break;case"^":T=E.slice(0,k=E.length>>1)+D+T+z+E.slice(k);break;default:T=E+D+T+z;break}return i(T)}return I.toString=function(){return f+""},I}function d(f,m){var h=u((f=sc(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mo(m)/3)))*3,y=Math.pow(10,-p),x=Kw[8+p/3];return function(v){return h(y*v)+x}}return{format:u,formatPrefix:d}}var fu,$x,Wk;cR({thousands:",",grouping:[3],currency:["$",""]});function cR(e){return fu=lR(e),$x=fu.format,Wk=fu.formatPrefix,fu}function uR(e){return Math.max(0,-mo(Math.abs(e)))}function dR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mo(t)/3)))*3-mo(Math.abs(e)))}function fR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mo(t)-mo(e))+1}function Kk(e,t,r,n){var s=hg(e,t,r),i;switch(n=sc(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=dR(s,o))&&(n.precision=i),Wk(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=fR(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=uR(s))&&(n.precision=i-(n.type==="%")*2);break}}return $x(n)}function pi(e){var t=e.domain;return e.ticks=function(r){var n=t();return dg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return Kk(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=fg(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Hk(){var e=Mx();return e.copy=function(){return Nc(e,Hk())},cn.apply(e,arguments),pi(e)}function Gk(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Cd),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Gk(e).unknown(t)},e=arguments.length?Array.from(e,Cd):[0,1],pi(r)}function Yk(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function Hw(e){return Math.log(e)}function Gw(e){return Math.exp(e)}function hR(e){return-Math.log(-e)}function mR(e){return-Math.exp(-e)}function pR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gR(e){return e===10?pR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function xR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Yw(e){return(t,r)=>-e(-t,r)}function zx(e){const t=e(Hw,Gw),r=t.domain;let n=10,s,i;function o(){return s=xR(n),i=gR(n),r()[0]<0?(s=Yw(s),i=Yw(i),e(hR,mR)):e(Hw,Gw),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),h=s(d),p,y;const x=l==null?10:+l;let v=[];if(!(n%1)&&h-m<x){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(p=1;p<n;++p)if(y=m<0?p/i(-m):p*i(m),!(y<u)){if(y>d)break;v.push(y)}}else for(;m<=h;++m)for(p=n-1;p>=1;--p)if(y=m>0?p/i(-m):p*i(m),!(y<u)){if(y>d)break;v.push(y)}v.length*2<x&&(v=dg(u,d,x))}else v=dg(m,h,Math.min(h-m,x)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sc(c)).precision==null&&(c.trim=!0),c=$x(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Yk(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function Xk(){const e=zx(Xf()).domain([1,10]);return e.copy=()=>Nc(e,Xk()).base(e.base()),cn.apply(e,arguments),e}function Xw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Lx(e){var t=1,r=e(Xw(t),Jw(t));return r.constant=function(n){return arguments.length?e(Xw(t=+n),Jw(t)):t},pi(r)}function Jk(){var e=Lx(Xf());return e.copy=function(){return Nc(e,Jk()).constant(e.constant())},cn.apply(e,arguments)}function Zw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function yR(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vR(e){return e<0?-e*e:e*e}function Rx(e){var t=e(rr,rr),r=1;function n(){return r===1?e(rr,rr):r===.5?e(yR,vR):e(Zw(r),Zw(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},pi(t)}function qx(){var e=Rx(Xf());return e.copy=function(){return Nc(e,qx()).exponent(e.exponent())},cn.apply(e,arguments),e}function bR(){return qx.apply(null,arguments).exponent(.5)}function ej(e){return Math.sign(e)*e*e}function wR(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Zk(){var e=Mx(),t=[0,1],r=!1,n;function s(i){var o=wR(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(ej(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Cd)).map(ej)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Zk(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},cn.apply(s,arguments),pi(s)}function eP(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=SL(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[jc(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ti),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return eP().domain(e).range(t).unknown(n)},cn.apply(i,arguments)}function tP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[jc(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return tP().domain([e,t]).range(s).unknown(i)},cn.apply(pi(o),arguments)}function rP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[jc(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return rP().domain(e).range(t).unknown(r)},cn.apply(s,arguments)}const ym=new Date,vm=new Date;function vt(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>vt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(ym.setTime(+i),vm.setTime(+o),e(ym),e(vm),Math.floor(r(ym,vm))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Td=vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Td.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Td);Td.range;const ss=1e3,Hr=ss*60,is=Hr*60,ps=is*24,Fx=ps*7,tj=ps*30,bm=ps*365,Mi=vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ss)},(e,t)=>(t-e)/ss,e=>e.getUTCSeconds());Mi.range;const Ux=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ss)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getMinutes());Ux.range;const Bx=vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getUTCMinutes());Bx.range;const Qx=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ss-e.getMinutes()*Hr)},(e,t)=>{e.setTime(+e+t*is)},(e,t)=>(t-e)/is,e=>e.getHours());Qx.range;const Vx=vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*is)},(e,t)=>(t-e)/is,e=>e.getUTCHours());Vx.range;const Sc=vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hr)/ps,e=>e.getDate()-1);Sc.range;const Jf=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ps,e=>e.getUTCDate()-1);Jf.range;const nP=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ps,e=>Math.floor(e/ps));nP.range;function oa(e){return vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/Fx)}const Zf=oa(0),Od=oa(1),jR=oa(2),_R=oa(3),po=oa(4),NR=oa(5),SR=oa(6);Zf.range;Od.range;jR.range;_R.range;po.range;NR.range;SR.range;function la(e){return vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Fx)}const eh=la(0),Dd=la(1),kR=la(2),PR=la(3),go=la(4),ER=la(5),CR=la(6);eh.range;Dd.range;kR.range;PR.range;go.range;ER.range;CR.range;const Wx=vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Wx.range;const Kx=vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kx.range;const gs=vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});gs.range;const xs=vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xs.range;function sP(e,t,r,n,s,i){const o=[[Mi,1,ss],[Mi,5,5*ss],[Mi,15,15*ss],[Mi,30,30*ss],[i,1,Hr],[i,5,5*Hr],[i,15,15*Hr],[i,30,30*Hr],[s,1,is],[s,3,3*is],[s,6,6*is],[s,12,12*is],[n,1,ps],[n,2,2*ps],[r,1,Fx],[t,1,tj],[t,3,3*tj],[e,1,bm]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),p=h?h.range(u,+d+1):[];return m?p.reverse():p}function c(u,d,f){const m=Math.abs(d-u)/f,h=Ex(([,,x])=>x).right(o,m);if(h===o.length)return e.every(hg(u/bm,d/bm,f));if(h===0)return Td.every(Math.max(hg(u,d,f),1));const[p,y]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return p.every(y)}return[l,c]}const[AR,TR]=sP(xs,Kx,eh,nP,Vx,Bx),[OR,DR]=sP(gs,Wx,Zf,Sc,Qx,Ux);function wm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function el(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function MR(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=tl(s),d=rl(s),f=tl(i),m=rl(i),h=tl(o),p=rl(o),y=tl(l),x=rl(l),v=tl(c),g=rl(c),w={a:A,A:k,b:E,B:$,c:null,d:oj,e:oj,f:nq,g:hq,G:pq,H:eq,I:tq,j:rq,L:iP,m:sq,M:iq,p:R,q:U,Q:uj,s:dj,S:aq,u:oq,U:lq,V:cq,w:uq,W:dq,x:null,X:null,y:fq,Y:mq,Z:gq,"%":cj},_={a:J,A:de,b:he,B:ee,c:null,d:lj,e:lj,f:bq,g:Aq,G:Oq,H:xq,I:yq,j:vq,L:oP,m:wq,M:jq,p:ye,q:Ct,Q:uj,s:dj,S:_q,u:Nq,U:Sq,V:kq,w:Pq,W:Eq,x:null,X:null,y:Cq,Y:Tq,Z:Dq,"%":cj},j={a:I,A:T,b:D,B:z,c:q,d:ij,e:ij,f:YR,g:sj,G:nj,H:aj,I:aj,j:WR,L:GR,m:VR,M:KR,p:C,q:QR,Q:JR,s:ZR,S:HR,u:RR,U:qR,V:FR,w:LR,W:UR,x:L,X:O,y:sj,Y:nj,Z:BR,"%":XR};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(Q,te){return function(le){var Y=[],Ve=-1,me=0,Oe=Q.length,et,ut,We;for(le instanceof Date||(le=new Date(+le));++Ve<Oe;)Q.charCodeAt(Ve)===37&&(Y.push(Q.slice(me,Ve)),(ut=rj[et=Q.charAt(++Ve)])!=null?et=Q.charAt(++Ve):ut=et==="e"?" ":"0",(We=te[et])&&(et=We(le,ut)),Y.push(et),me=Ve+1);return Y.push(Q.slice(me,Ve)),Y.join("")}}function S(Q,te){return function(le){var Y=el(1900,void 0,1),Ve=P(Y,Q,le+="",0),me,Oe;if(Ve!=le.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(te&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(me=jm(el(Y.y,0,1)),Oe=me.getUTCDay(),me=Oe>4||Oe===0?Dd.ceil(me):Dd(me),me=Jf.offset(me,(Y.V-1)*7),Y.y=me.getUTCFullYear(),Y.m=me.getUTCMonth(),Y.d=me.getUTCDate()+(Y.w+6)%7):(me=wm(el(Y.y,0,1)),Oe=me.getDay(),me=Oe>4||Oe===0?Od.ceil(me):Od(me),me=Sc.offset(me,(Y.V-1)*7),Y.y=me.getFullYear(),Y.m=me.getMonth(),Y.d=me.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),Oe="Z"in Y?jm(el(Y.y,0,1)).getUTCDay():wm(el(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(Oe+5)%7:Y.w+Y.U*7-(Oe+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,jm(Y)):wm(Y)}}function P(Q,te,le,Y){for(var Ve=0,me=te.length,Oe=le.length,et,ut;Ve<me;){if(Y>=Oe)return-1;if(et=te.charCodeAt(Ve++),et===37){if(et=te.charAt(Ve++),ut=j[et in rj?te.charAt(Ve++):et],!ut||(Y=ut(Q,le,Y))<0)return-1}else if(et!=le.charCodeAt(Y++))return-1}return Y}function C(Q,te,le){var Y=u.exec(te.slice(le));return Y?(Q.p=d.get(Y[0].toLowerCase()),le+Y[0].length):-1}function I(Q,te,le){var Y=h.exec(te.slice(le));return Y?(Q.w=p.get(Y[0].toLowerCase()),le+Y[0].length):-1}function T(Q,te,le){var Y=f.exec(te.slice(le));return Y?(Q.w=m.get(Y[0].toLowerCase()),le+Y[0].length):-1}function D(Q,te,le){var Y=v.exec(te.slice(le));return Y?(Q.m=g.get(Y[0].toLowerCase()),le+Y[0].length):-1}function z(Q,te,le){var Y=y.exec(te.slice(le));return Y?(Q.m=x.get(Y[0].toLowerCase()),le+Y[0].length):-1}function q(Q,te,le){return P(Q,t,te,le)}function L(Q,te,le){return P(Q,r,te,le)}function O(Q,te,le){return P(Q,n,te,le)}function A(Q){return o[Q.getDay()]}function k(Q){return i[Q.getDay()]}function E(Q){return c[Q.getMonth()]}function $(Q){return l[Q.getMonth()]}function R(Q){return s[+(Q.getHours()>=12)]}function U(Q){return 1+~~(Q.getMonth()/3)}function J(Q){return o[Q.getUTCDay()]}function de(Q){return i[Q.getUTCDay()]}function he(Q){return c[Q.getUTCMonth()]}function ee(Q){return l[Q.getUTCMonth()]}function ye(Q){return s[+(Q.getUTCHours()>=12)]}function Ct(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var te=N(Q+="",w);return te.toString=function(){return Q},te},parse:function(Q){var te=S(Q+="",!1);return te.toString=function(){return Q},te},utcFormat:function(Q){var te=N(Q+="",_);return te.toString=function(){return Q},te},utcParse:function(Q){var te=S(Q+="",!0);return te.toString=function(){return Q},te}}}var rj={"-":"",_:" ",0:"0"},kt=/^\s*\d+/,IR=/^%/,$R=/[\\^$*+?|[\]().{}]/g;function Se(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function zR(e){return e.replace($R,"\\$&")}function tl(e){return new RegExp("^(?:"+e.map(zR).join("|")+")","i")}function rl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function LR(e,t,r){var n=kt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function RR(e,t,r){var n=kt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function qR(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function FR(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function UR(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nj(e,t,r){var n=kt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sj(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function BR(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function QR(e,t,r){var n=kt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function VR(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ij(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function WR(e,t,r){var n=kt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function aj(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function KR(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function HR(e,t,r){var n=kt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function GR(e,t,r){var n=kt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function YR(e,t,r){var n=kt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function XR(e,t,r){var n=IR.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function JR(e,t,r){var n=kt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function ZR(e,t,r){var n=kt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function oj(e,t){return Se(e.getDate(),t,2)}function eq(e,t){return Se(e.getHours(),t,2)}function tq(e,t){return Se(e.getHours()%12||12,t,2)}function rq(e,t){return Se(1+Sc.count(gs(e),e),t,3)}function iP(e,t){return Se(e.getMilliseconds(),t,3)}function nq(e,t){return iP(e,t)+"000"}function sq(e,t){return Se(e.getMonth()+1,t,2)}function iq(e,t){return Se(e.getMinutes(),t,2)}function aq(e,t){return Se(e.getSeconds(),t,2)}function oq(e){var t=e.getDay();return t===0?7:t}function lq(e,t){return Se(Zf.count(gs(e)-1,e),t,2)}function aP(e){var t=e.getDay();return t>=4||t===0?po(e):po.ceil(e)}function cq(e,t){return e=aP(e),Se(po.count(gs(e),e)+(gs(e).getDay()===4),t,2)}function uq(e){return e.getDay()}function dq(e,t){return Se(Od.count(gs(e)-1,e),t,2)}function fq(e,t){return Se(e.getFullYear()%100,t,2)}function hq(e,t){return e=aP(e),Se(e.getFullYear()%100,t,2)}function mq(e,t){return Se(e.getFullYear()%1e4,t,4)}function pq(e,t){var r=e.getDay();return e=r>=4||r===0?po(e):po.ceil(e),Se(e.getFullYear()%1e4,t,4)}function gq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Se(t/60|0,"0",2)+Se(t%60,"0",2)}function lj(e,t){return Se(e.getUTCDate(),t,2)}function xq(e,t){return Se(e.getUTCHours(),t,2)}function yq(e,t){return Se(e.getUTCHours()%12||12,t,2)}function vq(e,t){return Se(1+Jf.count(xs(e),e),t,3)}function oP(e,t){return Se(e.getUTCMilliseconds(),t,3)}function bq(e,t){return oP(e,t)+"000"}function wq(e,t){return Se(e.getUTCMonth()+1,t,2)}function jq(e,t){return Se(e.getUTCMinutes(),t,2)}function _q(e,t){return Se(e.getUTCSeconds(),t,2)}function Nq(e){var t=e.getUTCDay();return t===0?7:t}function Sq(e,t){return Se(eh.count(xs(e)-1,e),t,2)}function lP(e){var t=e.getUTCDay();return t>=4||t===0?go(e):go.ceil(e)}function kq(e,t){return e=lP(e),Se(go.count(xs(e),e)+(xs(e).getUTCDay()===4),t,2)}function Pq(e){return e.getUTCDay()}function Eq(e,t){return Se(Dd.count(xs(e)-1,e),t,2)}function Cq(e,t){return Se(e.getUTCFullYear()%100,t,2)}function Aq(e,t){return e=lP(e),Se(e.getUTCFullYear()%100,t,2)}function Tq(e,t){return Se(e.getUTCFullYear()%1e4,t,4)}function Oq(e,t){var r=e.getUTCDay();return e=r>=4||r===0?go(e):go.ceil(e),Se(e.getUTCFullYear()%1e4,t,4)}function Dq(){return"+0000"}function cj(){return"%"}function uj(e){return+e}function dj(e){return Math.floor(+e/1e3)}var va,cP,uP;Mq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mq(e){return va=MR(e),cP=va.format,va.parse,uP=va.utcFormat,va.utcParse,va}function Iq(e){return new Date(e)}function $q(e){return e instanceof Date?+e:+new Date(+e)}function Hx(e,t,r,n,s,i,o,l,c,u){var d=Mx(),f=d.invert,m=d.domain,h=u(".%L"),p=u(":%S"),y=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),g=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?h:l(N)<N?p:o(N)<N?y:i(N)<N?x:n(N)<N?s(N)<N?v:g:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?m(Array.from(N,$q)):m().map(Iq)},d.ticks=function(N){var S=m();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?j:u(S)},d.nice=function(N){var S=m();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?m(Yk(S,N)):d},d.copy=function(){return Nc(d,Hx(e,t,r,n,s,i,o,l,c,u))},d}function zq(){return cn.apply(Hx(OR,DR,gs,Wx,Zf,Sc,Qx,Ux,Mi,cP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Lq(){return cn.apply(Hx(AR,TR,xs,Kx,eh,Jf,Vx,Bx,Mi,uP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function th(){var e=0,t=1,r,n,s,i,o=rr,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,p;return arguments.length?([h,p]=m,o=f(h,p),u):[o(0),o(1)]}}return u.range=d(Eo),u.rangeRound=d(Dx),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function gi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dP(){var e=pi(th()(rr));return e.copy=function(){return gi(e,dP())},Ns.apply(e,arguments)}function fP(){var e=zx(th()).domain([1,10]);return e.copy=function(){return gi(e,fP()).base(e.base())},Ns.apply(e,arguments)}function hP(){var e=Lx(th());return e.copy=function(){return gi(e,hP()).constant(e.constant())},Ns.apply(e,arguments)}function Gx(){var e=Rx(th());return e.copy=function(){return gi(e,Gx()).exponent(e.exponent())},Ns.apply(e,arguments)}function Rq(){return Gx.apply(null,arguments).exponent(.5)}function mP(){var e=[],t=rr;function r(n){if(n!=null&&!isNaN(n=+n))return t((jc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ti),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>NL(e,i/n))},r.copy=function(){return mP(t).domain(e)},Ns.apply(r,arguments)}function rh(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=rr,d,f=!1,m;function h(y){return isNaN(y=+y)?m:(y=.5+((y=+d(y))-i)*(n*y<n*i?l:c),u(f?Math.max(0,Math.min(1,y)):y))}h.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h):[e,t,r]},h.clamp=function(y){return arguments.length?(f=!!y,h):f},h.interpolator=function(y){return arguments.length?(u=y,h):u};function p(y){return function(x){var v,g,w;return arguments.length?([v,g,w]=x,u=XL(y,[v,g,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(Eo),h.rangeRound=p(Dx),h.unknown=function(y){return arguments.length?(m=y,h):m},function(y){return d=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h}}function pP(){var e=pi(rh()(rr));return e.copy=function(){return gi(e,pP())},Ns.apply(e,arguments)}function gP(){var e=zx(rh()).domain([.1,1,10]);return e.copy=function(){return gi(e,gP()).base(e.base())},Ns.apply(e,arguments)}function xP(){var e=Lx(rh());return e.copy=function(){return gi(e,xP()).constant(e.constant())},Ns.apply(e,arguments)}function Yx(){var e=Rx(rh());return e.copy=function(){return gi(e,Yx()).exponent(e.exponent())},Ns.apply(e,arguments)}function qq(){return Yx.apply(null,arguments).exponent(.5)}const ul=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ax,scaleDiverging:pP,scaleDivergingLog:gP,scaleDivergingPow:Yx,scaleDivergingSqrt:qq,scaleDivergingSymlog:xP,scaleIdentity:Gk,scaleImplicit:mg,scaleLinear:Hk,scaleLog:Xk,scaleOrdinal:Cx,scalePoint:PL,scalePow:qx,scaleQuantile:eP,scaleQuantize:tP,scaleRadial:Zk,scaleSequential:dP,scaleSequentialLog:fP,scaleSequentialPow:Gx,scaleSequentialQuantile:mP,scaleSequentialSqrt:Rq,scaleSequentialSymlog:hP,scaleSqrt:bR,scaleSymlog:Jk,scaleThreshold:rP,scaleTime:zq,scaleUtc:Lq,tickFormat:Kk},Symbol.toStringTag,{value:"Module"}));var ca=e=>e.chartData,Fq=K([ca],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Xx=(e,t,r,n)=>n?Fq(e):ca(e);function xo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zr(t)&&zr(r))return!0}return!1}function fj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Uq(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(zr(r))s=r;else if(typeof r=="function")return;if(zr(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(xo(o))return o}}function Bq(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(xo(n))return fj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(ae(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&uw.test(s)){var c=uw.exec(s);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ae(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&dw.test(i)){var d=dw.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var m=[o,l];if(xo(m))return t==null?m:fj(m,t,r)}}}var Co=1e9,Qq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Zx,He=!0,sn="[DecimalError] ",Fi=sn+"Invalid argument: ",Jx=sn+"Exponent out of range: ",Ao=Math.floor,Si=Math.pow,Vq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pr,wt=1e7,Be=7,yP=9007199254740991,Md=Ao(yP/Be),ie={};ie.absoluteValue=ie.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ie.comparedTo=ie.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};ie.decimalPlaces=ie.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Be;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ie.dividedBy=ie.div=function(e){return ls(this,new this.constructor(e))};ie.dividedToIntegerBy=ie.idiv=function(e){var t=this,r=t.constructor;return De(ls(t,new r(e),0,1),r.precision)};ie.equals=ie.eq=function(e){return!this.cmp(e)};ie.exponent=function(){return ct(this)};ie.greaterThan=ie.gt=function(e){return this.cmp(e)>0};ie.greaterThanOrEqualTo=ie.gte=function(e){return this.cmp(e)>=0};ie.isInteger=ie.isint=function(){return this.e>this.d.length-2};ie.isNegative=ie.isneg=function(){return this.s<0};ie.isPositive=ie.ispos=function(){return this.s>0};ie.isZero=function(){return this.s===0};ie.lessThan=ie.lt=function(e){return this.cmp(e)<0};ie.lessThanOrEqualTo=ie.lte=function(e){return this.cmp(e)<1};ie.logarithm=ie.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Pr))throw Error(sn+"NaN");if(r.s<1)throw Error(sn+(r.s?"NaN":"-Infinity"));return r.eq(Pr)?new n(0):(He=!1,t=ls(ic(r,i),ic(e,i),i),He=!0,De(t,s))};ie.minus=ie.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wP(t,e):vP(t,(e.s=-e.s,e))};ie.modulo=ie.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(sn+"NaN");return r.s?(He=!1,t=ls(r,e,0,1).times(e),He=!0,r.minus(t)):De(new n(r),s)};ie.naturalExponential=ie.exp=function(){return bP(this)};ie.naturalLogarithm=ie.ln=function(){return ic(this)};ie.negated=ie.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ie.plus=ie.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?vP(t,e):wP(t,(e.s=-e.s,e))};ie.precision=ie.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Fi+e);if(t=ct(s)+1,n=s.d.length-1,r=n*Be+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ie.squareRoot=ie.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(sn+"NaN")}for(e=ct(l),He=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=In(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ao((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(ls(l,i,o+2)).times(.5),In(i.d).slice(0,o)===(t=In(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(De(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return He=!0,De(n,r)};ie.times=ie.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=h.length,c<u&&(i=m,m=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+h[n]*m[s-n-1]+t,i[s--]=l%wt|0,t=l/wt|0;i[s]=(i[s]+t)%wt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,He?De(e,f.precision):e};ie.toDecimalPlaces=ie.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Un(e,0,Co),t===void 0?t=n.rounding:Un(t,0,8),De(r,e+ct(r)+1,t))};ie.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ta(n,!0):(Un(e,0,Co),t===void 0?t=s.rounding:Un(t,0,8),n=De(new s(n),e+1,t),r=ta(n,!0,e+1)),r};ie.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ta(s):(Un(e,0,Co),t===void 0?t=i.rounding:Un(t,0,8),n=De(new i(s),e+ct(s)+1,t),r=ta(n.abs(),!1,e+ct(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};ie.toInteger=ie.toint=function(){var e=this,t=e.constructor;return De(new t(e),ct(e)+1,t.rounding)};ie.toNumber=function(){return+this};ie.toPower=ie.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Pr);if(l=new c(l),!l.s){if(e.s<1)throw Error(sn+"Infinity");return l}if(l.eq(Pr))return l;if(n=c.precision,e.eq(Pr))return De(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=yP){for(s=new c(Pr),t=Math.ceil(n/Be+4),He=!1;r%2&&(s=s.times(l),mj(s.d,t)),r=Ao(r/2),r!==0;)l=l.times(l),mj(l.d,t);return He=!0,e.s<0?new c(Pr).div(s):De(s,n)}}else if(i<0)throw Error(sn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,He=!1,s=e.times(ic(l,n+u)),He=!0,s=bP(s),s.s=i,s};ie.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ct(s),n=ta(s,r<=i.toExpNeg||r>=i.toExpPos)):(Un(e,1,Co),t===void 0?t=i.rounding:Un(t,0,8),s=De(new i(s),e,t),r=ct(s),n=ta(s,e<=r||r<=i.toExpNeg,e)),n};ie.toSignificantDigits=ie.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Un(e,1,Co),t===void 0?t=n.rounding:Un(t,0,8)),De(new n(r),e,t)};ie.toString=ie.valueOf=ie.val=ie.toJSON=ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ct(e),r=e.constructor;return ta(e,t<=r.toExpNeg||t>=r.toExpPos)};function vP(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),He?De(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(f/Be),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/wt|0,c[i]%=wt;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,He?De(t,f):t}function Un(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Fi+e)}function In(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Be-n.length,r&&(i+=Is(r)),i+=n;o=e[t],n=o+"",r=Be-n.length,r&&(i+=Is(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ls=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%wt|0,o=i/wt|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*wt+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,f,m,h,p,y,x,v,g,w,_,j,N,S,P,C=n.constructor,I=n.s==s.s?1:-1,T=n.d,D=s.d;if(!n.s)return new C(n);if(!s.s)throw Error(sn+"Division by zero");for(c=n.e-s.e,S=D.length,j=T.length,h=new C(I),p=h.d=[],u=0;D[u]==(T[u]||0);)++u;if(D[u]>(T[u]||0)&&--c,i==null?g=i=C.precision:o?g=i+(ct(n)-ct(s))+1:g=i,g<0)return new C(0);if(g=g/Be+2|0,u=0,S==1)for(d=0,D=D[0],g++;(u<j||d)&&g--;u++)w=d*wt+(T[u]||0),p[u]=w/D|0,d=w%D|0;else{for(d=wt/(D[0]+1)|0,d>1&&(D=e(D,d),T=e(T,d),S=D.length,j=T.length),_=S,y=T.slice(0,S),x=y.length;x<S;)y[x++]=0;P=D.slice(),P.unshift(0),N=D[0],D[1]>=wt/2&&++N;do d=0,l=t(D,y,S,x),l<0?(v=y[0],S!=x&&(v=v*wt+(y[1]||0)),d=v/N|0,d>1?(d>=wt&&(d=wt-1),f=e(D,d),m=f.length,x=y.length,l=t(f,y,m,x),l==1&&(d--,r(f,S<m?P:D,m))):(d==0&&(l=d=1),f=D.slice()),m=f.length,m<x&&f.unshift(0),r(y,f,x),l==-1&&(x=y.length,l=t(D,y,S,x),l<1&&(d++,r(y,S<x?P:D,x))),x=y.length):l===0&&(d++,y=[0]),p[u++]=d,l&&y[0]?y[x++]=T[_]||0:(y=[T[_]],x=1);while((_++<j||y[0]!==void 0)&&g--)}return p[0]||p.shift(),h.e=c,De(h,o?i+ct(h)+1:i)}}();function bP(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(ct(e)>16)throw Error(Jx+ct(e));if(!e.s)return new d(Pr);for(t==null?(He=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Si(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Pr),d.precision=l;;){if(s=De(s.times(e),l),r=r.times(++c),o=i.plus(ls(s,r,l)),In(o.d).slice(0,l)===In(i.d).slice(0,l)){for(;u--;)i=De(i.times(i),l);return d.precision=f,t==null?(He=!0,De(i,f)):i}i=o}}function ct(e){for(var t=e.e*Be,r=e.d[0];r>=10;r/=10)t++;return t}function _m(e,t,r){if(t>e.LN10.sd())throw He=!0,r&&(e.precision=r),Error(sn+"LN10 precision limit exceeded");return De(new e(e.LN10),t)}function Is(e){for(var t="";e--;)t+="0";return t}function ic(e,t){var r,n,s,i,o,l,c,u,d,f=1,m=10,h=e,p=h.d,y=h.constructor,x=y.precision;if(h.s<1)throw Error(sn+(h.s?"NaN":"-Infinity"));if(h.eq(Pr))return new y(0);if(t==null?(He=!1,u=x):u=t,h.eq(10))return t==null&&(He=!0),_m(y,u);if(u+=m,y.precision=u,r=In(p),n=r.charAt(0),i=ct(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=In(h.d),n=r.charAt(0),f++;i=ct(h),n>1?(h=new y("0."+r),i++):h=new y(n+"."+r.slice(1))}else return c=_m(y,u+2,x).times(i+""),h=ic(new y(n+"."+r.slice(1)),u-m).plus(c),y.precision=x,t==null?(He=!0,De(h,x)):h;for(l=o=h=ls(h.minus(Pr),h.plus(Pr),u),d=De(h.times(h),u),s=3;;){if(o=De(o.times(d),u),c=l.plus(ls(o,new y(s),u)),In(c.d).slice(0,u)===In(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(_m(y,u+2,x).times(i+""))),l=ls(l,new y(f),u),y.precision=x,t==null?(He=!0,De(l,x)):l;l=c,s+=2}}function hj(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ao(r/Be),e.d=[],n=(r+1)%Be,r<0&&(n+=Be),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Be;n<s;)e.d.push(+t.slice(n,n+=Be));t=t.slice(n),n=Be-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),He&&(e.e>Md||e.e<-Md))throw Error(Jx+r)}else e.s=0,e.e=0,e.d=[0];return e}function De(e,t,r){var n,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Be,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Be),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Be,s=n-Be+o}if(r!==void 0&&(i=Si(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Si(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ct(e),f.length=1,t=t-i-1,f[0]=Si(10,(Be-t%Be)%Be),e.e=Ao(-t/Be)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Si(10,Be-n),f[d]=s>0?(u/Si(10,o-s)%Si(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==wt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=wt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(He&&(e.e>Md||e.e<-Md))throw Error(Jx+ct(e));return e}function wP(e,t){var r,n,s,i,o,l,c,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),He?De(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),s=Math.max(Math.ceil(h/Be),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=wt-1;--c[i],c[s]+=wt}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,He?De(t,h):t):new m(0)}function ta(e,t,r){var n,s=ct(e),i=In(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Is(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Is(-s-1)+i,r&&(n=r-o)>0&&(i+=Is(n))):s>=o?(i+=Is(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Is(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Is(n))),e.s<0?"-"+i:i}function mj(e,t){if(e.length>t)return e.length=t,!0}function jP(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Fi+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return hj(o,i.toString())}else if(typeof i!="string")throw Error(Fi+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Vq.test(i))hj(o,i);else throw Error(Fi+i)}if(s.prototype=ie,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=jP,s.config=s.set=Wq,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Wq(e){if(!e||typeof e!="object")throw Error(sn+"Object expected");var t,r,n,s=["precision",1,Co,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ao(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Fi+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Fi+r+": "+n);return this}var Zx=jP(Qq);Pr=new Zx(1);const Ee=Zx;var Kq=e=>e,_P={"@@functional/placeholder":!0},NP=e=>e===_P,pj=e=>function t(){return arguments.length===0||arguments.length===1&&NP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},SP=(e,t)=>e===1?t:pj(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==_P).length;return i>=e?t(...n):SP(e-i,pj(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>NP(d)?l.shift():d);return t(...u,...l)}))}),nh=e=>SP(e.length,e),yg=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Hq=nh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Gq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Kq;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},vg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),kP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function PP(e){var t;return e===0?t=1:t=Math.floor(new Ee(e).abs().log(10).toNumber())+1,t}function EP(e,t,r){for(var n=new Ee(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}nh((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var CP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},AP=(e,t,r)=>{if(e.lte(0))return new Ee(0);var n=PP(e.toNumber()),s=new Ee(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ee(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new Ee(c.toNumber()):new Ee(Math.ceil(c.toNumber()))},Yq=(e,t,r)=>{var n=new Ee(1),s=new Ee(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ee(10).pow(PP(e)-1),s=new Ee(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ee(Math.floor(e)))}else e===0?s=new Ee(Math.floor((t-1)/2)):r||(s=new Ee(Math.floor(e)));var o=Math.floor((t-1)/2),l=Gq(Hq(c=>s.add(new Ee(c-o).mul(n)).toNumber()),yg);return l(0,t)},TP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ee(0),tickMin:new Ee(0),tickMax:new Ee(0)};var o=AP(new Ee(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new Ee(0):(l=new Ee(t).add(r).div(2),l=l.sub(new Ee(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Ee(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?TP(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ee(c).mul(o)),tickMax:l.add(new Ee(u).mul(o))})};function Xq(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=CP([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...yg(0,n-1).map(()=>1/0)]:[...yg(0,n-1).map(()=>-1/0),l];return t>r?vg(c):c}if(o===l)return Yq(o,n,s);var{step:u,tickMin:d,tickMax:f}=TP(o,l,i,s,0),m=EP(d,f.add(new Ee(.1).mul(u)),u);return t>r?vg(m):m}function Jq(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=CP([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=AP(new Ee(o).sub(i).div(l-1),s,0),u=[...EP(new Ee(i),new Ee(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?vg(u):u}var Zq=kP(Xq),e8=kP(Jq),OP=e=>e.rootProps.maxBarSize,t8=e=>e.rootProps.barGap,DP=e=>e.rootProps.barCategoryGap,r8=e=>e.rootProps.barSize,sh=e=>e.rootProps.stackOffset,ey=e=>e.options.chartName,ty=e=>e.rootProps.syncId,MP=e=>e.rootProps.syncMethod,ry=e=>e.options.eventEmitter,Zn={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Sr={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},ih=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},n8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zn.angleAxisId,includeHidden:!1,name:void 0,reversed:Zn.reversed,scale:Zn.scale,tick:Zn.tick,tickCount:void 0,ticks:void 0,type:Zn.type,unit:void 0},s8={allowDataOverflow:Sr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Sr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sr.scale,tick:Sr.tick,tickCount:Sr.tickCount,ticks:void 0,type:Sr.type,unit:void 0},i8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},a8={allowDataOverflow:Sr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Sr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sr.scale,tick:Sr.tick,tickCount:Sr.tickCount,ticks:void 0,type:"category",unit:void 0},ny=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?i8:n8,sy=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?a8:s8,ah=e=>e.polarOptions,iy=K([ws,js,St],v5),IP=K([ah,iy],(e,t)=>{if(e!=null)return kn(e.innerRadius,t,0)}),$P=K([ah,iy],(e,t)=>{if(e!=null)return kn(e.outerRadius,t,t*.8)}),o8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},zP=K([ah],o8);K([ny,zP],ih);var LP=K([iy,IP,$P],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});K([sy,LP],ih);var l8=K([Te,ah,IP,$P,ws,js],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:kn(o,s,s/2),cy:kn(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Pt=(e,t)=>t,oh=(e,t,r)=>r;function gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gj(Object(r),!0).forEach(function(n){c8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c8(e,t,r){return(t=u8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u8(e){var t=d8(e,"string");return typeof t=="symbol"?t:t+""}function d8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bg=[0,"auto"],jr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ss=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??jr},_r={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kf},xi=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??_r},f8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ay=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??f8},wr=(e,t,r)=>{switch(t){case"xAxis":return Ss(e,r);case"yAxis":return xi(e,r);case"zAxis":return ay(e,r);case"angleAxis":return ny(e,r);case"radiusAxis":return sy(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},h8=(e,t,r)=>{switch(t){case"xAxis":return Ss(e,r);case"yAxis":return xi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kc=(e,t,r)=>{switch(t){case"xAxis":return Ss(e,r);case"yAxis":return xi(e,r);case"angleAxis":return ny(e,r);case"radiusAxis":return sy(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RP=e=>e.graphicalItems.countOfBars>0;function qP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var lh=e=>e.graphicalItems.cartesianItems,m8=K([Pt,oh],qP),FP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Pc=K([lh,wr,m8],FP),UP=e=>e.filter(t=>t.stackId===void 0),p8=K([Pc],UP),BP=e=>e.map(t=>t.data).filter(Boolean).flat(1),g8=K([Pc],BP),QP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},ch=K([g8,Xx],QP),VP=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ht(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ht(s,n)}))):e.map(n=>({value:n})),uh=K([ch,wr,Pc],VP);function WP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ua(e){return e.filter(t=>Fn(t)||t instanceof Date).map(Number).filter(t=>Dr(t)===!1)}function x8(e,t,r){return!r||typeof t!="number"||Dr(t)?[]:r.length?ua(r.flatMap(n=>{var s=Ht(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!zr(i)||!zr(o)))return[t-i,t+o]})):[]}var KP=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(u=>u.dataKey);return[o,{stackedData:I5(e,c,r),graphicalItems:l}]}))},wg=K([ch,Pc,sh],KP),HP=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=R5(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},y8=K([wg,ca,Pt],HP),GP=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>WP(n,d)),u=Ht(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:u,errorDomain:x8(s,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ht(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),v8=K(ch,wr,p8,Pt,GP);function b8(e){var{value:t}=e;if(Fn(t)||t instanceof Date)return t}var w8=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ua(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},j8=(e,t,r)=>{var n=e.map(b8).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&KS(n))?zk(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},oy=e=>{var t;if(e==null||!("domain"in e))return bg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ua(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bg},ly=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},YP=e=>e.referenceElements.dots,To=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),_8=K([YP,Pt,oh],To),XP=e=>e.referenceElements.areas,N8=K([XP,Pt,oh],To),JP=e=>e.referenceElements.lines,S8=K([JP,Pt,oh],To),ZP=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},k8=K(_8,Pt,ZP),eE=(e,t)=>{var r=ua(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},P8=K([N8,Pt],eE),tE=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},E8=K(S8,Pt,tE),C8=K(k8,E8,P8,(e,t,r)=>ly(e,r,t)),A8=K([wr],oy),rE=(e,t,r,n,s)=>{var i=Uq(t,e.allowDataOverflow);return i??Bq(t,ly(r,s,w8(n)),e.allowDataOverflow)},T8=K([wr,A8,y8,v8,C8],rE),O8=[0,1],nE=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,u=mi(t,i);return u&&l==null?zk(0,r.length):c==="category"?j8(n,e,u):s==="expand"?O8:o}},cy=K([wr,Te,ch,uh,sh,Pt,T8],nE),sE=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(bc(i));return l in ul?l:"point"}}},Ec=K([wr,Te,RP,ey,Pt],sE);function D8(e){if(e!=null){if(e in ul)return ul[e]();var t="scale".concat(bc(e));if(t in ul)return ul[t]()}}function uy(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=D8(t);if(s!=null){var i=s.domain(r).range(n);return A5(i),i}}}var iE=(e,t,r)=>{var n=oy(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&xo(e))return Zq(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xo(e))return e8(e,t.tickCount,t.allowDecimals)}},dy=K([cy,kc,Ec],iE),aE=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xo(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},M8=K([wr,cy,dy,Pt],aE),I8=K(uh,wr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ua(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),oE=K(I8,Te,DP,St,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!zr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=kn(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),$8=(e,t)=>{var r=Ss(e,t);return r==null||typeof r.padding!="string"?0:oE(e,"xAxis",t,r.padding)},z8=(e,t)=>{var r=xi(e,t);return r==null||typeof r.padding!="string"?0:oE(e,"yAxis",t,r.padding)},L8=K(Ss,$8,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),R8=K(xi,z8,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),q8=K([St,L8,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),F8=K([St,Te,R8,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Cc=(e,t,r,n)=>{var s;switch(t){case"xAxis":return q8(e,r,n);case"yAxis":return F8(e,r,n);case"zAxis":return(s=ay(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return zP(e);case"radiusAxis":return LP(e,r);default:return}},lE=K([wr,Cc],ih),Oo=K([wr,Ec,M8,lE],uy);K(Pc,Pt,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>WP(t,r)));function cE(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dh=(e,t)=>t,fh=(e,t,r)=>r,U8=K(Nx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(cE)),B8=K(Sx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(cE)),uE=(e,t)=>({width:e.width,height:t.height}),Q8=(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}},dE=K(St,Ss,uE),V8=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},W8=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},K8=K(js,St,U8,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=uE(t,l);o==null&&(o=V8(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),H8=K(ws,St,B8,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=Q8(t,l);o==null&&(o=W8(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),G8=(e,t)=>{var r=St(e),n=Ss(e,t);if(n!=null){var s=K8(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Y8=(e,t)=>{var r=St(e),n=xi(e,t);if(n!=null){var s=H8(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},fE=K(St,xi,(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}}),xj=(e,t,r)=>{switch(t){case"xAxis":return dE(e,r).width;case"yAxis":return fE(e,r).height;default:return}},hE=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=mi(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&KS(c))return c}},fy=K([Te,uh,wr,Pt],hE),mE=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=mi(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},hy=K([Te,uh,kc,Pt],mE),yj=K([Te,h8,Ec,Oo,fy,hy,Cc,dy,Pt],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var u=mi(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),X8=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var u=mi(e,c),{type:d,ticks:f,tickCount:m}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/h:0;p=c==="angleAxis"&&i!=null&&i.length>=2?pr(i[0]-i[1])*2*p:p;var y=f||s;if(y){var x=y.map((v,g)=>{var w=o?o.indexOf(v):v;return{index:g,coordinate:n(w)+p,value:v,offset:p}});return x.filter(v=>!Dr(v.coordinate))}return u&&l?l.map((v,g)=>({coordinate:n(v)+p,value:v,index:g,offset:p})):n.ticks?n.ticks(m).map(v=>({coordinate:n(v)+p,value:v,offset:p})):n.domain().map((v,g)=>({coordinate:n(v)+p,value:o?o[v]:v,index:g,offset:p}))}},pE=K([Te,kc,Ec,Oo,dy,Cc,fy,hy,Pt],X8),J8=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=mi(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?pr(n[0]-n[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},ai=K([Te,kc,Oo,Cc,fy,hy,Pt],J8),Bn=K(wr,Oo,(e,t)=>{if(!(e==null||t==null))return Id(Id({},e),{},{scale:t})}),Z8=K([wr,Ec,cy,lE],uy);K((e,t,r)=>ay(e,r),Z8,(e,t)=>{if(!(e==null||t==null))return Id(Id({},e),{},{scale:t})});var eF=K([Te,Nx,Sx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),gE=e=>e.options.defaultTooltipEventType,xE=e=>e.options.validateTooltipEventTypes;function yE(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function my(e,t){var r=gE(e),n=xE(e);return yE(t,r,n)}function tF(e){return ue(t=>my(t,e))}var vE=(e,t)=>{var r,n=Number(t);if(!(Dr(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},rF=e=>e.tooltip.settings,qs={active:!1,index:null,dataKey:void 0,coordinate:void 0},nF={itemInteraction:{click:qs,hover:qs},axisInteraction:{click:qs,hover:qs},keyboardInteraction:qs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bE=ln({name:"tooltip",initialState:nF,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=os(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:sF,removeTooltipEntrySettings:iF,setTooltipSettingsState:aF,setActiveMouseOverItemIndex:wE,mouseLeaveItem:oF,mouseLeaveChart:jE,setActiveClickItemIndex:lF,setMouseOverAxisIndex:_E,setMouseClickAxisIndex:cF,setSyncInteraction:jg,setKeyboardInteraction:_g}=bE.actions,uF=bE.reducer;function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){dF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dF(e,t,r){return(t=fF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fF(e){var t=hF(e,"string");return typeof t=="symbol"?t:t+""}function hF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mF(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function pF(e){return e.index!=null}var NE=(e,t,r,n)=>{if(t==null)return qs;var s=mF(e,t,r);if(s==null)return qs;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(pF(s)){if(i)return hu(hu({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return hu(hu({},qs),{},{coordinate:s.coordinate})},py=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!zr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},SE=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},kE=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Ac=e=>e.options.tooltipPayloadSearcher,Do=e=>e.tooltip;function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){gF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gF(e,t,r){return(t=xF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xF(e){var t=yF(e,"string");return typeof t=="symbol"?t:t+""}function yF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vF(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bF(e,t){return e??t}var PE=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,h)=>{var p,{dataDefinedOnItem:y,settings:x}=h,v=bF(y,l),g=vF(v,u,d),w=(p=x==null?void 0:x.dataKey)!==null&&p!==void 0?p:n==null?void 0:n.dataKey,_=x==null?void 0:x.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(g)&&!Array.isArray(g[0])&&o==="axis"?j=HS(g,n.dataKey,s):j=i(g,t,c,_),Array.isArray(j))j.forEach(S=>{var P=wj(wj({},x),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});m.push(fw({tooltipEntrySettings:P,dataKey:S.dataKey,payload:S.payload,value:Ht(S.payload,S.dataKey),name:S.name}))});else{var N;m.push(fw({tooltipEntrySettings:x,dataKey:w,payload:j,value:Ht(j,w),name:(N=Ht(j,_))!==null&&N!==void 0?N:x==null?void 0:x.name}))}return m},f)}},Et=e=>{var t=Te(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Mo=e=>e.tooltip.settings.axisId,Rt=e=>{var t=Et(e),r=Mo(e);return kc(e,t,r)},gy=K([Rt,Te,RP,ey,Et],sE),wF=K([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),jF=K([Et,Mo],qP),hh=K([wF,Rt,jF],FP),_F=K([hh],BP),da=K([_F,ca],QP),xy=K([da,Rt,hh],VP),NF=K([Rt],oy),SF=K([da,hh,sh],KP),kF=K([SF,ca,Et],HP),PF=K([hh],UP),EF=K([da,Rt,PF,Et],GP),CF=K([YP,Et,Mo],To),AF=K([CF,Et],ZP),TF=K([XP,Et,Mo],To),OF=K([TF,Et],eE),DF=K([JP,Et,Mo],To),MF=K([DF,Et],tE),IF=K([AF,MF,OF],ly),$F=K([Rt,NF,kF,EF,IF],rE),EE=K([Rt,Te,da,xy,sh,Et,$F],nE),zF=K([EE,Rt,gy],iE),LF=K([Rt,EE,zF,Et],aE),CE=e=>{var t=Et(e),r=Mo(e),n=!1;return Cc(e,t,r,n)},AE=K([Rt,CE],ih),TE=K([Rt,gy,LF,AE],uy),RF=K([Te,xy,Rt,Et],hE),qF=K([Te,xy,Rt,Et],mE),FF=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,u=mi(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?pr(s[0]-s[1])*2*f:f,u&&o?o.map((m,h)=>({coordinate:n(m)+f,value:m,index:h,offset:f})):n.domain().map((m,h)=>({coordinate:n(m)+f,value:i?i[m]:m,index:h,offset:f}))}}},ks=K([Te,Rt,gy,TE,CE,RF,qF,Et],FF),yy=K([gE,xE,rF],(e,t,r)=>yE(r.shared,e,t)),OE=e=>e.tooltip.settings.trigger,vy=e=>e.tooltip.settings.defaultIndex,mh=K([Do,yy,OE,vy],NE),ra=K([mh,da],py),DE=K([ks,ra],vE),ME=K([mh],e=>{if(e)return e.dataKey}),IE=K([Do,yy,OE,vy],kE),UF=K([ws,js,Te,St,ks,vy,IE,Ac],SE),BF=K([mh,UF],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),QF=K([mh],e=>e.active),VF=K([IE,ra,ca,Rt,DE,Ac,yy],PE),WF=K([VF],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(r),!0).forEach(function(n){KF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KF(e,t,r){return(t=HF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HF(e){var t=GF(e,"string");return typeof t=="symbol"?t:t+""}function GF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YF=()=>ue(Rt),XF=()=>{var e=YF(),t=ue(ks),r=ue(TE);return Zl(_j(_j({},e),{},{scale:r}),t)},JF=()=>ue(ey),by=(e,t)=>t,$E=(e,t,r)=>r,wy=(e,t,r,n)=>n,ZF=K(ks,e=>Rf(e,t=>t.coordinate)),jy=K([Do,by,$E,wy],NE),zE=K([jy,da],py),eU=(e,t,r)=>{if(t!=null){var n=Do(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},LE=K([Do,by,$E,wy],kE),$d=K([ws,js,Te,St,ks,wy,LE,Ac],SE),tU=K([jy,$d],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),RE=K(ks,zE,vE),rU=K([LE,zE,ca,Rt,RE,Ac,by],PE),nU=K([jy],e=>({isActive:e.active,activeIndex:e.index})),sU=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=q5(e.chartX,e.chartY,t,r,l);if(c){var u=U5(c,t),d=E5(u,o,i,n,s),f=F5(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function Ng(){return Ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ng.apply(null,arguments)}function Nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nj(Object(r),!0).forEach(function(n){iU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iU(e,t,r){return(t=aU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aU(e){var t=oU(e,"string");return typeof t=="symbol"?t:t+""}function oU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lU(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,m=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var h,p;if(u==="ScatterChart")h=d,p=Cz;else if(u==="BarChart")h=Az(o,d,s,i),p=Ak;else if(o==="radial"){var{cx:y,cy:x,radius:v,startAngle:g,endAngle:w}=Tk(d);h={cx:y,cy:x,startAngle:g,endAngle:w,innerRadius:v,outerRadius:v},p=Dk}else h={points:dL(o,d,s)},p=jk;var _=typeof l=="object"&&"className"in l?l.className:void 0,j=mu(mu(mu(mu({stroke:"#ccc",pointerEvents:"none"},s),h),Pe(l,!1)),{},{payload:f,payloadIndex:m,className:Ne("recharts-tooltip-cursor",_)});return b.isValidElement(l)?b.cloneElement(l,j):b.createElement(p,j)}function cU(e){var t=XF(),r=xk(),n=Yf(),s=JF();return b.createElement(lU,Ng({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var qE=b.createContext(null),uU=()=>b.useContext(qE),FE={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new s(d,f||c,m),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,p=new Array(h);m<h;m++)p[m]=f[m].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,h,p){var y=r?r+u:u;if(!this._events[y])return!1;var x=this._events[y],v=arguments.length,g,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,m),!0;case 5:return x.fn.call(x.context,d,f,m,h),!0;case 6:return x.fn.call(x.context,d,f,m,h,p),!0}for(w=1,g=new Array(v-1);w<v;w++)g[w-1]=arguments[w];x.fn.apply(x.context,g)}else{var _=x.length,j;for(w=0;w<_;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),v){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,d);break;case 3:x[w].fn.call(x[w].context,d,f);break;case 4:x[w].fn.call(x[w].context,d,f,m);break;default:if(!g)for(j=1,g=new Array(v-1);j<v;j++)g[j-1]=arguments[j];x[w].fn.apply(x[w].context,g)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===d&&(!m||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var y=0,x=[],v=p.length;y<v;y++)(p[y].fn!==d||m&&!p[y].once||f&&p[y].context!==f)&&x.push(p[y]);x.length?this._events[h]=x.length===1?x[0]:x:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(FE);var dU=FE.exports;const fU=Qn(dU);var ac=new fU,Sg="recharts.syncEvent.tooltip",Sj="recharts.syncEvent.brush";function UE(e,t){if(t){var r=Number.parseInt(t,10);if(!Dr(r))return e==null?void 0:e[r]}}var hU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},BE=ln({name:"options",initialState:hU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),mU=BE.reducer,{createEventEmitter:pU}=BE.actions;function gU(e){return e.tooltip.syncInteraction}var xU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},QE=ln({name:"chartData",initialState:xU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:kj,setDataStartEndIndexes:yU,setComputedData:MK}=QE.actions,vU=QE.reducer,VE=()=>{};function bU(){var e=ue(ty),t=ue(ry),r=yt(),n=ue(MP),s=ue(ks),i=Yf(),o=kx(),l=ue(c=>c.rootProps.className);b.useEffect(()=>{if(e==null)return VE;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(s!=null){var m;if(typeof n=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},p=n(s,h);m=s[p]}else n==="value"&&(m=s.find(N=>String(N.value)===d.payload.label));var{coordinate:y}=d.payload;if(m==null||d.payload.active===!1||y==null||o==null){r(jg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x,y:v}=y,g=Math.min(x,o.x+o.width),w=Math.min(v,o.y+o.height),_={x:i==="horizontal"?m.coordinate:g,y:i==="horizontal"?w:m.coordinate},j=jg({active:d.payload.active,coordinate:_,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(j)}}};return ac.on(Sg,c),()=>{ac.off(Sg,c)}},[l,r,t,e,n,s,i,o])}function wU(){var e=ue(ty),t=ue(ry),r=yt();b.useEffect(()=>{if(e==null)return VE;var n=(s,i,o)=>{t!==o&&e===s&&r(yU(i))};return ac.on(Sj,n),()=>{ac.off(Sj,n)}},[r,t,e])}function jU(){var e=yt();b.useEffect(()=>{e(pU())},[e]),bU(),wU()}function _U(e,t,r,n,s,i){var o=ue(m=>eU(m,e,t)),l=ue(ry),c=ue(ty),u=ue(MP),d=ue(gU),f=d==null?void 0:d.active;b.useEffect(()=>{if(!f&&c!=null&&l!=null){var m=jg({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ac.emit(Sg,c,m,l)}},[f,r,o,s,n,l,c,u,i])}function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){NU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NU(e,t,r){return(t=SU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SU(e){var t=kU(e,"string");return typeof t=="symbol"?t:t+""}function kU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PU(e){return e.dataKey}function EU(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(oz,t)}var Cj=[],CU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Po.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kg(e){var t=_s(e,CU),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:h,wrapperStyle:p,cursor:y,shared:x,trigger:v,defaultIndex:g,portal:w,axisId:_}=t,j=yt(),N=typeof g=="number"?String(g):g;b.useEffect(()=>{j(aF({shared:x,trigger:v,axisId:_,active:r,defaultIndex:N}))},[j,x,v,_,r,N]);var S=kx(),P=wk(),C=tF(x),{activeIndex:I,isActive:T}=ue(he=>nU(he,C,v,N)),D=ue(he=>rU(he,C,v,N)),z=ue(he=>RE(he,C,v,N)),q=ue(he=>tU(he,C,v,N)),L=D,O=uU(),A=r??T,[k,E]=x3([L,A]),$=C==="axis"?z:void 0;_U(C,v,q,$,I,A);var R=w??O;if(R==null)return null;var U=L??Cj;A||(U=Cj),l&&U.length&&(U=I$(L.filter(he=>he.value!=null&&(he.hide!==!0||t.includeHidden)),d,PU));var J=U.length>0,de=b.createElement(mz,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:A,coordinate:q,hasPayload:J,offset:u,position:f,reverseDirection:m,useTranslate3d:h,viewBox:S,wrapperStyle:p,lastBoundingBox:k,innerRef:E,hasPortalFromProps:!!w},EU(o,Ej(Ej({},t),{},{payload:U,label:$,active:A,coordinate:q,accessibilityLayer:P})));return b.createElement(b.Fragment,null,AN.createPortal(de,R),A&&b.createElement(cU,{cursor:y,tooltipEventType:C,coordinate:q,payload:L,index:I}))}var WE={},KE={},HE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),y()};let m=null;const h=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},n)},p=()=>{m!==null&&(clearTimeout(m),m=null)},y=()=>{p(),o=void 0,l=null},x=()=>{d()},v=function(...g){if(s!=null&&s.aborted)return;o=this,l=g;const w=m==null;h(),c&&w&&d()};return v.schedule=h,v.cancel=y,v.flush=x,s==null||s.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(HE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HE;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const m=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),h=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,y),d)},p=()=>(m.flush(),d);return h.cancel=m.cancel,h.flush=p,h}e.debounce=r})(KE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KE;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(WE);var AU=WE.throttle;const TU=Qn(AU);var kl=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function Aj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aj(Object(r),!0).forEach(function(n){OU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OU(e,t,r){return(t=DU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DU(e){var t=MU(e,"string");return typeof t=="symbol"?t:t+""}function MU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pg=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:m,onResize:h,style:p={}}=e,y=b.useRef(null),x=b.useRef();x.current=h,b.useImperativeHandle(t,()=>y.current);var[v,g]=b.useState({containerWidth:n.width,containerHeight:n.height}),w=b.useCallback((j,N)=>{g(S=>{var P=Math.round(j),C=Math.round(N);return S.containerWidth===P&&S.containerHeight===C?S:{containerWidth:P,containerHeight:C}})},[]);b.useEffect(()=>{var j=C=>{var I,{width:T,height:D}=C[0].contentRect;w(T,D),(I=x.current)===null||I===void 0||I.call(x,T,D)};d>0&&(j=TU(j,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(j),{width:S,height:P}=y.current.getBoundingClientRect();return w(S,P),N.observe(y.current),()=>{N.disconnect()}},[w,d]);var _=b.useMemo(()=>{var{containerWidth:j,containerHeight:N}=v;if(j<0||N<0)return null;kl(Ti(s)||Ti(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),kl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var S=Ti(s)?j:s,P=Ti(i)?N:i;return r&&r>0&&(S?P=S/r:P&&(S=P*r),c&&P>c&&(P=c)),kl(S>0||P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,P,s,i,o,l,r),b.Children.map(u,C=>b.cloneElement(C,{width:S,height:P,style:Nm({width:S,height:P},C.props.style)}))},[r,u,i,c,l,o,v,s]);return b.createElement("div",{id:f?"".concat(f):void 0,className:Ne("recharts-responsive-container",m),style:Nm(Nm({},p),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:y},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),GE=e=>null;GE.displayName="Cell";function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){IU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IU(e,t,r){return(t=$U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $U(e){var t=zU(e,"string");return typeof t=="symbol"?t:t+""}function zU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ba={widthCache:{},cacheCount:0},LU=2e3,RU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Oj="recharts_measurement_span";function qU(e){var t=Eg({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Pl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Po.isSsr)return{width:0,height:0};var n=qU(r),s=JSON.stringify({text:t,copyStyle:n});if(ba.widthCache[s])return ba.widthCache[s];try{var i=document.getElementById(Oj);i||(i=document.createElement("span"),i.setAttribute("id",Oj),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Eg(Eg({},RU),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ba.widthCache[s]=c,++ba.cacheCount>LU&&(ba.cacheCount=0,ba.widthCache={}),c}catch{return{width:0,height:0}}},Dj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,UU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,YE={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},BU=Object.keys(YE),Ia="NaN";function QU(e,t){return e*YE[t]}class ur{static parse(t){var r,[,n,s]=(r=UU.exec(t))!==null&&r!==void 0?r:[];return new ur(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Dr(t)&&(this.unit=""),r!==""&&!FU.test(r)&&(this.num=NaN,this.unit=""),BU.includes(r)&&(this.num=QU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Dr(this.num)}}function XE(e){if(e.includes(Ia))return Ia;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=Dj.exec(t))!==null&&r!==void 0?r:[],o=ur.parse(n??""),l=ur.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Ia;t=t.replace(Dj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=Mj.exec(t))!==null&&u!==void 0?u:[],h=ur.parse(d??""),p=ur.parse(m??""),y=f==="+"?h.add(p):h.subtract(p);if(y.isNaN())return Ia;t=t.replace(Mj,y.toString())}return t}var Ij=/\(([^()]*)\)/;function VU(e){for(var t=e,r;(r=Ij.exec(t))!=null;){var[,n]=r;t=t.replace(Ij,XE(n))}return t}function WU(e){var t=e.replace(/\s+/g,"");return t=VU(t),t=XE(t),t}function KU(e){try{return WU(e)}catch{return Ia}}function Sm(e){var t=KU(e.slice(5,-1));return t===Ia?"":t}var HU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],GU=["dx","dy","angle","className","breakAll"];function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(null,arguments)}function $j(e,t){if(e==null)return{};var r,n,s=YU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JE=/[ \f\n\r\t\v\u2028\u2029]+/,ZE=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Me(t)||(r?s=t.toString().split(""):s=t.toString().split(JE));var i=s.map(l=>({word:l,width:Pl(l,n).width})),o=r?0:Pl(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},XU=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=ae(i),d=o,f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce((D,z)=>{var{word:q,width:L}=z,O=D[D.length-1];if(O&&(n==null||s||O.width+L+r<Number(n)))O.words.push(q),O.width+=L+r;else{var A={words:[q],width:L};D.push(A)}return D},[])},m=f(t),h=I=>I.reduce((T,D)=>T.width>D.width?T:D);if(!u||s)return m;var p=m.length>i||h(m).width>Number(n);if(!p)return m;for(var y="…",x=I=>{var T=d.slice(0,I),D=ZE({breakAll:c,style:l,children:T+y}).wordsWithComputedWidth,z=f(D),q=z.length>i||h(z).width>Number(n);return[q,z]},v=0,g=d.length-1,w=0,_;v<=g&&w<=d.length-1;){var j=Math.floor((v+g)/2),N=j-1,[S,P]=x(N),[C]=x(j);if(!S&&!C&&(v=j+1),S&&C&&(g=j-1),!S&&C){_=P;break}w++}return _||m},zj=e=>{var t=Me(e)?[]:e.toString().split(JE);return[{words:t}]},JU=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Po.isSsr){var l,c,u=ZE({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return zj(n);return XU({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return zj(n)},Lj="#808080",_y=b.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=Lj}=e,d=$j(e,HU),f=b.useMemo(()=>JU({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:m,dy:h,angle:p,className:y,breakAll:x}=d,v=$j(d,GU);if(!Fn(r)||!Fn(n))return null;var g=r+(ae(m)?m:0),w=n+(ae(h)?h:0),_;switch(c){case"start":_=Sm("calc(".concat(i,")"));break;case"middle":_=Sm("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:_=Sm("calc(".concat(f.length-1," * -").concat(s,")"));break}var j=[];if(o){var N=f[0].width,{width:S}=d;j.push("scale(".concat(ae(S)?S/N:1,")"))}return p&&j.push("rotate(".concat(p,", ").concat(g,", ").concat(w,")")),j.length&&(v.transform=j.join(" ")),b.createElement("text",Cg({},Pe(v,!0),{ref:t,x:g,y:w,className:Ne("recharts-text",y),textAnchor:l,fill:u.includes("url")?Lj:u}),f.map((P,C)=>{var I=P.words.join(x?"":" ");return b.createElement("tspan",{x:g,dy:C===0?_:s,key:"".concat(I,"-").concat(C)},I)}))});_y.displayName="Text";var ZU=["offset"],eB=["labelRef"];function Rj(e,t){if(e==null)return{};var r,n,s=tB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qj(Object(r),!0).forEach(function(n){rB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rB(e,t,r){return(t=nB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nB(e){var t=sB(e,"string");return typeof t=="symbol"?t:t+""}function sB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},es.apply(null,arguments)}var iB=e=>{var{value:t,formatter:r}=e,n=Me(e.children)?t:e.children;return typeof r=="function"?r(n):n},Ny=e=>e!=null&&typeof e=="function",aB=(e,t)=>{var r=pr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},oB=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:h}=s,p=(u+d)/2,y=aB(f,m),x=y>=0?1:-1,v,g;n==="insideStart"?(v=f+x*i,g=h):n==="insideEnd"?(v=m-x*i,g=!h):n==="end"&&(v=m+x*i,g=h),g=y<=0?g:!g;var w=It(l,c,p,v),_=It(l,c,p,v+(g?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(g?0:1,`,
    `).concat(_.x,",").concat(_.y),N=Me(e.id)?co("recharts-radial-line-"):e.id;return b.createElement("text",es({},r,{dominantBaseline:"central",className:Ne("recharts-radial-bar-label",o)}),b.createElement("defs",null,b.createElement("path",{id:N,d:j})),b.createElement("textPath",{xlinkHref:"#".concat(N)},t))},lB=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:m}=It(s,i,l+r,d);return{x:f,y:m,textAnchor:f>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(o+l)/2,{x:p,y}=It(s,i,h,d);return{x:p,y,textAnchor:"middle",verticalAnchor:"middle"}},cB=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",h=l>=0?1:-1,p=h*n,y=h>0?"end":"start",x=h>0?"start":"end";if(s==="top"){var v={x:i+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return it(it({},v),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var g={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:m};return it(it({},g),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return it(it({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var _={x:i+l+p,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return it(it({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return s==="insideLeft"?it({x:i+p,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):s==="insideRight"?it({x:i+l-p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},j):s==="insideTop"?it({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:m},j):s==="insideBottom"?it({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):s==="insideTopLeft"?it({x:i+p,y:o+d,textAnchor:x,verticalAnchor:m},j):s==="insideTopRight"?it({x:i+l-p,y:o+d,textAnchor:y,verticalAnchor:m},j):s==="insideBottomLeft"?it({x:i+p,y:o+c-d,textAnchor:x,verticalAnchor:f},j):s==="insideBottomRight"?it({x:i+l-p,y:o+c-d,textAnchor:y,verticalAnchor:f},j):s&&typeof s=="object"&&(ae(s.x)||Ti(s.x))&&(ae(s.y)||Ti(s.y))?it({x:i+kn(s.x,l),y:o+kn(s.y,c),textAnchor:"end",verticalAnchor:"end"},j):it({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},uB=e=>"cx"in e&&ae(e.cx);function kr(e){var{offset:t=5}=e,r=Rj(e,ZU),n=it({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,m=kx(),h=s||m;if(!h||Me(o)&&Me(l)&&!b.isValidElement(c)&&typeof c!="function")return null;if(b.isValidElement(c)){var p=Rj(n,eB);return b.cloneElement(c,p)}var y;if(typeof c=="function"){if(y=b.createElement(c,n),b.isValidElement(y))return y}else y=iB(n);var x=uB(h),v=Pe(n,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return oB(n,y,v);var g=x?lB(n):cB(n,h);return b.createElement(_y,es({ref:f,className:Ne("recharts-label",u)},v,g,{breakAll:d}),y)}kr.displayName="Label";var eC=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:m,left:h,width:p,height:y,clockWise:x,labelViewBox:v}=e;if(v)return v;if(ae(p)&&ae(y)){if(ae(d)&&ae(f))return{x:d,y:f,width:p,height:y};if(ae(m)&&ae(h))return{x:m,y:h,width:p,height:y}}if(ae(d)&&ae(f))return{x:d,y:f,width:0,height:0};if(ae(t)&&ae(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:x};if(e.viewBox)return e.viewBox},dB=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?b.createElement(kr,es({key:"label-implicit"},n)):Fn(e)?b.createElement(kr,es({key:"label-implicit",value:e},n)):b.isValidElement(e)?e.type===kr?b.cloneElement(e,it({key:"label-implicit"},n)):b.createElement(kr,es({key:"label-implicit",content:e},n)):Ny(e)?b.createElement(kr,es({key:"label-implicit",content:e},n)):e&&typeof e=="object"?b.createElement(kr,es({},e,{key:"label-implicit"},n)):null},fB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=eC(t),l=ix(s,kr).map((u,d)=>b.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=dB(t.label,r||o,i);return[c,...l]};kr.parseViewBox=eC;kr.renderCallByParent=fB;var tC={},rC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(rC);var nC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(nC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rC,r=nC,n=Mf;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(tC);var hB=tC.last;const mB=Qn(hB);var pB=["valueAccessor"],gB=["data","dataKey","clockWise","id","textBreakAll"];function zd(){return zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zd.apply(null,arguments)}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(n){xB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xB(e,t,r){return(t=yB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yB(e){var t=vB(e,"string");return typeof t=="symbol"?t:t+""}function vB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bj(e,t){if(e==null)return{};var r,n,s=bB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wB=e=>Array.isArray(e.value)?mB(e.value):e.value;function ri(e){var{valueAccessor:t=wB}=e,r=Bj(e,pB),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=Bj(r,gB);return!n||!n.length?null:b.createElement(Mr,{className:"recharts-label-list"},n.map((u,d)=>{var f=Me(s)?t(u,d):Ht(u&&u.payload,s),m=Me(o)?{}:{id:"".concat(o,"-").concat(d)};return b.createElement(kr,zd({},Pe(u,!0),c,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:kr.parseViewBox(Me(i)?u:Uj(Uj({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}ri.displayName="LabelList";function jB(e,t){return e?e===!0?b.createElement(ri,{key:"labelList-implicit",data:t}):b.isValidElement(e)||Ny(e)?b.createElement(ri,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?b.createElement(ri,zd({data:t},e,{key:"labelList-implicit"})):null:null}function _B(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=ix(n,ri).map((o,l)=>b.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=jB(e.label,t);return[i,...s]}ri.renderCallByParent=_B;function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ag.apply(null,arguments)}var sC=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=Ne("recharts-dot",s);return t===+t&&r===+r&&n===+n?b.createElement("circle",Ag({},Pe(e,!1),nx(e),{className:i,cx:t,cy:r,r:n})):null},NB={radiusAxis:{},angleAxis:{}},SB=ln({name:"polarAxis",initialState:NB,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),kB=SB.reducer,PB={countOfBars:0,cartesianItems:[],polarItems:[]},iC=ln({name:"graphicalItems",initialState:PB,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=os(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=os(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=os(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:EB,removeBar:CB,addCartesianGraphicalItem:AB,replaceCartesianGraphicalItem:TB,removeCartesianGraphicalItem:OB,addPolarGraphicalItem:IK,removePolarGraphicalItem:$K}=iC.actions,DB=iC.reducer;function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qj(Object(r),!0).forEach(function(n){MB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MB(e,t,r){return(t=IB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IB(e){var t=$B(e,"string");return typeof t=="symbol"?t:t+""}function $B(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zB(e){var t=yt(),r=b.useRef(null);return b.useEffect(()=>{var n=Vj(Vj({},e),{},{stackId:mk(e.stackId)});r.current===null?t(AB(n)):r.current!==n&&t(TB({prev:r.current,next:n})),r.current=n},[t,e]),b.useEffect(()=>()=>{r.current&&(t(OB(r.current)),r.current=null)},[t]),null}var aC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(aC);var LB=aC.isPlainObject;const RB=Qn(LB);function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(null,arguments)}var Wj=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},qB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FB=e=>{var t=_s(e,qB),r=b.useRef(),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&s(x)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isUpdateAnimationActive:p}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var y=Ne("recharts-trapezoid",d);return p?b.createElement(ea,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:i,y:o},duration:m,animationEasing:f,isActive:p},x=>{var{upperWidth:v,lowerWidth:g,height:w,x:_,y:j}=x;return b.createElement(ea,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,easing:f},b.createElement("path",Ld({},Pe(t,!0),{className:y,d:Wj(_,j,v,g,w),ref:r})))}):b.createElement("g",null,b.createElement("path",Ld({},Pe(t,!0),{className:y,d:Wj(i,o,l,c,u)})))},UB=["option","shapeType","propTransformer","activeClassName","isActive"];function BB(e,t){if(e==null)return{};var r,n,s=QB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kj(Object(r),!0).forEach(function(n){VB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VB(e,t,r){return(t=WB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HB(e,t){return Rd(Rd({},t),e)}function GB(e,t){return e==="symbols"}function Hj(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(Ak,r);case"trapezoid":return b.createElement(FB,r);case"sector":return b.createElement(Dk,r);case"symbols":if(GB(t))return b.createElement(p2,r);break;default:return null}}function YB(e){return b.isValidElement(e)?e.props:e}function XB(e){var{option:t,shapeType:r,propTransformer:n=HB,activeClassName:s="recharts-active-shape",isActive:i}=e,o=BB(e,UB),l;if(b.isValidElement(t))l=b.cloneElement(t,Rd(Rd({},o),YB(t)));else if(typeof t=="function")l=t(o);else if(RB(t)&&typeof t!="boolean"){var c=n(t,o);l=b.createElement(Hj,{shapeType:r,elementProps:c})}else{var u=o;l=b.createElement(Hj,{shapeType:r,elementProps:u})}return i?b.createElement(Mr,{className:s},l):l}var oC=(e,t)=>{var r=yt();return(n,s)=>i=>{e==null||e(n,s,i),r(wE({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},lC=e=>{var t=yt();return(r,n)=>s=>{e==null||e(r,n,s),t(oF())}},cC=(e,t)=>{var r=yt();return(n,s)=>i=>{e==null||e(n,s,i),r(lF({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function uC(e){var{fn:t,args:r}=e,n=yt(),s=or();return b.useEffect(()=>{if(!s){var i=t(r);return n(sF(i)),()=>{n(iF(i))}}},[t,r,n,s]),null}var JB=()=>{};function dC(e){var{legendPayload:t}=e,r=yt(),n=or();return b.useEffect(()=>n?JB:(r(ez(t)),()=>{r(tz(t))}),[r,n,t]),null}function fC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(co(t)),n=b.useRef(e);return n.current!==e&&(r.current=co(t),n.current=e),r.current}var ZB=K([St],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),e9=K([ZB,ws,js],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),t9=e=>{var t=or();return ue(r=>Bn(r,"xAxis",e,t))},r9=e=>{var t=or();return ue(r=>Bn(r,"yAxis",e,t))},Sy=()=>ue(e9),n9=()=>ue(WF);function Gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(r),!0).forEach(function(n){s9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s9(e,t,r){return(t=i9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i9(e){var t=a9(e,"string");return typeof t=="symbol"?t:t+""}function a9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o9=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=Yj(Yj({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Pe(s,!1)),nx(s)),l;return b.isValidElement(s)?l=b.cloneElement(s,o):typeof s=="function"?l=s(o):l=b.createElement(sC,o),b.createElement(Mr,{className:"recharts-active-dot"},l)};function l9(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=ue(ra),o=n9();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Me(l)?null:o9({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var c9=()=>{var e=yt();return b.useEffect(()=>(e(EB()),()=>{e(CB())})),null},u9=["children"];function d9(e,t){if(e==null)return{};var r,n,s=f9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xj=()=>{},hC=b.createContext({addErrorBar:Xj,removeErrorBar:Xj}),h9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},mC=b.createContext(h9);function pC(e){var{children:t}=e,r=d9(e,u9);return b.createElement(mC.Provider,{value:r},t)}var m9=()=>b.useContext(mC),gC=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:u,barSize:d}=e,[f,m]=b.useState([]),h=b.useCallback(x=>{m(v=>[...v,x])},[m]),p=b.useCallback(x=>{m(v=>v.filter(g=>g!==x))},[m]),y=or();return b.createElement(hC.Provider,{value:{addErrorBar:h,removeErrorBar:p}},b.createElement(zB,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:f,stackId:l,hide:c,barSize:d,isPanorama:y}),t)};function p9(e){var{addErrorBar:t,removeErrorBar:r}=b.useContext(hC);return b.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var g9=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function xC(e,t,r){return(t=x9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x9(e){var t=y9(e,"string");return typeof t=="symbol"?t:t+""}function y9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}function v9(e,t){if(e==null)return{};var r,n,s=b9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function b9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function w9(e){var{direction:t,width:r,dataKey:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=v9(e,g9),u=Pe(c,!1),{data:d,dataPointFormatter:f,xAxisId:m,yAxisId:h,errorBarOffset:p}=m9(),y=t9(m),x=r9(h);if((y==null?void 0:y.scale)==null||(x==null?void 0:x.scale)==null||d==null||t==="x"&&y.type!=="number")return null;var v=d.map(g=>{var{x:w,y:_,value:j,errorVal:N}=f(g,n,t);if(!N)return null;var S=[],P,C;if(Array.isArray(N)?[P,C]=N:P=C=N,t==="x"){var{scale:I}=y,T=_+p,D=T+r,z=T-r,q=I(j-P),L=I(j+C);S.push({x1:L,y1:D,x2:L,y2:z}),S.push({x1:q,y1:T,x2:L,y2:T}),S.push({x1:q,y1:D,x2:q,y2:z})}else if(t==="y"){var{scale:O}=x,A=w+p,k=A-r,E=A+r,$=O(j-P),R=O(j+C);S.push({x1:k,y1:R,x2:E,y2:R}),S.push({x1:A,y1:$,x2:A,y2:R}),S.push({x1:k,y1:$,x2:E,y2:$})}var U="".concat(w+p,"px ").concat(_+p,"px");return b.createElement(Mr,oc({className:"recharts-errorBar",key:"bar-".concat(S.map(J=>"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)))},u),S.map(J=>{var de=s?{transformOrigin:"".concat(J.x1-5,"px")}:void 0;return b.createElement(ea,{from:{transform:"scaleY(0)",transformOrigin:U},to:{transform:"scaleY(1)",transformOrigin:U},begin:i,easing:l,isActive:s,duration:o,key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2),style:{transformOrigin:U}},b.createElement("line",oc({},J,{style:de})))}))});return b.createElement(Mr,{className:"recharts-errorBars"},v)}var yC=b.createContext(void 0);function j9(e){var t=b.useContext(yC);return e??t??"x"}function vC(e){var{direction:t,children:r}=e;return b.createElement(yC.Provider,{value:t},r)}var bC={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function _9(e){var t=j9(e.direction),{width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o}=_s(e,bC);return b.createElement(b.Fragment,null,b.createElement(p9,{dataKey:e.dataKey,direction:t}),b.createElement(w9,oc({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o})))}class wC extends b.Component{render(){return b.createElement(_9,this.props)}}xC(wC,"defaultProps",bC);xC(wC,"displayName","ErrorBar");var N9="Invariant failed";function S9(e,t){throw new Error(N9)}var k9=["x","y"];function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(null,arguments)}function Jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(r),!0).forEach(function(n){P9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P9(e,t,r){return(t=E9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E9(e){var t=C9(e,"string");return typeof t=="symbol"?t:t+""}function C9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A9(e,t){if(e==null)return{};var r,n,s=T9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function T9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function O9(e,t){var{x:r,y:n}=e,s=A9(e,k9),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),m=parseInt(f,10);return nl(nl(nl(nl(nl({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function jC(e){return b.createElement(XB,Tg({shapeType:"rectangle",propTransformer:O9,activeClassName:"recharts-active-bar"},e))}var D9=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(ae(t))return t;var i=ae(n)||Me(n);return i?t(n,s):(i||S9(),r)}};function ky(e,t){var r,n,s=ue(u=>Ss(u,e)),i=ue(u=>xi(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:jr.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:_r.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function _C(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=Sy(),{needClipX:i,needClipY:o,needClip:l}=ky(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=s;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var M9=["onMouseEnter","onMouseLeave","onClick"],I9=["value","background","tooltipPosition"],$9=["onMouseEnter","onClick","onMouseLeave"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(null,arguments)}function Zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zj(Object(r),!0).forEach(function(n){ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ph(e,t,r){return(t=z9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z9(e){var t=L9(e,"string");return typeof t=="symbol"?t:t+""}function L9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Og(e,t){if(e==null)return{};var r,n,s=R9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function R9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var q9=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function F9(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:Wf(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function U9(e){var t=ue(ra),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=Og(i,M9),d=oC(o,n),f=lC(l),m=cC(c,n);if(!s||r==null)return null;var h=Pe(s,!1);return b.createElement(b.Fragment,null,r.map((p,y)=>{var{value:x,background:v,tooltipPosition:g}=p,w=Og(p,I9);if(!v)return null;var _=d(p,y),j=f(p,y),N=m(p,y),S=Vt(Vt(Vt(Vt(Vt({option:s,isActive:String(y)===t},w),{},{fill:"#eee"},v),h),sx(u,p,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return b.createElement(jC,lc({key:"background-bar-".concat(y)},S))}))}function NC(e){var{data:t,props:r,showLabels:n}=e,s=Pe(r,!1),{shape:i,dataKey:o,activeBar:l}=r,c=ue(ra),u=ue(ME),{onMouseEnter:d,onClick:f,onMouseLeave:m}=r,h=Og(r,$9),p=oC(d,o),y=lC(m),x=cC(f,o);return t?b.createElement(b.Fragment,null,t.map((v,g)=>{var w=l&&String(g)===c&&(u==null||o===u),_=w?l:i,j=Vt(Vt(Vt({},s),v),{},{isActive:w,option:_,index:g,dataKey:o});return b.createElement(Mr,lc({className:"recharts-bar-rectangle"},sx(h,v,g),{onMouseEnter:p(v,g),onMouseLeave:y(v,g),onClick:x(v,g),key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(g)}),b.createElement(jC,j))}),n&&ri.renderCallByParent(r,t)):null}function B9(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,m=fC(t,"recharts-bar-"),[h,p]=b.useState(!1),y=b.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),x=b.useCallback(()=>{typeof d=="function"&&d(),p(!0)},[d]);return b.createElement(ea,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:x,key:m},v=>{var{t:g}=v,w=g===1?n:n.map((_,j)=>{var N=f&&f[j];if(N){var S=gn(N.x,_.x),P=gn(N.y,_.y),C=gn(N.width,_.width),I=gn(N.height,_.height);return Vt(Vt({},_),{},{x:S(g),y:P(g),width:C(g),height:I(g)})}if(s==="horizontal"){var T=gn(0,_.height),D=T(g);return Vt(Vt({},_),{},{y:_.y+_.height-D,height:D})}var z=gn(0,_.width),q=z(g);return Vt(Vt({},_),{},{width:q})});return g>0&&(r.current=w),b.createElement(Mr,null,b.createElement(NC,{props:t,data:w,showLabels:!h}))})}function Q9(e){var{data:t,isAnimationActive:r}=e,n=b.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?b.createElement(B9,{previousRectanglesRef:n,props:e}):b.createElement(NC,{props:e,data:t,showLabels:!0})}var SC=0,V9=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ht(e,t)}};class W9 extends b.PureComponent{constructor(){super(...arguments),ph(this,"id",co("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u,layout:d}=this.props;if(t)return null;var f=Ne("recharts-bar",s),m=Me(u)?this.id:u;return b.createElement(Mr,{className:f},l&&b.createElement("defs",null,b.createElement(_C,{clipPathId:m,xAxisId:i,yAxisId:o})),b.createElement(Mr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(m,")"):null},b.createElement(U9,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),b.createElement(Q9,this.props)),b.createElement(vC,{direction:d==="horizontal"?"y":"x"},this.props.children))}}var kC={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Po.isSsr,legendType:"rect",minPointSize:SC,xAxisId:0,yAxisId:0};function K9(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=_s(e,kC),{needClip:f}=ky(t,r),m=Yf(),h=or(),p=b.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:mk(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),y=ix(e.children,GE),x=ue(w=>w7(w,t,r,h,p,y));if(m!=="vertical"&&m!=="horizontal")return null;var v,g=x==null?void 0:x[0];return g==null||g.height==null||g.width==null?v=0:v=m==="vertical"?g.height/2:g.width/2,b.createElement(pC,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:V9,errorBarOffset:v},b.createElement(W9,lc({},e,{layout:m,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function H9(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:m,cells:h}=e,p=t==="horizontal"?l:o,y=d?p.scale.domain():null,x=$5({numericAxis:p});return f.map((v,g)=>{var w,_,j,N,S,P;d?w=T5(d[g],y):(w=Ht(v,r),Array.isArray(w)||(w=[x,w]));var C=D9(n,SC)(w[1],g);if(t==="horizontal"){var I,[T,D]=[l.scale(w[0]),l.scale(w[1])];_=cw({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:v,index:g}),j=(I=D??T)!==null&&I!==void 0?I:void 0,N=s.size;var z=T-D;if(S=Dr(z)?0:z,P={x:_,y:m.top,width:N,height:m.height},Math.abs(C)>0&&Math.abs(S)<Math.abs(C)){var q=pr(S||C)*(Math.abs(C)-Math.abs(S));j-=q,S+=q}}else{var[L,O]=[o.scale(w[0]),o.scale(w[1])];if(_=L,j=cw({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:v,index:g}),N=O-L,S=s.size,P={x:m.left,y:j,width:m.width,height:S},Math.abs(C)>0&&Math.abs(N)<Math.abs(C)){var A=pr(N||C)*(Math.abs(C)-Math.abs(N));N+=A}}var k=Vt(Vt({},v),{},{x:_,y:j,width:N,height:S,value:d?w:w[1],payload:v,background:P,tooltipPosition:{x:_+N/2,y:j+S/2}},h&&h[g]&&h[g].props);return k})}class qd extends b.PureComponent{render(){return b.createElement(gC,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},b.createElement(c9,null),b.createElement(dC,{legendPayload:q9(this.props)}),b.createElement(uC,{fn:F9,args:this.props}),b.createElement(K9,this.props))}}ph(qd,"displayName","Bar");ph(qd,"defaultProps",kC);function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(n){G9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G9(e,t,r){return(t=Y9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y9(e){var t=X9(e,"string");return typeof t=="symbol"?t:t+""}function X9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J9=(e,t)=>t,Z9=(e,t,r)=>r,e7=(e,t,r,n)=>n,Py=(e,t,r,n,s)=>s,t7=(e,t,r,n,s)=>s.maxBarSize,r7=(e,t,r,n,s,i)=>i,t1=(e,t,r)=>{var n=r??e;if(!Me(n))return kn(n,t,0)},n7=K([Te,lh,J9,Z9,e7],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),s7=(e,t,r,n)=>{var s=Te(e);return s==="horizontal"?wg(e,"yAxis",r,n):wg(e,"xAxis",t,n)},i7=(e,t,r)=>{var n=Te(e);return n==="horizontal"?xj(e,"xAxis",t):xj(e,"yAxis",r)};function a7(e){return e.stackId!=null&&e.dataKey!=null}var o7=(e,t,r)=>{var n={},s=e.filter(a7),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,m=f.map(p=>p.dataKey),h=t1(t,r,f[0].barSize);return{stackId:d,dataKeys:m,barSize:h}}),c=i.map(u=>{var d=[u.dataKey].filter(m=>m!=null),f=t1(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},l7=K([n7,r8,i7],o7),c7=(e,t,r,n,s)=>{var i,o,l=Te(e),c=OP(e),{maxBarSize:u}=s,d=Me(u)?c:u,f,m;return l==="horizontal"?(f=Bn(e,"xAxis",t,n),m=ai(e,"xAxis",t,n)):(f=Bn(e,"yAxis",r,n),m=ai(e,"yAxis",r,n)),(i=(o=Zl(f,m,!0))!==null&&o!==void 0?o:d)!==null&&i!==void 0?i:0},PC=(e,t,r,n)=>{var s=Te(e),i,o;return s==="horizontal"?(i=Bn(e,"xAxis",t,n),o=ai(e,"xAxis",t,n)):(i=Bn(e,"yAxis",r,n),o=ai(e,"yAxis",r,n)),Zl(i,o)};function u7(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=kn(e,r,0,!0),l,c=[];if(zr(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((v,g)=>v+(g.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var m=(r-f)/2>>0,h={offset:m-o,size:0};l=n.reduce((v,g)=>{var w,_={stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(w=g.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return h=j[j.length-1].position,j},c)}else{var p=kn(t,r,0,!0);r-2*p-(i-1)*o<=0&&(o=0);var y=(r-2*p-(i-1)*o)/i;y>1&&(y>>=0);var x=zr(s)?Math.min(y,s):y;l=n.reduce((v,g,w)=>[...v,{stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:p+(y+o)*w+(y-x)/2,size:x}}],c)}return l}}var d7=(e,t,r,n,s,i,o)=>{var l=Me(o)?t:o,c=u7(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>pu(pu({},u),{},{position:pu(pu({},u.position),{},{offset:u.position.offset-s/2})}))),c},f7=K([l7,OP,t8,DP,c7,PC,t7],d7),h7=(e,t,r,n)=>Bn(e,"xAxis",t,n),m7=(e,t,r,n)=>Bn(e,"yAxis",r,n),p7=(e,t,r,n)=>ai(e,"xAxis",t,n),g7=(e,t,r,n)=>ai(e,"yAxis",r,n),x7=K([f7,Py],(e,t)=>{if(e!=null){var r=e.find(n=>n.stackId===t.stackId&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),y7=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:s}=n;if(s){var i=s.find(o=>o.key===t.dataKey);return i}}}}},v7=K([lh,Py],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),b7=K([s7,Py],y7),w7=K([St,h7,m7,p7,g7,x7,Te,Xx,PC,b7,v7,r7],(e,t,r,n,s,i,o,l,c,u,d,f)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=l;if(!(d==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||s==null||c==null)){var{data:y}=d,x;if(y!=null&&y.length>0?x=y:x=m==null?void 0:m.slice(h,p+1),x!=null)return H9({layout:o,barSettings:d,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:u,displayedData:x,offset:e,cells:f})}}),j7=e=>{var{chartData:t}=e,r=yt(),n=or();return b.useEffect(()=>n?()=>{}:(r(kj(t)),()=>{r(kj(void 0))}),[t,r,n]),null},r1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},_7=ln({name:"brush",initialState:r1,reducers:{setBrushSettings(e,t){return t.payload==null?r1:t.payload}}}),N7=_7.reducer;function S7(e,t,r){return(t=k7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k7(e){var t=P7(e,"string");return typeof t=="symbol"?t:t+""}function P7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ey{static create(t){return new Ey(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}S7(Ey,"EPS",1e-4);function E7(e){return(e%180+180)%180}var C7=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=E7(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},A7={dots:[],areas:[],lines:[]},T7=ln({name:"referenceElements",initialState:A7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=os(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=os(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=os(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),O7=T7.reducer,D7=b.createContext(void 0),M7=e=>{var{children:t}=e,[r]=b.useState("".concat(co("recharts"),"-clip")),n=Sy();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return b.createElement(D7.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function km(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function EC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function I7(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return C7(n,r)}function $7(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Fd(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function z7(e,t){return EC(e,t+1)}function L7(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:EC(n,u)};var y=c,x,v=()=>(x===void 0&&(x=r(p,y)),x),g=p.coordinate,w=c===0||Fd(e,g,v,d,l);w||(c=0,d=o,u+=1),w&&(d=g+e*(v()/2+s),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function n1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n1(Object(r),!0).forEach(function(n){R7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R7(e,t,r){return(t=q7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U7(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(m){var h=i[m],p,y=()=>(p===void 0&&(p=r(h,m)),p);if(m===o-1){var x=e*(h.coordinate+e*y()/2-c);i[m]=h=Bt(Bt({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else i[m]=h=Bt(Bt({},h),{},{tickCoord:h.coordinate});var v=Fd(e,h.tickCoord,y,l,c);v&&(c=h.tickCoord-e*(y()/2+s),i[m]=Bt(Bt({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function B7(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=Bt(Bt({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=Fd(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+s),o[l-1]=Bt(Bt({},d),{},{isShow:!0}))}for(var p=i?l-1:l,y=function(g){var w=o[g],_,j=()=>(_===void 0&&(_=r(w,g)),_);if(g===0){var N=e*(w.coordinate-e*j()/2-c);o[g]=w=Bt(Bt({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[g]=w=Bt(Bt({},w),{},{tickCoord:w.coordinate});var S=Fd(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+s),o[g]=Bt(Bt({},w),{},{isShow:!0}))},x=0;x<p;x++)y(x);return o}function Cy(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(ae(c)||Po.isSsr){var m;return(m=z7(s,ae(c)?c:0))!==null&&m!==void 0?m:[]}var h=[],p=l==="top"||l==="bottom"?"width":"height",y=d&&p==="width"?Pl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return p==="width"?I7(Pl(j,{fontSize:t,letterSpacing:r}),y,f):Pl(j,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?pr(s[1].coordinate-s[0].coordinate):1,g=$7(i,v,p);return c==="equidistantPreserveStart"?L7(v,g,x,s,o):(c==="preserveStart"||c==="preserveStartEnd"?h=B7(v,g,x,s,o,c==="preserveStartEnd"):h=U7(v,g,x,s,o),h.filter(w=>w.isShow))}var Q7=["viewBox"],V7=["viewBox"];function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$a.apply(null,arguments)}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){Ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i1(e,t){if(e==null)return{};var r,n,s=W7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function W7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ay(e,t,r){return(t=K7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K7(e){var t=H7(e,"string");return typeof t=="symbol"?t:t+""}function H7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class yi extends b.Component{constructor(t){super(t),this.tickRefs=b.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=i1(t,Q7),i=this.props,{viewBox:o}=i,l=i1(i,V7);return!km(n,o)||!km(s,l)||!km(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,m,h,p,y,x=c?-1:1,v=t.tickSize||l,g=ae(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,h=n+ +!c*i,m=h-x*v,y=m-x*u,p=g;break;case"left":m=h=t.coordinate,f=r+ +!c*s,d=f-x*v,p=d-x*u,y=g;break;case"right":m=h=t.coordinate,f=r+ +c*s,d=f+x*v,p=d+x*u,y=g;break;default:d=f=t.coordinate,h=n+ +c*i,m=h+x*v,y=m+x*u,p=g;break}return{line:{x1:d,y1:m,x2:f,y2:h},tick:{x:p,y}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=ft(ft(ft({},Pe(this.props,!1)),Pe(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=ft(ft({},c),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=ft(ft({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+s})}return b.createElement("line",$a({},c,{className:Ne("recharts-cartesian-axis-line",Xi(l,"className"))}))}static renderTickItem(t,r,n){var s,i=Ne(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))s=b.cloneElement(t,ft(ft({},r),{},{className:i}));else if(typeof t=="function")s=t(ft(ft({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Ne(o,t.className)),s=b.createElement(_y,$a({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,u=Cy(ft(ft({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=Pe(this.props,!1),h=Pe(o,!1),p=ft(ft({},m),{},{fill:"none"},Pe(s,!1)),y=u.map((x,v)=>{var{line:g,tick:w}=this.getTickLineCoord(x),_=ft(ft(ft(ft({textAnchor:d,verticalAnchor:f},m),{},{stroke:"none",fill:i},h),w),{},{index:v,payload:x,visibleTicksCount:u.length,tickFormatter:l});return b.createElement(Mr,$a({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},sx(this.props,x,v)),s&&b.createElement("line",$a({},p,g,{className:Ne("recharts-cartesian-axis-tick-line",Xi(s,"className"))})),o&&yi.renderTickItem(o,_,"".concat(typeof l=="function"?l(x.value,v):x.value).concat(c||"")))});return y.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},y):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:b.createElement(Mr,{className:Ne("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),kr.renderCallByParent(this.props))}}Ay(yi,"displayName","CartesianAxis");Ay(yi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var G7=["x1","y1","x2","y2","key"],Y7=["offset"],X7=["xAxisId","yAxisId"],J7=["xAxisId","yAxisId"];function a1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(r),!0).forEach(function(n){Z7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z7(e,t,r){return(t=eQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQ(e){var t=tQ(e,"string");return typeof t=="symbol"?t:t+""}function tQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ii.apply(null,arguments)}function Ud(e,t){if(e==null)return{};var r,n,s=rQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return b.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function CC(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=Ud(t,G7),u=Pe(c,!1),d=Ud(u,Y7);r=b.createElement("line",Ii({},d,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function sQ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Ud(e,X7),o=s.map((l,c)=>{var u=Wt(Wt({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return CC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function iQ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Ud(e,J7),o=s.map((l,c)=>{var u=Wt(Wt({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return CC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function aQ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?s+o-f:u[m+1]-f;if(p<=0)return null;var y=m%t.length;return b.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:p,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function oQ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?s+o-f:u[m+1]-f;if(p<=0)return null;var y=m%r.length;return b.createElement("rect",{key:"react-".concat(m),x:f,y:i,width:p,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var lQ=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return fk(Cy(Wt(Wt(Wt({},yi.defaultProps),r),{},{ticks:hk(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},cQ=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return fk(Cy(Wt(Wt(Wt({},yi.defaultProps),r),{},{ticks:hk(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},uQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Bd(e){var t=yk(),r=vk(),n=xk(),s=Wt(Wt({},_s(e,uQ)),{},{x:ae(e.x)?e.x:n.left,y:ae(e.y)?e.y:n.top,width:ae(e.width)?e.width:n.width,height:ae(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:h}=s,p=or(),y=ue(C=>yj(C,"xAxis",i,p)),x=ue(C=>yj(C,"yAxis",o,p));if(!ae(u)||u<=0||!ae(d)||d<=0||!ae(l)||l!==+l||!ae(c)||c!==+c)return null;var v=s.verticalCoordinatesGenerator||lQ,g=s.horizontalCoordinatesGenerator||cQ,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof g=="function"){var j=m&&m.length,N=g({yAxis:x?Wt(Wt({},x),{},{ticks:j?m:x.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);kl(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var S=h&&h.length,P=v({xAxis:y?Wt(Wt({},y),{},{ticks:S?h:y.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);kl(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(_=P)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(nQ,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),b.createElement(aQ,Ii({},s,{horizontalPoints:w})),b.createElement(oQ,Ii({},s,{verticalPoints:_})),b.createElement(sQ,Ii({},s,{offset:n,horizontalPoints:w,xAxis:y,yAxis:x})),b.createElement(iQ,Ii({},s,{offset:n,verticalPoints:_,xAxis:y,yAxis:x})))}Bd.displayName="CartesianGrid";var AC=(e,t,r,n)=>Bn(e,"xAxis",t,n),TC=(e,t,r,n)=>ai(e,"xAxis",t,n),OC=(e,t,r,n)=>Bn(e,"yAxis",r,n),DC=(e,t,r,n)=>ai(e,"yAxis",r,n),dQ=K([Te,AC,OC,TC,DC],(e,t,r,n,s)=>mi(e,"xAxis")?Zl(t,n,!1):Zl(r,s,!1)),fQ=(e,t,r,n,s)=>s,hQ=K([lh,fQ],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),mQ=K([Te,AC,OC,TC,DC,hQ,dQ,Xx],(e,t,r,n,s,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:f,data:m}=i,h;if(m!=null&&m.length>0?h=m:h=c==null?void 0:c.slice(u,d+1),h!=null)return DQ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:o,displayedData:h})}}),pQ=["type","layout","connectNulls","needClip"],gQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function MC(e,t){if(e==null)return{};var r,n,s=xQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function o1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(r),!0).forEach(function(n){gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gh(e,t,r){return(t=yQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yQ(e){var t=vQ(e,"string");return typeof t=="symbol"?t:t+""}function vQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}var bQ=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function wQ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Wf(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var IC=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function jQ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var _Q=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return IC(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...jQ(r,s),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function NQ(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Ne("recharts-line-dot",typeof e!="boolean"?e.className:"");r=b.createElement(sC,yo({},t,{className:n}))}return r}function SQ(e,t){return e==null?!1:t?!0:e.length===1}function kQ(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!SQ(r,s))return null;var l=YS(s),c=Pe(n,!1),u=Pe(s,!0),d=r.map((m,h)=>{var p=xn(xn(xn({key:"dot-".concat(h),r:3},c),u),{},{index:h,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return NQ(s,p)}),f={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return b.createElement(Mr,yo({className:"recharts-line-dots",key:"dots"},f),d)}function Dg(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=i,f=MC(i,pQ),m=xn(xn({},Pe(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:l,layout:c,connectNulls:u,strokeDasharray:s??i.strokeDasharray});return b.createElement(b.Fragment,null,(n==null?void 0:n.length)>1&&b.createElement(jk,yo({},m,{pathRef:r})),b.createElement(kQ,{points:n,clipPathId:t,props:i}),o&&ri.renderCallByParent(i,n))}function PQ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function EQ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:h,height:p,onAnimationEnd:y,onAnimationStart:x}=r,v=s.current,g=fC(r,"recharts-line-"),[w,_]=b.useState(!1),j=b.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),N=b.useCallback(()=>{typeof x=="function"&&x(),_(!0)},[x]),S=PQ(n.current),P=i.current;return b.createElement(ea,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:j,onAnimationStart:N,key:g},C=>{var{t:I}=C,T=gn(P,S+P),D=Math.min(T(I),S),z;if(l){var q="".concat(l).split(/[,\s]+/gim).map(A=>parseFloat(A));z=_Q(D,S,q)}else z=IC(S,D);if(v){var L=v.length/o.length,O=I===1?o:o.map((A,k)=>{var E=Math.floor(k*L);if(v[E]){var $=v[E],R=gn($.x,A.x),U=gn($.y,A.y);return xn(xn({},A),{},{x:R(I),y:U(I)})}if(m){var J=gn(h*2,A.x),de=gn(p/2,A.y);return xn(xn({},A),{},{x:J(I),y:de(I)})}return xn(xn({},A),{},{x:A.x,y:A.y})});return s.current=O,b.createElement(Dg,{props:r,points:O,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})}return I>0&&S>0&&(s.current=o,i.current=D),b.createElement(Dg,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})})}function CQ(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=b.useRef(null),o=b.useRef(0),l=b.useRef(null),c=i.current;return s&&n&&n.length&&c!==n?b.createElement(EQ,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):b.createElement(Dg,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var AQ=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ht(e.payload,t)});class TQ extends b.Component{constructor(){super(...arguments),gh(this,"id",co("recharts-line-"))}render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:f,id:m,needClip:h,layout:p}=this.props;if(r)return null;var y=Ne("recharts-line",i),x=Me(m)?this.id:m,{r:v=3,strokeWidth:g=2}=(t=Pe(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=YS(n),_=v*2+g;return b.createElement(b.Fragment,null,b.createElement(Mr,{className:y},h&&b.createElement("defs",null,b.createElement(_C,{clipPathId:x,xAxisId:o,yAxisId:l}),!w&&b.createElement("clipPath",{id:"clipPath-dots-".concat(x)},b.createElement("rect",{x:u-_/2,y:c-_/2,width:d+_,height:f+_}))),b.createElement(CQ,{props:this.props,clipPathId:x}),b.createElement(vC,{direction:p==="horizontal"?"y":"x"},b.createElement(pC,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:AQ,errorBarOffset:0},this.props.children))),b.createElement(l9,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var $C={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Po.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function OQ(e){var t=_s(e,$C),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:h,yAxisId:p}=t,y=MC(t,gQ),{needClip:x}=ky(h,p),{height:v,width:g,x:w,y:_}=Sy(),j=Yf(),N=or(),S=b.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),P=ue(C=>mQ(C,h,p,N,S));return j!=="horizontal"&&j!=="vertical"?null:b.createElement(TQ,yo({},y,{connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:h,yAxisId:p,points:P,layout:j,height:v,width:g,left:w,top:_,needClip:x}))}function DQ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=Ht(u,o);return t==="horizontal"?{x:lw({axis:r,ticks:s,bandSize:l,entry:u,index:d}),y:Me(f)?null:n.scale(f),value:f,payload:u}:{x:Me(f)?null:r.scale(f),y:lw({axis:n,ticks:i,bandSize:l,entry:u,index:d}),value:f,payload:u}})}class xh extends b.PureComponent{render(){return b.createElement(gC,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},b.createElement(dC,{legendPayload:bQ(this.props)}),b.createElement(uC,{fn:wQ,args:this.props}),b.createElement(OQ,this.props))}}gh(xh,"displayName","Line");gh(xh,"defaultProps",$C);function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){MQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=$Q(e,"string");return typeof t=="symbol"?t:t+""}function $Q(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zQ={xAxis:{},yAxis:{},zAxis:{}},zC=ln({name:"cartesianAxis",initialState:zQ,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=c1(c1({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:LQ,removeXAxis:RQ,addYAxis:qQ,removeYAxis:FQ,addZAxis:zK,removeZAxis:LK,updateYAxisWidth:UQ}=zC.actions,BQ=zC.reducer,QQ=["children"],VQ=["dangerouslySetInnerHTML","ticks"];function LC(e,t,r){return(t=WQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WQ(e){var t=KQ(e,"string");return typeof t=="symbol"?t:t+""}function KQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mg.apply(null,arguments)}function RC(e,t){if(e==null)return{};var r,n,s=HQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GQ(e){var t=yt(),r=b.useMemo(()=>{var i=RC(e,QQ);return i},[e]),n=ue(i=>Ss(i,r.id)),s=r===n;return b.useEffect(()=>(t(LQ(r)),()=>{t(RQ(r))}),[r,t]),s?e.children:null}var YQ=e=>{var{xAxisId:t,className:r}=e,n=ue(gk),s=or(),i="xAxis",o=ue(f=>Oo(f,i,t,s)),l=ue(f=>pE(f,i,t,s)),c=ue(f=>dE(f,t)),u=ue(f=>G8(f,t));if(c==null||u==null)return null;var d=RC(e,VQ);return b.createElement(yi,Mg({},d,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:Ne("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},XQ=e=>{var t,r,n,s,i;return b.createElement(GQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},b.createElement(YQ,e))};class cc extends b.Component{render(){return b.createElement(XQ,this.props)}}LC(cc,"displayName","XAxis");LC(cc,"defaultProps",{allowDataOverflow:jr.allowDataOverflow,allowDecimals:jr.allowDecimals,allowDuplicatedCategory:jr.allowDuplicatedCategory,height:jr.height,hide:!1,mirror:jr.mirror,orientation:jr.orientation,padding:jr.padding,reversed:jr.reversed,scale:jr.scale,tickCount:jr.tickCount,type:jr.type,xAxisId:0});var JQ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},ZQ=["dangerouslySetInnerHTML","ticks"];function qC(e,t,r){return(t=eV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eV(e){var t=tV(e,"string");return typeof t=="symbol"?t:t+""}function tV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ig.apply(null,arguments)}function rV(e,t){if(e==null)return{};var r,n,s=nV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sV(e){var t=yt();return b.useEffect(()=>(t(qQ(e)),()=>{t(FQ(e))}),[e,t]),null}var iV=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=b.useRef(null),l=b.useRef(null),c=ue(gk),u=or(),d=yt(),f="yAxis",m=ue(v=>Oo(v,f,r,u)),h=ue(v=>fE(v,r)),p=ue(v=>Y8(v,r)),y=ue(v=>pE(v,f,r,u));if(b.useLayoutEffect(()=>{var v;if(!(s!=="auto"||!h||Ny(i)||b.isValidElement(i))){var g=o.current,w=g==null||(v=g.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:_,tickMargin:j}=g.props,N=JQ({ticks:w,label:l.current,labelGapWithTick:5,tickSize:_,tickMargin:j});Math.round(h.width)!==Math.round(N)&&d(UQ({id:r,width:N}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h==null?void 0:h.width,h,d,i,r,s]),h==null||p==null)return null;var x=rV(e,ZQ);return b.createElement(yi,Ig({},x,{ref:o,labelRef:l,scale:m,x:p.x,y:p.y,width:h.width,height:h.height,className:Ne("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:y}))},aV=e=>{var t,r,n,s,i;return b.createElement(b.Fragment,null,b.createElement(sV,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),b.createElement(iV,e))},oV={allowDataOverflow:_r.allowDataOverflow,allowDecimals:_r.allowDecimals,allowDuplicatedCategory:_r.allowDuplicatedCategory,hide:!1,mirror:_r.mirror,orientation:_r.orientation,padding:_r.padding,reversed:_r.reversed,scale:_r.scale,tickCount:_r.tickCount,type:_r.type,width:_r.width,yAxisId:0};class uc extends b.Component{render(){return b.createElement(aV,this.props)}}qC(uc,"displayName","YAxis");qC(uc,"defaultProps",oV);var lV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=b;function cV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uV=typeof Object.is=="function"?Object.is:cV,dV=Tc.useSyncExternalStore,fV=Tc.useRef,hV=Tc.useEffect,mV=Tc.useMemo,pV=Tc.useDebugValue;lV.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=fV(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=mV(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return f=p}return f=h}if(p=f,uV(d,h))return p;var y=n(h);return s!==void 0&&s(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=dV(e,i[0],i[1]);return hV(function(){o.hasValue=!0,o.value=l},[l]),pV(l),l};function gV(e){e()}function xV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var u1={notify(){},get:()=>[]};function yV(e,t){let r,n=u1,s=0,i=!1;function o(y){d();const x=n.subscribe(y);let v=!1;return()=>{v||(v=!0,x(),f())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=xV())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=u1)}function m(){i||(i=!0,d())}function h(){i&&(i=!1,f())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:h,getListeners:()=>n};return p}var vV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bV=vV(),wV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jV=wV(),_V=()=>bV||jV?b.useLayoutEffect:b.useEffect,NV=_V(),Pm=Symbol.for("react-redux-context"),Em=typeof globalThis<"u"?globalThis:{};function SV(){if(!b.createContext)return{};const e=Em[Pm]??(Em[Pm]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var kV=SV();function PV(e){const{children:t,context:r,serverState:n,store:s}=e,i=b.useMemo(()=>{const c=yV(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=b.useMemo(()=>s.getState(),[s]);NV(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||kV;return b.createElement(l.Provider,{value:i},t)}var EV=PV,CV=(e,t)=>t,Ty=K([CV,Te,l8,Et,AE,ks,ZF,St],sU),Oy=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},FC=nn("mouseClick"),UC=wc();UC.startListening({actionCreator:FC,effect:(e,t)=>{var r=e.payload,n=Ty(t.getState(),Oy(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(cF({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var $g=nn("mouseMove"),BC=wc();BC.startListening({actionCreator:$g,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=my(n,n.tooltip.settings.shared),i=Ty(n,Oy(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(_E({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(jE()))}});function AV(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var d1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},QC=ln({name:"rootProps",initialState:d1,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:d1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),TV=QC.reducer,{updateOptions:OV}=QC.actions,DV=ln({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),MV=DV.reducer,VC=nn("keyDown"),WC=nn("focus"),Dy=wc();Dy.startListening({actionCreator:VC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(py(s,da(r))),l=ks(r);if(i==="Enter"){var c=$d(r,"axis","hover",String(s.index));t.dispatch(_g({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=eF(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=o+f*d;if(!(l==null||m>=l.length||m<0)){var h=$d(r,"axis","hover",String(m));t.dispatch(_g({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});Dy.startListening({actionCreator:WC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=$d(r,"axis","hover",String(i));t.dispatch(_g({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ur=nn("externalEvent"),KC=wc();KC.startListening({actionCreator:Ur,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:BF(r),activeDataKey:ME(r),activeIndex:ra(r),activeLabel:DE(r),activeTooltipIndex:ra(r),isTooltipActive:QF(r)};e.payload.handler(n,e.payload.reactEvent)}}});var IV=K([Do],e=>e.tooltipItemPayloads),$V=K([IV,Ac,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),HC=nn("touchMove"),GC=wc();GC.startListening({actionCreator:HC,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=my(n,n.tooltip.settings.shared);if(s==="axis"){var i=Ty(n,Oy({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(_E({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Q5),d=(o=c.getAttribute(V5))!==null&&o!==void 0?o:void 0,f=$V(t.getState(),u,d);t.dispatch(wE({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var zV=B2({brush:N7,cartesianAxis:BQ,chartData:vU,graphicalItems:DB,layout:m5,legend:rz,options:mU,polarAxis:kB,polarOptions:MV,referenceElements:O7,rootProps:TV,tooltip:uF}),LV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return R3({reducer:zV,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([UC.middleware,BC.middleware,Dy.middleware,KC.middleware,GC.middleware]),devTools:{serialize:{replacer:AV},name:"recharts-".concat(r)}})};function RV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=or(),i=b.useRef(null);if(s)return r;i.current==null&&(i.current=LV(t,n));var o=gx;return b.createElement(EV,{context:o,store:i.current},r)}function qV(e){var{layout:t,width:r,height:n,margin:s}=e,i=yt(),o=or();return b.useEffect(()=>{o||(i(d5(t)),i(f5({width:r,height:n})),i(u5(s)))},[i,o,t,r,n,s]),null}function FV(e){var t=yt();return b.useEffect(()=>{t(OV(e))},[t,e]),null}var UV=["children"];function BV(e,t){if(e==null)return{};var r,n,s=QV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qd(){return Qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qd.apply(null,arguments)}var VV={width:"100%",height:"100%"},WV=b.forwardRef((e,t)=>{var r=yk(),n=vk(),s=wk();if(!wd(r)||!wd(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0,b.createElement(XS,Qd({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:VV,ref:t}),i)}),KV=e=>{var{children:t}=e,r=ue(Gf);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return b.createElement(XS,{width:n,height:s,x:o,y:i},t)},f1=b.forwardRef((e,t)=>{var{children:r}=e,n=BV(e,UV),s=or();return s?b.createElement(KV,null,r):b.createElement(WV,Qd({ref:t},n),r)});function HV(){var e=yt(),[t,r]=b.useState(null),n=ue(B5);return b.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;zr(i)&&i!==n&&e(h5(i))}},[t,e,n]),r}function h1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(r),!0).forEach(function(n){YV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YV(e,t,r){return(t=XV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XV(e){var t=JV(e,"string");return typeof t=="symbol"?t:t+""}function JV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZV=b.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:h,onTouchMove:p,onTouchStart:y,style:x,width:v}=e,g=yt(),[w,_]=b.useState(null),[j,N]=b.useState(null);jU();var S=HV(),P=b.useCallback(U=>{S(U),typeof t=="function"&&t(U),_(U),N(U)},[S,t,_,N]),C=b.useCallback(U=>{g(FC(U)),g(Ur({handler:i,reactEvent:U}))},[g,i]),I=b.useCallback(U=>{g($g(U)),g(Ur({handler:u,reactEvent:U}))},[g,u]),T=b.useCallback(U=>{g(jE()),g(Ur({handler:d,reactEvent:U}))},[g,d]),D=b.useCallback(U=>{g($g(U)),g(Ur({handler:f,reactEvent:U}))},[g,f]),z=b.useCallback(()=>{g(WC())},[g]),q=b.useCallback(U=>{g(VC(U.key))},[g]),L=b.useCallback(U=>{g(Ur({handler:o,reactEvent:U}))},[g,o]),O=b.useCallback(U=>{g(Ur({handler:l,reactEvent:U}))},[g,l]),A=b.useCallback(U=>{g(Ur({handler:c,reactEvent:U}))},[g,c]),k=b.useCallback(U=>{g(Ur({handler:m,reactEvent:U}))},[g,m]),E=b.useCallback(U=>{g(Ur({handler:y,reactEvent:U}))},[g,y]),$=b.useCallback(U=>{g(HC(U)),g(Ur({handler:p,reactEvent:U}))},[g,p]),R=b.useCallback(U=>{g(Ur({handler:h,reactEvent:U}))},[g,h]);return b.createElement(qE.Provider,{value:w},b.createElement(BI.Provider,{value:j},b.createElement("div",{className:Ne("recharts-wrapper",n),style:GV({position:"relative",cursor:"default",width:v,height:s},x),onClick:C,onContextMenu:L,onDoubleClick:O,onFocus:z,onKeyDown:q,onMouseDown:A,onMouseEnter:I,onMouseLeave:T,onMouseMove:D,onMouseUp:k,onTouchEnd:R,onTouchMove:$,onTouchStart:E,ref:P},r)))}),eW=["children","className","width","height","style","compact","title","desc"];function tW(e,t){if(e==null)return{};var r,n,s=rW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nW=b.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:u}=e,d=tW(e,eW),f=Pe(d,!1);return l?b.createElement(f1,{otherAttributes:f,title:c,desc:u},r):b.createElement(ZV,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(f1,{otherAttributes:f,title:c,desc:u,ref:t},b.createElement(M7,null,r)))}),sW=["width","height"];function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(null,arguments)}function iW(e,t){if(e==null)return{};var r,n,s=aW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function aW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oW={top:5,right:5,bottom:5,left:5},lW={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:oW,reverseStackOrder:!1,syncMethod:"index"},YC=b.forwardRef(function(t,r){var n,s=_s(t.categoricalChartProps,lW),{width:i,height:o}=s,l=iW(s,sW);if(!wd(i)||!wd(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return b.createElement(RV,{preloadedState:{options:h},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},b.createElement(j7,{chartData:m.data}),b.createElement(qV,{width:i,height:o,layout:s.layout,margin:s.margin}),b.createElement(FV,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),b.createElement(nW,zg({},l,{width:i,height:o,ref:r})))}),cW=["axis"],XC=b.forwardRef((e,t)=>b.createElement(YC,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cW,tooltipPayloadSearcher:UE,categoricalChartProps:e,ref:t})),uW=["axis","item"],dW=b.forwardRef((e,t)=>b.createElement(YC,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:uW,tooltipPayloadSearcher:UE,categoricalChartProps:e,ref:t}));function fW({data:e,loading:t,error:r,showIndividual:n,timeframe:s="weekly",onTimeframeChange:i}){const[o,l]=b.useState("score"),c=g=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const w=e.filter(C=>{switch(g){case"score":return C.totalPossiblePoints>0;case"quizzes":return C.totalQuizzesCompleted>0;case"time":return C.totalTimeSpentMinutes>0;default:return!1}});if(w.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const _=w[w.length-1],j=w[w.length-2];let N,S;switch(g){case"score":N=_.averageScore,S=j.averageScore;break;case"quizzes":N=_.totalQuizzesCompleted,S=j.totalQuizzesCompleted;break;case"time":N=_.totalTimeSpentMinutes,S=j.totalTimeSpentMinutes;break}if(S===0)return{direction:"stable",value:0,color:"text-gray-600"};const P=(N-S)/S*100;return Math.abs(P)<5?{direction:"stable",value:P,color:"text-gray-600"}:P>0?{direction:"up",value:P,color:"text-green-600"}:{direction:"down",value:P,color:"text-red-600"}},u=g=>{switch(g){case"up":return a.jsx(rn,{className:"h-4 w-4"});case"down":return a.jsx(Q0,{className:"h-4 w-4"});default:return a.jsx(vS,{className:"h-4 w-4"})}},d=({active:g,payload:w,label:_})=>{var j;if(g&&w&&w.length){const N=w[0].payload;return a.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900 mb-2",children:_}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(j=N.averageScore)==null?void 0:j.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",N.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Questions: ",N.totalQuestionsAnswered]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Time: ",mr(N.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Correct: ",N.correctAnswers," | Incorrect: ",N.incorrectAnswers]})]})]})}return null},m=(()=>{switch(o){case"score":return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:g=>`${g}%`,domain:[0,100]};case"quizzes":return{dataKey:"totalQuizzesCompleted",color:"#10b981",yAxisFormatter:g=>g.toString(),domain:[0,"dataMax"]};case"time":return{dataKey:"totalTimeSpentMinutes",color:"#8b5cf6",yAxisFormatter:g=>mr(g),domain:[0,"dataMax"]};default:return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:g=>`${g}%`,domain:[0,100]}}})(),h=e.reduce((g,w)=>g+w.totalQuizzesCompleted,0),p=e.reduce((g,w)=>g+w.totalQuestionsAnswered,0),y=e.reduce((g,w)=>g+w.totalTimeSpentMinutes,0),x=e.reduce((g,w)=>g+w.totalPossiblePoints,0)>0?e.reduce((g,w)=>g+w.totalPointsEarned,0)/e.reduce((g,w)=>g+w.totalPossiblePoints,0)*100:0,v=c(o);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Progression Report"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Progression"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance trends over time":"Team performance trends over time"})]})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>i("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing progression data..."})]}):e.length===0||h===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progression Data"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual needs to complete more quizzes to see progression trends.":"The team needs to complete more quizzes to see progression trends."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[x.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Overall Score"})]}),a.jsx(Kt,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:h}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(xt,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(xt,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:mr(y)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Ge,{className:"h-8 w-8 text-orange-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Average Score"}),a.jsx("button",{onClick:()=>l("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>l("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${v.color}`,children:[u(v.direction),a.jsx("span",{className:"font-medium",children:v.direction==="up"?"Improving":v.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[o==="score"&&"Average Score",o==="quizzes"&&"Quiz Activity",o==="time"&&"Study Time",Math.abs(v.value)>0&&a.jsxs("span",{className:v.color,children:[" ","(",v.value>0?"+":"",v.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[o==="score"&&"Average Score Trend",o==="quizzes"&&"Quiz Activity Trend",o==="time"&&"Study Time Trend"]}),e.length===0?a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No Data Available"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Complete more quizzes to see progression trends"})]})}):a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(XC,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280",angle:-45,textAnchor:"end",height:60}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:m.yAxisFormatter,domain:m.domain}),a.jsx(kg,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:m.dataKey,stroke:m.color,strokeWidth:3,dot:{fill:m.color,strokeWidth:2,r:5},activeDot:{r:7,stroke:m.color,strokeWidth:2},connectNulls:!1})]})})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((g,w)=>{const _=g.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${w>0?"border-t border-gray-100":""} ${_?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[g.periodStart.toLocaleDateString()," - ",g.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:_?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[g.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[g.totalQuizzesCompleted," quiz",g.totalQuizzesCompleted!==1?"es":"",", ",g.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[mr(g.totalTimeSpentMinutes)," study time"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No activity"})})]})},g.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(rn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Progression Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Track your progress toward the 90% pass rate goal"}),a.jsx("li",{children:"• Identify periods of high activity and strong performance"}),a.jsx("li",{children:"• Use trends to adjust study schedules and focus areas"}),a.jsx("li",{children:"• Consistent practice leads to better retention and scores"})]})]})]})})]})})]})}function m1(){var m,h;const{selectedMemberId:e,progressionTimeframe:t,setProgressionTimeframe:r,analyticsData:n,analyticsLoading:s,analyticsError:i,progressionData:o,progressionLoading:l,progressionError:c}=hi();if(s)return a.jsx(zt,{text:"Loading overview data...",className:"py-8"});if(i)return a.jsx(Re,{type:"error",message:i});const u=[{name:"Quizzes Completed",value:((m=n==null?void 0:n.totalQuizzesCompleted)==null?void 0:m.toLocaleString())||"0",icon:Ce,iconColor:"text-indigo-600"},{name:"Questions Answered",value:((h=n==null?void 0:n.totalQuestionsAnswered)==null?void 0:h.toLocaleString())||"0",icon:xt,iconColor:"text-green-600"},{name:"Average Score",value:n!=null&&n.averageScore?`${n.averageScore.toFixed(1)}%`:"0%",icon:Cr,iconColor:"text-blue-600"},{name:"Total Study Time",value:mr((n==null?void 0:n.totalTimeSpentMinutes)||0),icon:Ge,iconColor:"text-purple-600"},{name:"Study Streak",value:n!=null&&n.studyStreak?`${n.studyStreak} day${n.studyStreak===1?"":"s"}`:"0 days",icon:Kt,iconColor:"text-yellow-600"}],d=({active:p,payload:y,label:x})=>{var v;if(p&&y&&y.length){const g=y[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900",children:x}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(v=g.averageScore)==null?void 0:v.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",g.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Time: ",mr(g.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Questions: ",g.totalQuestionsAnswered]})]})]})}return null},f=(p,y)=>{switch(y){case"averageScore":return`${p}%`;case"totalTimeSpentMinutes":return mr(p);default:return p.toString()}};return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6",children:u.map(p=>a.jsx(pt,{title:p.name,value:p.value,icon:p.icon,iconColor:p.iconColor},p.name))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:e===void 0?"Team Performance Trends":"Performance Overview"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(zt,{text:"Loading chart data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(rn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load chart data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(XC,{data:o,children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:p=>f(p,"averageScore")}),a.jsx(kg,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:"averageScore",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(rn,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No progression data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see trends"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quiz Activity Distribution"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(zt,{text:"Loading activity data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load activity data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(dW,{data:o,children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(kg,{formatter:(p,y)=>[y==="totalQuizzesCompleted"?`${p} quizzes`:`${p} questions`,y==="totalQuizzesCompleted"?"Quizzes Completed":"Questions Answered"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"8px"}}),a.jsx(qd,{dataKey:"totalQuizzesCompleted",fill:"#10b981",name:"Quizzes",radius:[2,2,0,0]}),a.jsx(qd,{dataKey:"totalQuestionsAnswered",fill:"#3b82f6",name:"Questions",radius:[2,2,0,0]})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No activity data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see activity distribution"})]})})]})]}),a.jsx(fW,{data:o,loading:l,error:c,showIndividual:e!==void 0,timeframe:t,onTimeframeChange:r})]})}function Pn({isOpen:e,onClose:t,title:r,children:n,footer:s,maxWidth:i="md",themeClasses:o,isFullScreen:l=!1}){var m;if(!e)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"},u=(o==null?void 0:o.card)==="bg-transparent"?(m=o==null?void 0:o.text)!=null&&m.includes("text-white")?"bg-gray-900":"bg-white":(o==null?void 0:o.card)||"bg-white",d=(o==null?void 0:o.text)||"text-gray-900",f=(o==null?void 0:o.border)||"border-gray-200";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`${u} rounded-xl p-6 w-full ${c[i]} max-h-[90vh] overflow-y-auto ${l?"":"border "+f}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:`text-lg font-semibold ${d}`,children:r}),a.jsx("button",{onClick:t,className:`${(o==null?void 0:o.textSecondary)||"text-gray-400"} hover:${(o==null?void 0:o.text)||"text-gray-600"} transition-colors duration-200`,children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:n}),s&&a.jsx("div",{className:"flex items-center justify-end space-x-3",children:s})]})})}function JC({isOpen:e,onClose:t,quizSessionId:r,quizTitle:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState("all");b.useEffect(()=>{e&&r&&m()},[e,r]);const m=async()=>{if(r){l(!0),u(null);try{console.log("🔍 Fetching question details for quiz session:",r);const{data:x,error:v}=await V.from("quiz_question_logs").select(`
          id,
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          answered_at,
          questions!inner (
            book_of_bible,
            chapter,
            question,
            answer,
            points,
            tier
          )
        `).eq("quiz_session_id",r).order("answered_at",{ascending:!0});if(v)throw console.error("❌ Error fetching question details:",v),v;console.log("✅ Question details fetched:",(x==null?void 0:x.length)||0,"questions"),i(x||[])}catch(x){console.error("💥 Error fetching question details:",x),u(x.message||"Failed to load question details")}finally{l(!1)}}},h=s.filter(x=>{switch(d){case"correct":return x.is_correct;case"incorrect":return!x.is_correct;default:return!0}}),p={total:s.length,correct:s.filter(x=>x.is_correct).length,incorrect:s.filter(x=>!x.is_correct).length,totalPoints:s.reduce((x,v)=>x+v.points_earned,0),maxPoints:s.reduce((x,v)=>x+v.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((x,v)=>x+v.time_spent,0)/s.length):0},y=p.total>0?Math.round(p.correct/p.total*100):0;return a.jsx(Pn,{isOpen:e,onClose:t,title:`Quiz Details${n?`: ${n}`:""}`,maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:o?a.jsx(zt,{text:"Loading question details...",className:"py-8"}):c?a.jsx(Re,{type:"error",message:c}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p.total}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[y,"%"]}),a.jsx("div",{className:"text-sm text-green-700",children:"Accuracy"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p.totalPoints}),a.jsx("div",{className:"text-sm text-purple-700",children:"Points Earned"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_l(p.averageTime)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Avg Time"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(U0,{className:"h-4 w-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",p.total,")"]}),a.jsxs("button",{onClick:()=>f("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",p.correct,")"]}),a.jsxs("button",{onClick:()=>f("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",p.incorrect,")"]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",p.total," questions"]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Questions Found"}),a.jsx("p",{className:"text-gray-600",children:d==="all"?"No question details available for this quiz.":`No ${d} questions found.`})]}):h.map((x,v)=>a.jsxs("div",{className:`border rounded-lg p-4 ${x.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{children:x.question?a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Ce,{className:"h-4 w-4"}),a.jsxs("span",{children:[x.question.book_of_bible," Chapter ",x.question.chapter]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"capitalize",children:[x.question.tier," tier"]})]}):a.jsx("div",{className:"text-sm text-gray-500 italic",children:"Question details not available"})}),a.jsx("div",{children:x.is_correct?a.jsx(Dt,{className:"h-5 w-5 text-green-600"}):a.jsx(Jn,{className:"h-5 w-5 text-red-600"})})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Cr,{className:"h-4 w-4 text-purple-600"}),a.jsxs("span",{className:"font-medium",children:[x.points_earned,"/",x.total_points_possible," pts"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{children:_l(x.time_spent)})]})]}),x.question?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Question:"}),a.jsx("div",{className:"text-gray-900",children:x.question.question})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Correct Answer:"}),a.jsx("div",{className:"text-gray-900",children:x.question.answer})]}),!x.is_correct&&a.jsxs("div",{className:"bg-red-100 border border-red-200 rounded p-2",children:[a.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"Result:"}),a.jsxs("div",{className:"text-red-800",children:["Incorrect answer - ",x.points_earned," of ",x.total_points_possible," points earned"]})]})]}):a.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Question details are not available for this entry. This may occur if the question was deleted after the quiz was completed."})})]},x.id))})]})})}function hW({data:e,loading:t,error:r,updateLocalQuizHistoryEntry:n,refreshData:s}){const[i,o]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(""),[f,m]=b.useState(null),[h,p]=b.useState(null),{updateQuizApprovalStatus:y,deleteQuizSession:x}=fi(),{user:v}=ve(),g=S=>{c(S.id),d(S.title),o(!0)},w=async(S,P)=>{if(!v||v.role!=="admin"&&v.teamRole!=="owner"){alert("You do not have permission to change the approval status.");return}m(S);try{n(S,{approval_status:P}),await y(S,P)}catch(C){console.error("Failed to update quiz approval status:",C);const I=e.find(T=>T.id===S);I&&n(S,{approval_status:I.approval_status}),alert("Failed to update status. Please try again.")}finally{m(null)}},_=async(S,P)=>{if(!v||v.teamRole!=="owner"){alert("You do not have permission to delete quiz sessions.");return}if(window.confirm(`Are you sure you want to delete the quiz "${P}"?

This action will:
• Permanently delete the quiz session and all its data
• Recalculate the user's XP, level, and study streak
• Remove any achievements that are no longer valid

This action cannot be undone.`)){p(S);try{await x(S),s&&await s(),console.log("✅ Quiz session deleted successfully")}catch(I){console.error("Failed to delete quiz session:",I),alert("Failed to delete quiz session. Please try again.")}finally{p(null)}}},j=S=>{switch(S){case"approved":return"text-green-600 bg-green-50 border-green-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},N=[{key:"title",header:"Quiz Title",render:S=>a.jsx("div",{className:"font-medium text-gray-900",children:S.title})},{key:"type",header:"Type",render:S=>a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:NS(S.type)})})},{key:"start_time",header:"Start Time",render:S=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(S.created_at).toLocaleString()})},{key:"end_time",header:"End Time",render:S=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(S.completed_at).toLocaleString()})},{key:"score",header:"Score",render:S=>{const P=S.max_points>0?S.total_points/S.max_points*100:0,C=P>=90?"text-green-600":P>=70?"text-blue-600":"text-red-600";return a.jsxs("div",{className:`font-bold text-lg ${C}`,children:[P.toFixed(1),"%"]})},className:"text-center",headerClassName:"text-center"},{key:"questions_count",header:"Questions",render:S=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:S.questions_count})]})}),className:"text-center",headerClassName:"text-center"},{key:"estimated_minutes",header:"Time",render:S=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:mr(Math.round(S.total_actual_time_spent_seconds/60))})]})}),className:"text-center",headerClassName:"text-center"},{key:"actions",header:"Actions",render:S=>{const P=v&&(v.role==="admin"||v.teamRole==="owner"),C=v&&v.teamRole==="owner",I=S.approval_status||"approved";return a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[P?a.jsxs("select",{value:I,onChange:T=>{T.stopPropagation(),w(S.id,T.target.value)},disabled:f===S.id,className:`px-3 py-1 rounded-lg text-sm font-medium border transition-colors duration-200 ${j(I)} ${f===S.id?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"}`,onClick:T=>T.stopPropagation(),children:[a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]}):a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(I)}`,children:[I==="approved"?a.jsx(Dt,{className:"h-3 w-3 mr-1"}):a.jsx(Jn,{className:"h-3 w-3 mr-1"}),a.jsx("span",{className:"capitalize",children:I})]}),C&&a.jsx("button",{onClick:T=>{T.stopPropagation(),_(S.id,S.title)},disabled:h===S.id,className:"text-red-600 hover:text-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete quiz session",children:h===S.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):a.jsx(ii,{className:"h-4 w-4"})})]})},className:"whitespace-nowrap",headerClassName:"text-left"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Quiz History"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ce,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Completed Quizzes"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of quizzes completed by this team member."})]})]})}),a.jsx(an,{columns:N,data:e,loading:t,onRowClick:g,emptyState:{icon:Ce,title:"No Quizzes Completed",description:"This team member has not completed any quizzes in the selected date range."}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Showing latest completed quizzes. Click on a row to view detailed results."})}),a.jsx(JC,{isOpen:i,onClose:()=>{o(!1),c(null),d("")},quizSessionId:l,quizTitle:u})]})}function mW(){const{selectedMemberId:e,startDate:t,endDate:r}=hi(),{data:n,loading:s,error:i,refreshData:o,updateLocalQuizHistoryEntry:l}=yI({userId:e,startDate:t,endDate:r});return a.jsx(hW,{data:n,loading:s,error:i,updateLocalQuizHistoryEntry:l,refreshData:o})}function pW({data:e,loading:t,error:r}){const[n,s]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(""),u=p=>{p.completed&&p.quiz_session_id&&(o(p.quiz_session_id),c(`Study Assignment - ${oo(p.study_items)}`),s(!0))},d=p=>{const y=m(p)?"bg-orange-50 border-l-4 border-orange-400":"";return p.completed&&p.quiz_session_id?`${y} cursor-pointer hover:bg-gray-50`.trim():y},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",m=p=>{if(!p.completed||!p.completed_at)return!1;const y=new Date(p.date);return y.setHours(23,59,59,999),new Date(p.completed_at)>y},h=[{key:"study_items",header:"Study Items",render:p=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900",children:oo(p.study_items)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[p.study_items.length," item",p.study_items.length!==1?"s":""]})]})},{key:"date",header:"Date",render:p=>a.jsx("div",{className:"text-sm text-gray-900",children:ao(p.date,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),className:"whitespace-nowrap"},{key:"completed_at",header:"Completed",render:p=>a.jsx("div",{className:"text-sm text-gray-600",children:p.completed_at?a.jsxs("div",{className:m(p)?"text-orange-700 font-medium":"",children:[ao(new Date(p.completed_at),{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),m(p)&&a.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"(Late completion)"})]}):a.jsx("span",{className:"text-gray-400",children:"—"})}),className:"whitespace-nowrap"},{key:"score",header:"Score",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_points_earned!==void 0&&p.max_points_possible!==void 0?a.jsx("div",{className:`font-bold text-lg ${f(p.max_points_possible>0?p.total_points_earned/p.max_points_possible*100:0)}`,children:p.max_points_possible>0?`${Math.round(p.total_points_earned/p.max_points_possible*100)}%`:"0%"}):a.jsx("div",{className:"text-sm text-gray-400",children:"—"})}),className:"text-center"},{key:"questions",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_questions_answered!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.total_questions_answered})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"—"})}),className:"text-center"},{key:"time",header:"Time",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_time_spent_minutes!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.total_time_spent_minutes,"m"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"—"})}),className:"text-center"},{key:"completed",header:"Status",render:p=>a.jsx("div",{className:"flex items-center space-x-2",children:p.completed?a.jsxs("div",{className:`flex items-center space-x-2 ${m(p)?"text-orange-700":""}`,children:[a.jsx(Dt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:`text-sm font-medium ${m(p)?"text-orange-700":"text-green-700"}`,children:m(p)?"Completed Late":"Completed"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ge,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"})]})}),className:"whitespace-nowrap"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Study Schedule"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Study Schedule Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of study assignments and completion status."})]})]})}),a.jsx(an,{columns:h,data:e,loading:t,onRowClick:u,getRowClassName:d,emptyState:{icon:Yt,title:"No Study Assignments",description:"No study assignments found for the selected date range. Study assignments are created through the Study Schedule feature."}}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(p=>p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(p=>!p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click on completed assignments to view detailed quiz results."})})]}),a.jsx(JC,{isOpen:n,onClose:()=>{s(!1),o(null),c("")},quizSessionId:i,quizTitle:l})]})}function gW(){const{studyScheduleData:e,studyScheduleLoading:t,studyScheduleError:r}=hi();return a.jsx(pW,{data:e,loading:t,error:r})}function xW({data:e,loading:t,error:r,showIndividual:n}){const s=l=>{switch(l){case"book":return a.jsx(Ce,{className:"h-4 w-4 text-blue-600"});case"chapter":return a.jsx(xt,{className:"h-4 w-4 text-green-600"});case"tier":return a.jsx(Mp,{className:"h-4 w-4 text-purple-600"});default:return a.jsx(qn,{className:"h-4 w-4 text-gray-600"})}},i=l=>l>=80?"text-yellow-600":l>=70?"text-orange-600":"text-red-600",o=l=>l>=80?"bg-yellow-50 border-yellow-200":l>=70?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200";return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Knowledge Gaps"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Q0,{className:"h-6 w-6 text-red-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Knowledge Gaps Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Topics where this individual struggles most (below 90% accuracy)":"Topics where the team struggles most (below 90% accuracy)"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing knowledge gaps..."})]}):e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(xt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Knowledge Gaps Found"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual is performing well across all topics (90%+ accuracy)!":"The team is performing well across all topics (90%+ accuracy)!"})]}):a.jsxs("div",{className:"space-y-4",children:[e.map((l,c)=>a.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-200 hover:shadow-md ${o(l.averageScore)}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",c+1]}),s(l.type)]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:l.topic}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[l.totalAttempts," attempts"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[l.correctAnswers," correct"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[l.incorrectAnswers," incorrect"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-2xl font-bold ${i(l.averageScore)}`,children:[l.averageScore.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Accuracy"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l.averageScore>=80?"bg-yellow-500":l.averageScore>=70?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.max(l.averageScore,5)}%`}})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0%"}),a.jsx("span",{children:"100%"})]})]}),a.jsxs("div",{className:"mt-3 flex items-start space-x-2",children:[a.jsx(gf,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Recommendation:"})," Focus additional study time on ",l.topic.toLowerCase(),l.type==="chapter"&&l.book&&l.chapter?` by reviewing ${l.book} chapter ${l.chapter} content and practicing more questions from this section.`:l.type==="book"&&l.book?` by reviewing ${l.book} content and practicing more questions from this book.`:l.type==="tier"&&l.tier?` by practicing more ${l.tier} level questions to build confidence.`:" to improve performance in this area."]})]})]},`${l.type}-${l.topic}`)),e.length>0&&a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Mp,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Study Tips:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Focus on the topics with the lowest scores first"}),a.jsx("li",{children:"• Create custom quizzes targeting these specific areas"}),a.jsx("li",{children:"• Review source material for chapters with low performance"}),a.jsx("li",{children:"• Practice regularly to improve retention and understanding"})]})]})]})})]})})]})}function yW(){const{selectedMemberId:e,knowledgeGapsData:t,knowledgeGapsLoading:r,knowledgeGapsError:n}=hi();return a.jsx(xW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function xr({type:e,value:t,showIcon:r=!1,size:n="sm"}){const s=()=>{switch(e){case"role":switch(t){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}case"status":switch(t){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}case"tier":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"plan":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"teamRole":switch(t){case"owner":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}default:return"bg-gray-100 text-gray-800"}},i=()=>{if(!r)return null;switch(e){case"role":return t==="admin"?a.jsx(Nn,{className:"h-3 w-3"}):a.jsx(Xe,{className:"h-3 w-3"});case"status":switch(t){case"active":return a.jsx(Dt,{className:"h-3 w-3"});case"pending":return a.jsx(Ge,{className:"h-3 w-3"});case"suspended":return a.jsx(Jn,{className:"h-3 w-3"});default:return a.jsx(tn,{className:"h-3 w-3"})}case"tier":switch(t){case"enterprise":return a.jsx(hs,{className:"h-3 w-3"});case"pro":return a.jsx(Gi,{className:"h-3 w-3"});default:return null}case"teamRole":switch(t){case"owner":return a.jsx(hs,{className:"h-3 w-3"});case"admin":return a.jsx(Nn,{className:"h-3 w-3"});default:return a.jsx(Xe,{className:"h-3 w-3"})}default:return null}},o=n==="md"?"px-3 py-1 text-sm":"px-2 py-1 text-xs",l=i();return a.jsxs("span",{className:`inline-flex items-center ${o} font-semibold rounded-full ${s()}`,children:[l&&a.jsx("span",{className:"mr-1",children:l}),a.jsx("span",{className:"capitalize",children:t})]})}function vW({isOpen:e,onClose:t,question:r,teamId:n}){const[s,i]=b.useState([]),[o,l]=b.useState("all"),c=async()=>{if(!(!r||!n))try{console.log("🔍 Fetching all attempts for question:",r.question_id,"in team:",n);const{data:y,error:x}=await V.rpc("get_question_attempts_with_user_details",{p_question_id:r.question_id,p_team_id:n});if(x){console.error("❌ Error fetching all attempts:",x),console.warn("⚠️ Team member attempt details not available, continuing without them"),i([]);return}console.log("✅ All attempts fetched:",(y==null?void 0:y.length)||0,"attempts"),i(y||[])}catch(y){console.error("💥 Error fetching all attempts:",y),i([])}};if(b.useEffect(()=>{e&&r&&n&&c()},[e,r,n]),!r)return null;const u=y=>y>=90?"text-green-600":y>=50?"text-yellow-600":"text-red-600",d=y=>y>=90?"bg-green-50 border-green-200":y>=50?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200",f=s.filter(y=>{switch(o){case"correct":return y.is_correct;case"incorrect":return!y.is_correct;default:return!0}}),m={total:s.length,correct:s.filter(y=>y.is_correct).length,incorrect:s.filter(y=>!y.is_correct).length,totalPoints:s.reduce((y,x)=>y+x.points_earned,0),maxPoints:s.reduce((y,x)=>y+x.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((y,x)=>y+x.time_spent,0)/s.length):0},h=y=>y>=90?"Easy":y>=70?"Moderate":y>=50?"Challenging":"Difficult",p=r.total_points_possible>0?Math.round(r.total_points_earned/r.total_points_possible*100):0;return a.jsx(Pn,{isOpen:e,onClose:t,title:"Question Performance Details",maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:`border rounded-lg p-4 ${d(r.accuracy_rate)}`,children:a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ce,{className:"h-6 w-6 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:[r.book_of_bible," Chapter ",r.chapter]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(xr,{type:"tier",value:r.tier,showIcon:!0}),a.jsx("span",{className:"text-sm text-gray-600",children:"•"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[r.points," points"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-3xl font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h(r.accuracy_rate)})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.total_attempts}),a.jsxs("div",{className:"text-sm text-blue-700 flex items-center justify-center space-x-1",children:[a.jsx(Xe,{className:"h-4 w-4"}),a.jsx("span",{children:"Total Attempts"})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:r.correct_attempts}),a.jsxs("div",{className:"text-sm text-green-700 flex items-center justify-center space-x-1",children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsx("span",{children:"Correct"})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-900",children:r.incorrect_attempts}),a.jsxs("div",{className:"text-sm text-red-700 flex items-center justify-center space-x-1",children:[a.jsx(Jn,{className:"h-4 w-4"}),a.jsx("span",{children:"Incorrect"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_l(r.average_time_spent)}),a.jsxs("div",{className:"text-sm text-purple-700 flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4"}),a.jsx("span",{children:"Avg Time"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(xt,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{children:"Question"})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.question_text})})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{children:"Correct Answer"})]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.answer_text})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center space-x-2",children:[a.jsx(sr,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{children:"Performance Analysis"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Success Rate"}),a.jsxs("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Points Efficiency"}),a.jsxs("span",{className:`font-bold ${u(p)}`,children:[p,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Difficulty Level"}),a.jsx("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:h(r.accuracy_rate)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Average Response Time"}),a.jsx("span",{className:"font-bold text-gray-900",children:_l(r.average_time_spent)})]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h5",{className:"font-medium text-blue-900 mb-2 flex items-center space-x-2",children:[a.jsx(rn,{className:"h-4 w-4"}),a.jsx("span",{children:"Recommendations"})]}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[r.accuracy_rate<50&&a.jsx("p",{children:"• Consider reviewing this question for clarity or difficulty"}),r.accuracy_rate>=50&&r.accuracy_rate<70&&a.jsx("p",{children:"• This question provides good challenge - consider similar difficulty"}),r.accuracy_rate>=90&&a.jsx("p",{children:"• This question may be too easy - consider increasing difficulty"}),r.average_time_spent>60&&a.jsx("p",{children:"• Users take longer than expected - question may need simplification"}),r.total_attempts<10&&a.jsx("p",{children:"• Limited data available - more attempts needed for reliable analysis"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Response Distribution"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:"bg-green-500 h-4 rounded-l-full transition-all duration-300",style:{width:`${r.correct_attempts/r.total_attempts*100}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[a.jsxs("span",{children:[r.correct_attempts," Correct"]}),a.jsxs("span",{children:[r.total_attempts," Total Attempts"]}),a.jsxs("span",{children:[r.incorrect_attempts," Incorrect"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[a.jsx(Xe,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Team Member Attempts"})]}),s.length>0&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>l("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",m.total,")"]}),a.jsxs("button",{onClick:()=>l("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",m.correct,")"]}),a.jsxs("button",{onClick:()=>l("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",m.incorrect,")"]})]})]}),s.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Attempts Found"}),a.jsx("p",{className:"text-gray-600",children:"No team member attempts available for this question."})]}):f.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["No ",o.charAt(0).toUpperCase()+o.slice(1)," Attempts"]}),a.jsxs("p",{className:"text-gray-600",children:["No ",o," attempts found for this question."]})]}):a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:f.map((y,x)=>a.jsxs("div",{className:`border rounded-lg p-4 ${y.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:y.user_name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:y.user_name}),a.jsx("div",{className:"text-sm text-gray-600",children:Rp(y.answered_at)})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-sm text-orange-600",children:_l(y.time_spent)})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${y.is_correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.is_correct?"Correct":"Incorrect"})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Points: ",y.points_earned," / ",y.total_points_possible]})]},`${y.user_id}-${y.answered_at}`))})]})]})})}function bW({data:e,loading:t,error:r,showIndividual:n,user:s}){const[i,o]=b.useState("accuracy_rate"),[l,c]=b.useState("asc"),[u,d]=b.useState(!1),[f,m]=b.useState(null),h=se.useMemo(()=>[...e].sort((_,j)=>{const N=_[i],S=j[i];return typeof N=="number"&&typeof S=="number"?l==="desc"?S-N:N-S:typeof N=="string"&&typeof S=="string"?l==="desc"?S.localeCompare(N):N.localeCompare(S):0}),[e,i,l]),p=_=>{i===_?c(l==="desc"?"asc":"desc"):(o(_),c(_==="accuracy_rate"?"asc":"desc"))},y=_=>{m(_),d(!0)},x=_=>_>=90?"text-green-600":_>=70?"text-blue-600":_>=50?"text-yellow-600":"text-red-600",v=_=>{if(_<60)return`${_}s`;const j=Math.floor(_/60),N=_%60;return`${j}:${N.toString().padStart(2,"0")}`},w=[{key:"question_text",header:"Question",render:_=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900 line-clamp-2 mb-1",children:_.question_text}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.points," point",_.points!==1?"s":""]})]})},{key:"book_chapter",header:"Book & Chapter",render:_=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:_.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",_.chapter]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:_=>a.jsx(xr,{type:"tier",value:_.tier,showIcon:!0}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:_=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${x(_.accuracy_rate)}`,children:[_.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.correct_attempts,"/",_.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:_.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:v(_.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:_=>{const j=_.total_points_possible>0?Math.round(_.total_points_earned/_.total_points_possible*100):0;return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${x(j)}`,children:[j,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.total_points_earned,"/",_.total_points_possible]})]})},className:"text-center",headerClassName:"text-center"}].map(_=>({..._,header:_.sortable?a.jsxs("button",{onClick:()=>p(_.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:_.header}),i===_.key&&a.jsx(rn,{className:`h-3 w-3 transition-transform duration-200 ${l==="desc"?"rotate-180":""}`})]}):_.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Question Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Question Performance Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual question performance and difficulty analysis":"Team-wide question performance and difficulty analysis"})]})]})}),a.jsx(an,{columns:w,data:h,loading:t,onRowClick:y,emptyState:{icon:sr,title:"No Question Data",description:"No question performance data available yet. Complete some quizzes to see question analysis!"},getRowClassName:_=>_.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":_.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions Analyzed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(_=>_.accuracy_rate<50).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Difficult (<50%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(_=>_.accuracy_rate>=50&&_.accuracy_rate<70).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Moderate (50-70%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(_=>_.accuracy_rate>=90).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Easy (>90%)"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Questions with low accuracy rates may need review"})})]}),a.jsx(vW,{isOpen:u,onClose:()=>{d(!1),m(null)},question:f,teamId:s==null?void 0:s.teamId})]})}function wW(){const{selectedMemberId:e,user:t,questionPerformanceData:r,questionPerformanceLoading:n,questionPerformanceError:s}=hi();return a.jsx(bW,{data:r,loading:n,error:s,showIndividual:e!==void 0,user:t})}function jW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("date"),[o,l]=b.useState("desc"),c=se.useMemo(()=>[...e].sort((g,w)=>{const _=g[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:_ instanceof Date&&j instanceof Date?o==="desc"?j.getTime()-_.getTime():_.getTime()-j.getTime():typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=g=>{s===g?l(o==="desc"?"asc":"desc"):(i(g),l("desc"))},d=(g,w)=>g===0?{level:"No Activity",color:"text-gray-500"}:g>=3||w>=50?{level:"High",color:"text-green-600"}:g>=2||w>=20?{level:"Medium",color:"text-blue-600"}:{level:"Low",color:"text-yellow-600"},m=[{key:"date",header:"Date",render:g=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.dateObj.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:g.dateObj.toLocaleDateString()})]}),className:"whitespace-nowrap",sortable:!0},{key:"quizzesCompleted",header:"Quizzes",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ce,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.quizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"questionsAnswered",header:"Questions",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.questionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"timeSpentMinutes",header:"Study Time",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:mr(g.timeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageSessionTime",header:"Avg Session",render:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:g.averageSessionTime>0?mr(g.averageSessionTime):"—"})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"activity_level",header:"Activity Level",render:g=>{const{level:w,color:_}=d(g.quizzesCompleted,g.questionsAnswered);return a.jsx("div",{className:"text-center",children:a.jsx("span",{className:`font-medium ${_}`,children:w})})},className:"text-center",headerClassName:"text-center"},{key:"studyStreak",header:"Streak",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Vn,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.studyStreak>0?`${g.studyStreak}`:"—"})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(g=>({...g,header:g.sortable?a.jsxs("button",{onClick:()=>u(g.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:g.header}),s===g.key&&a.jsx(rn,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):g.header})),h=e.reduce((g,w)=>g+w.quizzesCompleted,0),p=e.reduce((g,w)=>g+w.questionsAnswered,0),y=e.reduce((g,w)=>g+w.timeSpentMinutes,0),x=e.filter(g=>g.quizzesCompleted>0).length,v=e.length>0?Math.max(...e.map(g=>g.studyStreak)):0;return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Engagement Data"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(no,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Daily Activity & Engagement"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Daily study activity and engagement patterns for this individual":"Daily study activity and engagement patterns for the team"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:h}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Quizzes"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:p}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:mr(y)}),a.jsx("div",{className:"text-sm text-purple-700",children:"Total Time"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:x}),a.jsx("div",{className:"text-sm text-orange-700",children:"Active Days"})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:v}),a.jsx("div",{className:"text-sm text-yellow-700",children:"Best Streak"})]})]})}),a.jsx(an,{columns:m,data:c,loading:t,emptyState:{icon:no,title:"No Activity Data",description:"No daily activity data available for the selected date range. Complete some quizzes to see engagement patterns!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Activity levels: High (3+ quizzes or 50+ questions), Medium (2+ quizzes or 20+ questions), Low (1+ quiz)"})})})]})}function _W(){const{selectedMemberId:e,engagementData:t,engagementLoading:r,engagementError:n}=hi();return a.jsx(jW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function NW({data:e,loading:t,error:r,timeframe:n="weekly",onTimeframeChange:s}){const[i,o]=b.useState("score"),l=y=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const x=e.filter(N=>{switch(y){case"score":return N.totalPossiblePoints>0;case"quizzes":return N.totalQuizzesCompleted>0;case"time":return N.totalTimeSpentMinutes>0;case"members":return N.activeMembers>0;default:return!1}});if(x.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const v=x[x.length-1],g=x[x.length-2];let w,_;switch(y){case"score":w=v.averageScore,_=g.averageScore;break;case"quizzes":w=v.totalQuizzesCompleted,_=g.totalQuizzesCompleted;break;case"time":w=v.totalTimeSpentMinutes,_=g.totalTimeSpentMinutes;break;case"members":w=v.activeMembers,_=g.activeMembers;break}if(_===0)return{direction:"stable",value:0,color:"text-gray-600"};const j=(w-_)/_*100;return Math.abs(j)<5?{direction:"stable",value:j,color:"text-gray-600"}:j>0?{direction:"up",value:j,color:"text-green-600"}:{direction:"down",value:j,color:"text-red-600"}},c=y=>{switch(y){case"up":return a.jsx(rn,{className:"h-4 w-4"});case"down":return a.jsx(Q0,{className:"h-4 w-4"});default:return a.jsx(vS,{className:"h-4 w-4"})}},u=e.reduce((y,x)=>y+x.totalQuizzesCompleted,0),d=e.reduce((y,x)=>y+x.totalQuestionsAnswered,0),f=e.reduce((y,x)=>y+x.totalTimeSpentMinutes,0),m=e.reduce((y,x)=>y+x.totalPossiblePoints,0)>0?e.reduce((y,x)=>y+x.totalPointsEarned,0)/e.reduce((y,x)=>y+x.totalPossiblePoints,0)*100:0,h=e.length>0?Math.max(...e.map(y=>y.activeMembers)):0;e.reduce((y,x)=>y+x.activeDays,0);const p=l(i);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Team Performance Trends"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Xe,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Performance Trends"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track your team's collective performance and activity over time"})]})]}),s&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>s("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing team performance trends..."})]}):e.length===0||u===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Performance Data"}),a.jsx("p",{className:"text-gray-600",children:"Your team needs to complete more quizzes to see performance trends over time."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[m.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Team Average Score"})]}),a.jsx(Kt,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:u}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(xt,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:d}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(xt,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:mr(f)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Ge,{className:"h-8 w-8 text-orange-600"})]})}),a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:h}),a.jsx("div",{className:"text-sm text-indigo-700",children:"Active Members"})]}),a.jsx(Xe,{className:"h-8 w-8 text-indigo-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>o("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Team Score"}),a.jsx("button",{onClick:()=>o("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>o("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"}),a.jsx("button",{onClick:()=>o("members"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="members"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Active Members"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${p.color}`,children:[c(p.direction),a.jsx("span",{className:"font-medium",children:p.direction==="up"?"Improving":p.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[i==="score"&&"Team Average Score",i==="quizzes"&&"Quiz Activity",i==="time"&&"Study Time",i==="members"&&"Active Members",Math.abs(p.value)>0&&a.jsxs("span",{className:p.color,children:[" ","(",p.value>0?"+":"",p.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[i==="score"&&"Team Average Score Trend",i==="quizzes"&&"Team Quiz Activity Trend",i==="time"&&"Team Study Time Trend",i==="members"&&"Active Members Trend"]}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Interactive Chart Would Go Here"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Integration with charting library (e.g., Chart.js, Recharts) needed"}),a.jsx("div",{className:"mt-4 text-xs text-gray-400",children:a.jsxs("p",{children:["Data points available: ",e.filter(y=>{switch(i){case"score":return y.totalPossiblePoints>0;case"quizzes":return y.totalQuizzesCompleted>0;case"time":return y.totalTimeSpentMinutes>0;case"members":return y.activeMembers>0;default:return!1}}).length," periods"]})})]})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((y,x)=>{const v=y.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${x>0?"border-t border-gray-100":""} ${v?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:y.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.periodStart.toLocaleDateString()," - ",y.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:v?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[y.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.totalQuizzesCompleted," quiz",y.totalQuizzesCompleted!==1?"es":"",", ",y.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[mr(y.totalTimeSpentMinutes)," study time, ",y.activeMembers," active members"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No team activity"})})]})},y.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(rn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Team Performance Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Monitor team engagement and collective learning progress"}),a.jsx("li",{children:"• Identify periods of high activity and strong team performance"}),a.jsx("li",{children:"• Use trends to motivate team members and celebrate achievements"}),a.jsx("li",{children:"• Track how many team members are actively participating"})]})]})]})})]})})]})}function SW(){const{progressionTimeframe:e,setProgressionTimeframe:t,teamTrendsData:r,teamTrendsLoading:n,teamTrendsError:s}=hi();return a.jsx(NW,{data:r,loading:n,error:s,timeframe:e,onTimeframeChange:t})}function kW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("accuracy_rate"),[o,l]=b.useState("asc"),c=se.useMemo(()=>[...e].sort((g,w)=>{const _=g[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=g=>{s===g?l(o==="desc"?"asc":"desc"):(i(g),l(g==="accuracy_rate"?"asc":"desc"))},d=g=>g>=90?"text-green-600":g>=70?"text-blue-600":g>=50?"text-yellow-600":"text-red-600",f=g=>{if(g<60)return`${g}s`;const w=Math.floor(g/60),_=g%60;return`${w}:${_.toString().padStart(2,"0")}`},h=[{key:"book_of_bible",header:"Book",render:g=>a.jsx("div",{className:"font-medium text-gray-900",children:g.book_of_bible}),sortable:!0},{key:"chapter",header:"Chapter",render:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:g.chapter})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:g=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${d(g.accuracy_rate)}`,children:[g.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[g.correct_attempts,"/",g.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:f(g.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:g=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${d(g.points_efficiency)}`,children:[g.points_efficiency,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[g.total_points_earned,"/",g.total_points_possible]})]}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(g=>({...g,header:g.sortable?a.jsxs("button",{onClick:()=>u(g.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:g.header}),s===g.key&&a.jsx(rn,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):g.header})),p=new Set(e.map(g=>g.book_of_bible)).size,y=e.length,x=e.length>0?Math.round(e.reduce((g,w)=>g+w.accuracy_rate,0)/e.length):0,v=e.reduce((g,w)=>g+w.total_attempts,0);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Book/Chapter Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ce,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Book & Chapter Performance"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance breakdown by Bible book and chapter":"Team performance breakdown by Bible book and chapter"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p}),a.jsx("div",{className:"text-sm text-blue-700",children:"Books Analyzed"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:y}),a.jsx("div",{className:"text-sm text-green-700",children:"Chapters Analyzed"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[x,"%"]}),a.jsx("div",{className:"text-sm text-purple-700",children:"Overall Accuracy"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:v}),a.jsx("div",{className:"text-sm text-orange-700",children:"Total Attempts"})]})]})}),a.jsx(an,{columns:h,data:c,loading:t,emptyState:{icon:Ce,title:"No Book/Chapter Data",description:"No book and chapter performance data available yet. Complete some quizzes to see detailed analysis!"},getRowClassName:g=>g.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":g.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(g=>g.accuracy_rate<50).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Struggling (","<50%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(g=>g.accuracy_rate>=50&&g.accuracy_rate<70).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Needs Work (","50-70%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.filter(g=>g.accuracy_rate>=70&&g.accuracy_rate<90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Good (","70-90%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(g=>g.accuracy_rate>=90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Excellent (",">90%",")"]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Focus study time on chapters with low accuracy rates"})})]})]})}function PW(){const{selectedMemberId:e,bookChapterData:t,bookChapterLoading:r,bookChapterError:n}=hi();return a.jsx(kW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}const EW=3,p1=[{id:"overview",name:"Overview",icon:sr},{id:"quiz-history",name:"Quiz History",icon:Ce,requiresIndividualView:!0},{id:"study-schedule",name:"Study Schedule",icon:Yt,requiresIndividualView:!0},{id:"knowledge-gaps",name:"Knowledge Gaps",icon:Mp},{id:"question-performance",name:"Question Performance",icon:xt},{id:"activity",name:"Daily Activity",icon:no},{id:"book-chapter-performance",name:"Book/Chapter",icon:Ce},{id:"team-trends",name:"Team Trends",icon:rn,requiresTeamView:!0}];function CW(){var W;const{user:e,refreshUser:t,developerLog:r}=ve(),n=Nt(),s=b.useRef(!1),[i,o]=b.useState(void 0),[l,c]=b.useState("weekly"),[u,d]=b.useState("overview"),[f,m]=b.useState(()=>{const F=new Date;return F.setMonth(F.getMonth()-EW),F}),[h,p]=b.useState(new Date),{teamMembers:y,loading:x,error:v}=LS(),{data:g,loading:w,error:_}=pI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:j,loading:N,error:S}=gI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:P,loading:C,error:I}=xI({teamId:e==null?void 0:e.teamId,userId:i,timeframe:l,startDate:f,endDate:h}),{data:T,loading:D,error:z}=RS({userId:i,startDate:f,endDate:h}),{data:q,loading:L,error:O}=vI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:A,loading:k,error:E}=bI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:$,loading:R,error:U}=wI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:J,loading:de,error:he}=SI({teamId:i===void 0?e==null?void 0:e.teamId:void 0,timeframe:l,startDate:f,endDate:h}),{data:ee,loading:ye,error:Ct}=kI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),Q=b.useCallback(F=>{const H=new Date(F.target.value);H<=h&&m(H)},[h]),te=b.useCallback(F=>{const H=new Date(F.target.value);H>=f&&p(H)},[f]),le=b.useCallback(F=>F.toISOString().split("T")[0],[]),Y=b.useCallback(async()=>{try{await t()}catch(F){console.error("Failed to refresh data:",F)}},[t]),Ve=b.useCallback(F=>{const H=i===void 0,G=p1.find(Z=>Z.id===F);G&&(G.requiresIndividualView&&H||G.requiresTeamView&&!H||d(F))},[i]),me=b.useMemo(()=>i?y.find(F=>F.userId===i):void 0,[i,y]),Oe=b.useMemo(()=>{const F=i===void 0;return p1.filter(H=>!(H.requiresIndividualView&&F||H.requiresTeamView&&!F))},[i]),et=b.useMemo(()=>Math.ceil((h.getTime()-f.getTime())/(1e3*60*60*24)),[f,h]),ut=b.useMemo(()=>({user:e,selectedMemberId:i,setSelectedMemberId:o,teamMembers:y,canSelectIndividuals:(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",startDate:f,setStartDate:m,endDate:h,setEndDate:p,progressionTimeframe:l,setProgressionTimeframe:c,analyticsData:g,analyticsLoading:w,analyticsError:_,knowledgeGapsData:j,knowledgeGapsLoading:N,knowledgeGapsError:S,progressionData:P,progressionLoading:C,progressionError:I,quizHistoryData:T,quizHistoryLoading:D,quizHistoryError:z,studyScheduleData:q,studyScheduleLoading:L,studyScheduleError:O,questionPerformanceData:A,questionPerformanceLoading:k,questionPerformanceError:E,engagementData:$,engagementLoading:R,engagementError:U,teamTrendsData:J,teamTrendsLoading:de,teamTrendsError:he,bookChapterData:ee,bookChapterLoading:ye,bookChapterError:Ct,selectedMemberInfo:me}),[e,i,y,f,h,l,g,w,_,j,N,S,P,C,I,T,D,z,q,L,O,A,k,E,$,R,U,J,de,he,ee,ye,Ct,me]);b.useEffect(()=>{e&&y.length>0&&!s.current&&(e.teamRole==="member"?o(e.id):o(void 0),s.current=!0)},[e,y]),b.useEffect(()=>{Oe.find(H=>H.id===u)||d("overview")},[Oe,u]);const We=((W=e==null?void 0:e.planSettings)==null?void 0:W.allow_analytics_access)??!1,Xt=w||N||C||D||L||k||R||de||ye,M=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",B=b.useCallback(()=>{try{switch(u){case"overview":return a.jsx(m1,{});case"quiz-history":return a.jsx(mW,{});case"study-schedule":return a.jsx(gW,{});case"knowledge-gaps":return a.jsx(yW,{});case"question-performance":return a.jsx(wW,{});case"activity":return a.jsx(_W,{});case"team-trends":return a.jsx(SW,{});case"book-chapter-performance":return a.jsx(PW,{});default:return a.jsx(m1,{})}}catch(F){return console.error("Error rendering tab content:",F),a.jsx("div",{className:"text-center py-8",children:a.jsx(Re,{type:"error",message:"Failed to load tab content. Please try refreshing the page."})})}},[u]);return x?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading analytics data..."})}):v?a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsx(Re,{type:"error",message:v||"Failed to load data."})})}):We?a.jsx(ge,{children:a.jsx(PI,{value:ut,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Track performance and progress insights."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:Y,disabled:Xt,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:Xt?"Loading...":"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sM,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter analytics data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:le(f),onChange:Q,max:le(h),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:le(h),onChange:te,min:le(f),max:le(new Date),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[et," days"]})]})]})}),a.jsx(Up,{teamMembers:y,selectedMemberId:i,onSelectMember:o,selectedMemberInfo:me,disabled:!M,includeAllTeamOption:!0}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6 overflow-x-auto",role:"tablist",children:Oe.map(F=>{const H=F.icon,G=u===F.id;return a.jsxs("button",{onClick:()=>Ve(F.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${G?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,role:"tab","aria-selected":G,"aria-controls":`${F.id}-panel`,children:[a.jsx(H,{className:"h-4 w-4"}),a.jsx("span",{children:F.name})]},F.id)})})}),a.jsx("div",{className:"p-6",role:"tabpanel",id:`${u}-panel`,"aria-labelledby":`${u}-tab`,children:B()})]})]})})}):a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(sr,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Analytics"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your current plan does not include access to Analytics. Upgrade your subscription to unlock this feature and gain valuable insights."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade Your Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Access detailed performance metrics, user engagement data, and more by upgrading to a higher tier."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>n("/billing"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>n("/dashboard"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Dashboard"})]})]})})})}function AW(){const[e,t]=b.useState(!1),[r,n]=b.useState(null);return{createCheckoutSession:async i=>{t(!0),n(null);try{const{priceId:o,mode:l,successUrl:c,cancelUrl:u}=i,d=`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,f=`${window.location.origin}/billing`,{data:m,error:h}=await V.functions.invoke("stripe-checkout",{body:{price_id:o,mode:l,success_url:c||`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:u||f}});return h?(console.error("Checkout error:",h),n(h.message||"Failed to create checkout session"),{error:h.message||"Failed to create checkout session"}):m!=null&&m.url?(console.log("✅ Checkout session created, redirecting to:",m.url),window.location.href=m.url,{sessionId:m.sessionId,url:m.url}):(n("No checkout URL received"),{error:"No checkout URL received"})}catch(o){console.error("Checkout error:",o);const l=o.message||"An unexpected error occurred";return n(l),{error:l}}finally{t(!1)}},loading:e,error:r}}function TW(){const{user:e,developerLog:t}=ve(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{var f,m;if(!e){l(!1);return}l(!0),u(null);try{t("🔄 Fetching billing data for user:",e.id);const{data:h,error:p}=await V.functions.invoke("fetch-payment-methods",{headers:{Authorization:`Bearer ${(f=(await V.auth.getSession()).data.session)==null?void 0:f.access_token}`}});p?(console.error("❌ Error fetching payment methods:",p),console.warn("⚠️ Payment methods not available, continuing without them"),n([])):(t("✅ Payment methods fetched:",(h==null?void 0:h.length)||0),n(h||[]));const{data:y,error:x}=await V.functions.invoke("fetch-invoices",{headers:{Authorization:`Bearer ${(m=(await V.auth.getSession()).data.session)==null?void 0:m.access_token}`}});x?(console.error("❌ Error fetching invoices:",x),console.warn("⚠️ Invoices not available, continuing without them"),i([])):(t("✅ Invoices fetched:",(y==null?void 0:y.length)||0),i(y||[]))}catch(h){console.error("💥 Failed to fetch billing data:",h),u("Billing data temporarily unavailable"),n([]),i([])}finally{l(!1)}},[e,t]);return b.useEffect(()=>{d()},[d]),{paymentMethods:r,invoices:s,loading:o,error:c,refreshBillingData:d}}function OW(){var O;const{user:e}=ve(),{createCheckoutSession:t,loading:r}=AW(),{subscription:n,orders:s,loading:i,error:o,cancelCurrentSubscription:l}=G0(),{invoices:c,paymentMethods:u,loading:d,error:f}=TW(),[m,h]=b.useState(null),[p,y]=b.useState(!1),[x,v]=b.useState(!1),[g,w]=b.useState(null),[_,j]=b.useState("month"),N=n!=null&&n.subscription_id?n:null,S=N==null?void 0:N.price_id,P=Lp.find(A=>A.priceId===S);console.log("🔍 Billing Debug - Current subscription data:",{hasCurrentSubscription:!!N,subscriptionStatus:N==null?void 0:N.subscription_status,cancelAtPeriodEnd:N==null?void 0:N.cancel_at_period_end,subscriptionId:N==null?void 0:N.subscription_id,priceId:S,foundProduct:!!P}),console.log("🔍 Billing Debug - Billing data:",{invoicesCount:c.length,ordersCount:s.length,billingLoading:d,billingError:f,invoices:c.slice(0,2),paymentMethods:u.slice(0,1)});const C=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end);console.log("🔍 Billing Debug - Cancel button condition:",{statusIsActive:(N==null?void 0:N.status)==="active",notCancelAtPeriodEnd:!(N!=null&&N.cancel_at_period_end),shouldShowCancelButton:C});const I=Lp.filter(A=>A.interval===_),T=!N||((O=e==null?void 0:e.subscription)==null?void 0:O.plan)==="free",D=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end),z=async A=>{h(A);try{await t({priceId:A,mode:"subscription"})}catch(k){console.error("Checkout error:",k)}finally{h(null)}},q=async()=>{v(!0),w(null);try{const A=await l();A.success?y(!1):w(A.error||"Failed to cancel subscription")}catch(A){w(A.message||"An unexpected error occurred")}finally{v(!1)}},L=[{key:"id",header:"Invoice",render:A=>a.jsxs("div",{className:"font-medium text-gray-900",children:["#",A.id.substring(0,8),"..."]})},{key:"created",header:"Date",render:A=>a.jsx("span",{className:"text-sm text-gray-900",children:xa(A.created)})},{key:"amount_due",header:"Amount",render:A=>a.jsx("span",{className:"font-medium text-gray-900",children:Ko(A.amount_due/100,A.currency)})},{key:"status",header:"Status",render:A=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A.status==="paid"?"bg-green-100 text-green-800":A.status==="open"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})},{key:"actions",header:"",render:A=>a.jsx("div",{className:"flex justify-end",children:A.invoice_pdf&&a.jsx("a",{href:A.invoice_pdf,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Download Invoice",children:a.jsx(gb,{className:"h-4 w-4"})})}),className:"text-right"}];return i?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading billing information..."})}):o&&o.includes("does not exist")?a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsx(Re,{type:"warning",title:"Billing Setup Required",message:"Billing features are being set up. Please contact support if this persists.",className:"mb-6"})})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),a.jsx("p",{className:"text-gray-600",children:"Manage your subscription and view billing history."})]}),o&&a.jsx(Re,{type:"error",message:o,className:"mb-6"}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Subscription"}),N&&P?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:P.name}),P.interval==="year"?a.jsx(hs,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Gi,{className:"h-5 w-5 text-blue-500"})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:P.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[Ko(P.price,P.currency),a.jsxs("span",{className:"text-lg font-normal text-gray-600",children:["/",P.interval]})]}),N.current_period_end&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:N.cancel_at_period_end?`Ends on: ${xa(N.current_period_end)}`:`Next billing: ${xa(N.current_period_end)}`})]})]}),N.payment_method_last4&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 mt-2",children:[a.jsx(sd,{className:"h-4 w-4"}),a.jsxs("span",{children:[N.payment_method_brand," •••• ",N.payment_method_last4]})]})]}),a.jsxs("div",{className:"text-right",children:[N.subscription_status==="active"&&N.cancel_at_period_end?a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ge,{className:"h-4 w-4 text-orange-500"}),a.jsxs("span",{className:"text-sm font-medium text-orange-600",children:["Ending ",xa(N.current_period_end)]})]}):a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${N.subscription_status==="active"?"bg-green-500":"bg-yellow-500"}`}),a.jsx("span",{className:`text-sm font-medium capitalize ${N.subscription_status==="active"?"text-green-600":"text-yellow-600"}`,children:N.subscription_status})]}),N.subscription_status==="active"&&!N.cancel_at_period_end&&a.jsx("button",{onClick:()=>y(!0),className:"text-sm text-red-600 hover:text-red-700 transition-colors duration-200 mt-2",children:"Downgrade to Free"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Vn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Subscription"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You're currently on the free plan. Upgrade to unlock premium features."})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pricing"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Start for free. Upgrade as you go."}),a.jsxs("div",{className:"flex items-center justify-center space-x-1 bg-gray-100 rounded-lg p-1 w-fit mx-auto mb-4",children:[a.jsx("button",{onClick:()=>j("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="month"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),a.jsx("button",{onClick:()=>j("year"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="year"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Yearly"})]}),_==="year"&&a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Save 17% on a yearly subscription"})]}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-6 max-w-5xl mx-auto",children:[a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${T?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[T&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Free"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:"£0"}),a.jsx("span",{className:"text-gray-600",children:"/month"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Perfect for getting started"})]}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic quiz features"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Limited question access"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic progress tracking"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Up to 5 team members"})]})]}),a.jsx("button",{onClick:()=>D?y(!0):void 0,disabled:T||!D,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${T?"bg-gray-100 text-gray-500 cursor-not-allowed":D?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:T?a.jsx("span",{children:"Current Plan"}):D?a.jsx("span",{children:"Downgrade to Free"}):a.jsx("span",{children:"Already Downgrading"})})]}),I.map(A=>{const k=S===A.priceId,E=m===A.priceId,$=_==="year";return a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${k?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[$&&!k&&_==="year"&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-indigo-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Best Value"})}),k&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_==="year"?"Pro Yearly":"Pro"}),A.interval==="year"?a.jsx(hs,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Gi,{className:"h-5 w-5 text-blue-500"}),$&&a.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-1 rounded-full",children:"POPULAR"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:Ko(A.price,A.currency)}),a.jsxs("span",{className:"text-gray-600",children:["/",_==="year"?"year":"month"]}),_==="year"&&a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[Ko(A.price/12,A.currency)," per month"]})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description})]}),a.jsx("ul",{className:"space-y-2 mb-6",children:A.features.map(R=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:R})]},R))}),a.jsx("button",{onClick:()=>z(A.priceId),disabled:k||E||r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${k?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50"}`,children:E?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):k?a.jsx("span",{children:"Current Plan"}):a.jsxs("span",{children:["Upgrade to ",A.name]})})]},A.id)})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Billing History"}),f&&a.jsx(Re,{type:"warning",message:`${f}. Stripe billing functions may not be deployed yet.`,className:"mb-4"}),!1,c.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Invoices"}),a.jsx(an,{columns:L,data:c,loading:d,emptyState:{title:"No Invoices",description:"No invoices found for your account."}})]}):s.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Orders"}),a.jsx("div",{className:"space-y-3",children:s.map(A=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["Order #",A.order_id]}),a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${A.payment_status==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.payment_status})]}),a.jsx("div",{className:"text-sm text-gray-600",children:new Date(A.order_date).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"font-medium text-gray-900",children:Ko(A.amount_total/100,A.currency)}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-700",children:a.jsx(gb,{className:"h-4 w-4"})})]})]},A.order_id))})]}):d?a.jsx(zt,{text:"Loading billing history...",className:"py-8"}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(sd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Billing History"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your invoices and billing history will appear here once you make a purchase."}),N&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," You have an active subscription, but billing history may take a few minutes to appear. If you don't see invoices after 10 minutes, please contact support."]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-8",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-800",children:"Billing Information"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"All subscriptions are managed through Stripe. You can cancel or modify your subscription at any time. Changes will take effect at the end of your current billing period."})]})]})}),a.jsxs(Pn,{isOpen:p,onClose:()=>{y(!1),w(null)},title:"Downgrade to Free Plan",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{y(!1),w(null)},disabled:x,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Keep Subscription"}),a.jsx("button",{onClick:q,disabled:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Downgrade to Free"})]})})]}),children:[g&&a.jsx(Re,{type:"error",message:g,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Are you sure you want to downgrade to the free plan?"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Your subscription will remain active until the end of your current billing period (",N!=null&&N.current_period_end?xa(N.current_period_end):"end of period","), after which you'll be moved to the free plan."]})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"You will lose access to:"}),a.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:P==null?void 0:P.features.map(A=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Ln,{className:"h-3 w-3 text-red-600"}),a.jsx("span",{children:A})]},A))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:["• Your subscription will continue until ",N!=null&&N.current_period_end?xa(N.current_period_end):"the end of your billing period"]}),a.jsx("li",{children:"• You'll keep all premium features until then"}),a.jsx("li",{children:"• After that, you'll be automatically moved to the free plan"}),a.jsx("li",{children:"• You can resubscribe at any time to regain premium features"})]})]})]})]})]})})}class g1 extends se.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("BillingSuccess Error:",t,r)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Dt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Completed!"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Your payment was processed successfully. Please check your dashboard for updated subscription details."}),a.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"w-full bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]})})}):this.props.children}}function DW({sessionId:e,onDashboardClick:t,onBillingClick:r,processingState:n}){return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:`h-16 w-16 rounded-full flex items-center justify-center mx-auto mb-6 ${n==="error"?"bg-yellow-100":"bg-green-100"}`,children:n==="error"?a.jsx(tn,{className:"h-8 w-8 text-yellow-600"}):a.jsx(Dt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:n==="error"?"Payment Received!":"Payment Successful!"}),a.jsxs("p",{className:"text-gray-600 mb-8",children:[n==="processing"&&"Your payment is being processed. Subscription details will be available shortly.",n==="complete"&&"Thank you for your purchase! Your subscription has been activated and you now have access to all the premium features.",n==="error"&&"Your payment was successful, but subscription details are still being processed. If you don't see your subscription in a few minutes, please contact support."]}),e&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Session ID:"})," ",e.substring(0,20),"..."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center space-x-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(lM,{className:"h-4 w-4"}),a.jsx("span",{children:"Go to Dashboard"})]}),a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("span",{children:"View Billing"}),a.jsx(gS,{className:"h-4 w-4"})]})]})]})})})}function MW(){return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing your payment..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your subscription."})]})})}function IW(){const[e]=UN(),t=Nt(),{refreshUser:r,user:n}=ve(),{forceRefresh:s}=G0(),[i,o]=b.useState(!0),[l,c]=b.useState("processing"),u=e.get("session_id");b.useEffect(()=>{let m=0;const h=3;let p=!1;const y=async()=>{if(!p){m++;try{console.log(`🔄 Attempt ${m}/${h}: Refreshing user data after payment`);const[v]=await Promise.all([r(),s()]);if(v){p=!0,c("complete"),o(!1),console.log("✅ User and subscription data refreshed successfully after payment");return}else console.warn("⚠️ User refresh returned null, but continuing...")}catch(v){console.error(`❌ Attempt ${m} failed:`,v)}if(m>=h)console.error("❌ Max attempts reached, subscription may still be processing"),p=!0,c("error"),o(!1);else{const v=Math.pow(2,m)*1e3;console.log(`⏱️ Retrying in ${v}ms...`),setTimeout(y,v)}}},x=setTimeout(y,2e3);return()=>{clearTimeout(x),p=!0}},[]),b.useEffect(()=>{u&&console.log("✅ Payment completed successfully, session ID:",u)},[u]);const d=()=>{console.log("🏠 Navigating to dashboard"),t("/dashboard")},f=()=>{console.log("💳 Navigating to billing"),t("/billing")};return i?a.jsx(g1,{children:a.jsx(MW,{})}):a.jsx(g1,{children:a.jsx(DW,{sessionId:u,onDashboardClick:d,onBillingClick:f,processingState:l})})}function $W(){ve();const{user:e}=ve(),{teamMembers:t,teamInvitations:r,teamStats:n,loading:s,error:i,setError:o,inviteMember:l,suspendMember:c,reinstateMember:u,resendInvitation:d,cancelInvitation:f,generateInvitationLink:m,getRoleIcon:h}=LS(),[p,y]=b.useState(""),[x,v]=b.useState(!1),[g,w]=b.useState(!1),[_,j]=b.useState(""),[N,S]=b.useState("member"),[P,C]=b.useState(""),[I,T]=b.useState(null),[D,z]=b.useState("members"),[q,L]=b.useState(null),[O,A]=b.useState(null),k=se.useMemo(()=>t.filter(Q=>{const te=Q.user.name.toLowerCase().includes(p.toLowerCase()),le=Q.user.email!=="Email restricted"&&Q.user.email.toLowerCase().includes(p.toLowerCase());return te||le}),[t,p]),E=se.useMemo(()=>cI(e),[e]),$=se.useMemo(()=>uI(e),[e]),R=se.useCallback(async()=>{const Q=await l(_,N);Q.success&&Q.invitationLink?(C(Q.invitationLink),w(!0),j(""),S("member"),v(!1),o(null)):o(Q.error||"Failed to send invitation")},[l,_,N,C,w,j,S,v,o]),U=se.useCallback(async(Q,te)=>{if(!confirm(`Are you sure you want to suspend ${te}? They will be logged out and unable to access the team.`))return;L(Q);const le=await c(Q);le.success||o(le.error||"Failed to suspend member"),L(null)},[c,o]),J=se.useCallback(async(Q,te)=>{if(!confirm(`Are you sure you want to reinstate ${te}? They will regain access to the team.`))return;A(Q);const le=await u(Q);le.success||o(le.error||"Failed to reinstate member"),A(null)},[u,o]),de=se.useCallback(async(Q,te)=>{try{await navigator.clipboard.writeText(Q),T(te),setTimeout(()=>T(null),2e3)}catch(le){console.error("Failed to copy link:",le);const Y=document.createElement("textarea");Y.value=Q,document.body.appendChild(Y),Y.select(),document.execCommand("copy"),document.body.removeChild(Y),T(te),setTimeout(()=>T(null),2e3)}},[]),he=se.useCallback(async()=>{try{await navigator.clipboard.writeText(P),T("modal"),setTimeout(()=>T(null),2e3)}catch(Q){console.error("Failed to copy link:",Q);const te=document.createElement("textarea");te.value=P,document.body.appendChild(te),te.select(),document.execCommand("copy"),document.body.removeChild(te),T("modal"),setTimeout(()=>T(null),2e3)}},[P]),ee=se.useCallback(async Q=>{const te=await d(Q);te.success||o(te.error||"Failed to resend invitation")},[d,o]),ye=se.useCallback(async Q=>{const te=await f(Q);te.success||o(te.error||"Failed to cancel invitation")},[f,o]),Ct=(e==null?void 0:e.maxTeamMembers)||5;return e!=null&&e.teamId?a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your team members and invitations."})]}),E&&a.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(NM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invite Member"})]})]}),i&&a.jsx(Re,{type:"error",message:i,className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(pt,{title:"Total Members",value:n.totalMembers,icon:Xe,iconColor:"text-indigo-600",subtitle:`of ${Ct} max`}),a.jsx(pt,{title:"Admins",value:n.admins,icon:Nn,iconColor:"text-blue-600"}),a.jsx(pt,{title:"Pending Invites",value:n.pendingInvites,icon:Ge,iconColor:"text-yellow-600"}),a.jsx(pt,{title:"Active Members",value:n.activeMembers,icon:Mt,iconColor:"text-green-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex space-x-8 px-6",children:[a.jsxs("button",{onClick:()=>z("members"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${D==="members"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Team Members (",t.length,")"]}),$&&a.jsxs("button",{onClick:()=>z("invitations"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${D==="invitations"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Invitations (",r.length,")"]})]})}),a.jsxs("div",{className:"p-6",children:[D==="members"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:p,onChange:Q=>y(Q.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})}),E?a.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(hs,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("p",{className:"font-medium",children:"Enhanced Access"}),a.jsxs("p",{children:["As a team ",e==null?void 0:e.teamRole,", you can view and manage all team member details including names and email addresses."]})]})]})}):a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Nn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Limited View"}),a.jsx("p",{children:"As a team member, you can only see your own contact details. Team owners and admins can view all member information."})]})]})}),s?a.jsx(zt,{text:"Loading team members...",className:"py-12"}):k.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Members"}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Your team doesn't have any members yet.":"No members match your search criteria."}),E&&t.length===0&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Invite Your First Member"})]}):a.jsx("div",{className:"space-y-4",children:k.map(Q=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:Q.user.name.split(" ").map(te=>te[0]).join("")})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:Q.user.name}),Q.role==="owner"&&a.jsx(hs,{className:"h-4 w-4 text-yellow-500",title:"Team Owner"})]}),a.jsx("p",{className:`text-sm truncate ${Q.user.email==="Email restricted"?"text-gray-400 italic":"text-gray-600"}`,children:Q.user.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(Q.joinedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end",children:[a.jsx(xr,{type:"teamRole",value:Q.role,showIcon:!0}),a.jsx(xr,{type:"status",value:Q.status}),E&&Q.role!=="owner"&&Q.userId!==(e==null?void 0:e.id)&&Q.status==="active"&&a.jsxs("button",{onClick:()=>U(Q.id,Q.user.name),disabled:q===Q.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Suspend member",children:[q===Q.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-red-600"}):a.jsx(wS,{className:"h-3 w-3"}),a.jsx("span",{children:"Suspend"})]}),E&&Q.role!=="owner"&&Q.userId!==(e==null?void 0:e.id)&&Q.status==="suspended"&&a.jsxs("button",{onClick:()=>J(Q.id,Q.user.name),disabled:O===Q.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Reinstate member",children:[O===Q.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-green-600"}):a.jsx(bS,{className:"h-3 w-3"}),a.jsx("span",{children:"Reinstate"})]}),E&&Q.role!=="owner"&&Q.userId!==(e==null?void 0:e.id)&&a.jsx("div",{className:"relative",children:a.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(xM,{className:"h-5 w-5"})})})]})]},Q.id))})]}),D==="invitations"&&$&&a.jsx("div",{className:"space-y-4",children:s?a.jsx(zt,{text:"Loading invitations...",className:"py-12"}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"There are no pending invitations for your team."}),E&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Send an Invitation"})]}):r.map(Q=>{const te=m(Q.token),le=I===Q.id;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(Yl,{className:"h-6 w-6 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:Q.email}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Invited ",new Date(Q.createdAt).toLocaleDateString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expires ",new Date(Q.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xr,{type:"teamRole",value:Q.role,showIcon:!0}),a.jsx(xr,{type:"status",value:"pending"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[a.jsx(uM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invitation Link"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:te,readOnly:!0,className:"flex-1 px-3 py-2 text-sm font-mono bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),a.jsx("button",{onClick:()=>de(te,Q.id),className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${le?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:le?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(pb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with the invited team member. The link will expire in 7 days."})]}),E&&a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsxs("button",{onClick:()=>ee(Q.id),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-indigo-50",disabled:s,children:[a.jsx(vM,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Extend"})]}),a.jsxs("button",{onClick:()=>ye(Q.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-red-50",disabled:s,children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]},Q.id)})})]})]}),a.jsxs(Pn,{isOpen:x,onClose:()=>{v(!1),o(null),j(""),S("member")},title:"Invite Team Member",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{v(!1),o(null),j(""),S("member")},className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",disabled:s,children:"Cancel"}),a.jsxs("button",{onClick:R,disabled:!_.trim()||s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[s&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Send Invitation"})]})]}),children:[i&&a.jsx(Re,{type:"error",message:i,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:_,onChange:Q=>j(Q.target.value),placeholder:"colleague@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:N,onChange:Q=>S(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N==="admin"?"Can manage team members and settings":"Can access team resources and collaborate"})]})]})]}),a.jsxs(Pn,{isOpen:g,onClose:()=>{w(!1),C(""),T(null)},title:"Invitation Sent Successfully",maxWidth:"lg",footer:a.jsx("button",{onClick:()=>{w(!1),C(""),T(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-3",children:[a.jsx(Mt,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Invitation created successfully!"})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"You can share this invitation link with the team member. The link will expire in 7 days."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invitation Link"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:P,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),a.jsx("button",{onClick:he,className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${I==="modal"?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:I==="modal"?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(pb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(oM,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Share this link"}),a.jsx("p",{children:"Send this link to the invited team member via email, chat, or any other communication method."})]})]})})]})]})]})}):a.jsx(ge,{children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You are not currently a member of any team."})]})})})}function zW(){const{user:e}=ve(),t=Nt(),[r,n]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(null);b.useEffect(()=>{e&&d()},[e]);const d=async()=>{if(e)try{i(!0),l(null);const{data:h,error:p}=await V.from("team_invitations").select(`
          id,
          team_id,
          email,
          role,
          invited_by,
          status,
          expires_at,
          created_at,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("email",e.email).eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(p){console.error("Error loading invitations:",p),l("Failed to load invitations");return}const y=[...new Set((h||[]).map(_=>_.invited_by))],{data:x,error:v}=await V.from("user_profiles").select("id, name").in("id",y);v&&console.error("Error loading inviter profiles:",v);const g=new Map((x||[]).map(_=>[_.id,_])),w=(h||[]).map(_=>{var j;return{id:_.id,teamId:_.team_id,email:_.email,role:_.role,invitedBy:_.invited_by,status:_.status,expiresAt:_.expires_at,createdAt:_.created_at,team:{id:_.teams.id,name:_.teams.name,description:_.teams.description},inviter:{name:((j=g.get(_.invited_by))==null?void 0:j.name)||"Unknown User"}}});n(w)}catch(h){console.error("Error loading invitations:",h),l("An unexpected error occurred")}finally{i(!1)}},f=async(h,p)=>{if(e)try{if(u(h),l(null),!r.find(x=>x.id===h)){l("Invitation not found");return}if(p==="accept"){const{data:x,error:v}=await V.rpc("accept_team_invitation",{p_invitation_id:h});if(v){console.error("Error accepting invitation:",v),l("Failed to accept invitation. Please try again.");return}if(!x.success){l(x.error||"Failed to accept invitation");return}alert("Successfully joined the team!"),window.location.reload()}else{const{error:x}=await V.from("team_invitations").update({status:"declined"}).eq("id",h);if(x){console.error("Error declining invitation:",x),l("Failed to decline invitation. Please try again.");return}n(v=>v.filter(g=>g.id!==h))}}catch(y){console.error("Error processing invitation:",y),l("An unexpected error occurred")}finally{u(null)}},m=h=>{const p=new Date,x=new Date(h).getTime()-p.getTime(),v=Math.ceil(x/(1e3*60*60*24));return v<=0?"Expired":v===1?"1 day remaining":`${v} days remaining`};return s?a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitations..."})]})})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Invitations"}),a.jsx("p",{className:"text-gray-600",children:"Manage your pending team invitations."})]}),o&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:"text-red-700",children:o})]})}),r.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any pending team invitations at the moment."}),a.jsx("button",{onClick:()=>t("/dashboard"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]}):a.jsx("div",{className:"space-y-6",children:r.map(h=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.team.name}),a.jsx(xr,{type:"plan",value:h.team.plan})]}),a.jsxs("p",{className:"text-gray-600 mb-3",children:[a.jsx("strong",{children:h.inviter.name})," invited you to join their team as ",a.jsx(xr,{type:"teamRole",value:h.role}),"."]}),h.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:h.team.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[se.createElement(mI(h.role),{className:"h-4 w-4 text-gray-500"}),a.jsx(xr,{type:"teamRole",value:h.role})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsxs("span",{children:["Invited ",new Date(h.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4"}),a.jsx("span",{className:m(h.expiresAt).includes("Expired")?"text-red-600":"",children:m(h.expiresAt)})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>f(h.id,"decline"),disabled:c===h.id,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Decline"})]}),a.jsx("button",{onClick:()=>f(h.id,"accept"),disabled:c===h.id,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:c===h.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{children:"Accept"})]})})]})]})},h.id))})]})})}function LW(){const[e]=UN(),t=Nt(),{user:r,login:n,signup:s,signupForInvitation:i,refreshUser:o,loading:l,developerLog:c}=ve(),[u,d]=b.useState(null),[f,m]=b.useState(!0),[h,p]=b.useState(null),[y,x]=b.useState("signup"),[v,g]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(!1),[S,P]=b.useState(!1),[C,I]=b.useState(!1),T=e.get("token"),D=Yi(),z=Yi(),q=D.watch("password");b.useEffect(()=>{if(c("🔍 InvitationAccept: Component mounted with token:",T),!T){c("❌ InvitationAccept: No token provided in URL"),p("Invalid invitation link"),m(!1);return}L()},[T]),b.useEffect(()=>{c("🔄 InvitationAccept: State change detected"),c("👤 User state:",r?{id:r.id,email:r.email,name:r.name}:"null"),c("📧 Invitation state:",u?{id:u.id,email:u.email,teamName:u.team.name}:"null"),c("⚙️ Processing state:",j),c("🔐 Auth loading state:",l),r&&u&&!j&&!l&&!S?(c("✅ InvitationAccept: Conditions met for auto-acceptance - calling handleAcceptInvitation"),P(!0),O()):c("⏳ InvitationAccept: Auto-acceptance conditions not met:",{hasUser:!!r,hasInvitation:!!u,isProcessing:j,isAuthLoading:l,acceptanceAttempted:S})},[r,u,j,l,S]);const L=async()=>{if(T)try{c("📥 InvitationAccept: Loading invitation with token:",T),m(!0),p(null);const{data:E,error:$}=await V.from("team_invitations").select(`
          id,
          email,
          role,
          status,
          expires_at,
          invited_by,
          team_id,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("token",T).eq("status","pending").gt("expires_at",new Date().toISOString()).maybeSingle();if($){c("❌ InvitationAccept: Error loading invitation:",$),p("Failed to load invitation details");return}if(!E){c("⚠️ InvitationAccept: No invitation found for token:",T),p("Invitation not found or has expired");return}c("📧 InvitationAccept: Invitation data loaded:",E),c("🔍 InvitationAccept: Raw team data from join:",E.teams),c("🔍 InvitationAccept: Raw team_id:",E.team_id);let R=E.teams;if(!R&&E.team_id){c("🔄 InvitationAccept: Loading team data separately for:",E.team_id);const{data:de,error:he}=await V.from("teams").select("id, name, description").eq("id",E.team_id).single();!he&&de?(R=de,c("✅ InvitationAccept: Team data loaded separately:",R)):c("❌ InvitationAccept: Failed to load team data:",he)}if(!R){c("⚠️ InvitationAccept: Team data missing from invitation"),p("The team associated with this invitation no longer exists");return}let U="Unknown User";if(E.invited_by){c("👤 InvitationAccept: Loading inviter profile for:",E.invited_by);const{data:de,error:he}=await V.rpc("get_user_name_by_id",{p_user_id:E.invited_by});!he&&de?(U=de,c("✅ InvitationAccept: Inviter profile loaded:",U)):c("⚠️ InvitationAccept: Could not load inviter name:",he)}const J={id:E.id,email:E.email,role:E.role,status:E.status,expiresAt:E.expires_at,team:{id:R.id,name:R.name,description:R.description},inviter:{name:U}};c("✅ InvitationAccept: Complete invitation data prepared:",J),d(J),x("signup")}catch(E){c("💥 InvitationAccept: Unexpected error loading invitation:",E),p("An unexpected error occurred")}finally{m(!1)}},O=async()=>{if(c("🎯 InvitationAccept: handleAcceptInvitation called"),c("👤 Current user:",r?{id:r.id,email:r.email}:"null"),c("📧 Current invitation:",u?{id:u.id,email:u.email}:"null"),!u||!r){c("⚠️ InvitationAccept: Cannot accept invitation - missing data:",{hasInvitation:!!u,hasUser:!!r});return}try{if(c("🚀 InvitationAccept: Starting invitation acceptance process"),N(!0),p(null),c("🔍 InvitationAccept: Verifying email match"),c("📧 Invitation email:",u.email.toLowerCase()),c("👤 User email:",r.email.toLowerCase()),u.email.toLowerCase()!==r.email.toLowerCase()){c("❌ InvitationAccept: Email mismatch"),p("This invitation is for a different email address. Please log in with the correct account or contact the team administrator.");return}c("✅ InvitationAccept: Email verification passed"),c("🔍 InvitationAccept: Skipping client-side team capacity check - will be handled by database function"),c("📞 InvitationAccept: Calling accept_team_invitation function with ID:",u.id);const{data:E,error:$}=await V.rpc("accept_team_invitation",{p_invitation_id:u.id});if($){c("❌ InvitationAccept: Database function error:",$),p("Failed to accept invitation. Please try again.");return}if(c("📊 InvitationAccept: Database function response:",E),!E.success){c("❌ InvitationAccept: Database function returned failure:",E.error),E.error&&E.error.includes("maximum capacity")?(I(!0),p("This team has reached its maximum capacity. Please contact the team owner to increase the team size or remove inactive members.")):p(E.error||"Failed to accept invitation");return}c("🎉 InvitationAccept: Invitation accepted successfully!"),c("🔄 InvitationAccept: Refreshing user profile to get updated team info");try{await o(),c("✅ InvitationAccept: User profile refreshed after invitation acceptance")}catch(R){c("⚠️ Could not refresh user profile after invitation acceptance:",R)}x("processing"),c("🔄 InvitationAccept: Setting redirect timer"),setTimeout(()=>{c("🏠 InvitationAccept: Redirecting to dashboard"),t("/dashboard",{replace:!0})},2e3)}catch(E){c("💥 InvitationAccept: Unexpected error accepting invitation:",E),p("An unexpected error occurred")}finally{N(!1)}},A=async E=>{if(u){if(c("📝 InvitationAccept: Signup form submitted"),c("📧 Signup email:",u.email),c("👤 Signup name:",E.name),C){p("Cannot create account - the team has reached maximum capacity. Please contact the team owner.");return}try{p(null),c("🚀 InvitationAccept: Calling signupForInvitation function"),await i(u.email,E.password,E.name),c("✅ InvitationAccept: Signup completed successfully")}catch($){c("❌ InvitationAccept: Signup error:",$),$.message&&$.message.toLowerCase().includes("user already registered")?(c("🔄 InvitationAccept: User already exists, switching to login mode"),p("An account with this email already exists. Please sign in instead."),x("login")):p($.message||"Failed to create account")}}},k=async E=>{if(u){c("🔐 InvitationAccept: Login form submitted"),c("📧 Login email:",u.email);try{p(null),c("🚀 InvitationAccept: Calling login function"),await n(u.email,E.password),c("✅ InvitationAccept: Login completed successfully")}catch($){c("❌ InvitationAccept: Login error:",$),$.message&&($.message.toLowerCase().includes("invalid")||$.message.toLowerCase().includes("not found"))?(c("🔄 InvitationAccept: Invalid credentials, switching to signup mode"),p("Invalid credentials. If you don't have an account, please create one."),x("signup")):p($.message||"Invalid password")}}};return f?(c("⏳ InvitationAccept: Rendering loading state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitation..."})]})})):h&&!u?(c("❌ InvitationAccept: Rendering error state (no invitation)"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(tn,{className:"h-7 w-7 text-red-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Invalid Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:h})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>t("/"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Home"})})]})})):y==="processing"?(c("🎉 InvitationAccept: Rendering success/processing state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Dt,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome to the Team!"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["You have successfully joined ",a.jsx("strong",{children:u==null?void 0:u.team.name}),". Redirecting you to the dashboard..."]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})})]})})):u?(c("📋 InvitationAccept: Rendering main form in mode:",y),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Vn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Team Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"You've been invited to join a team"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-1",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.team.name})}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:u.inviter.name})," invited you to join as"," ",a.jsx(xr,{type:"teamRole",value:u.role,showIcon:!0})]})]})]}),u.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:u.team.description}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Invitation expires: ",new Date(u.expiresAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:[h&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{children:h}),C&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:()=>{p(null),I(!1),P(!1),r&&u&&O()},className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm font-medium transition-colors",children:"Try Again"})})]})]})}),y==="signup"&&!C?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Your Account"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Complete your account setup to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:D.handleSubmit(A),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full name"}),a.jsx("input",{id:"name",type:"text",autoComplete:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...D.register("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),D.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...D.register("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),D.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.formState.errors.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:w?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...D.register("confirmPassword",{required:"Please confirm your password",validate:E=>E===q||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>_(!w),children:w?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),D.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.formState.errors.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Creating account..."})]}):"Create Account & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx("button",{onClick:()=>x("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Sign in instead"})]})})]}):C?a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800 mb-4",children:[a.jsx(Xe,{className:"h-6 w-6"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Team at Capacity"})]}),a.jsxs("p",{className:"text-yellow-700 mb-4",children:["The team ",a.jsx("strong",{children:u.team.name})," has reached its maximum member limit."]}),a.jsx("p",{className:"text-sm text-yellow-600",children:'Please contact the team owner to increase the team capacity or remove inactive members, then use the "Try Again" button above.'})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign In to Join"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Sign in to your account to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:z.handleSubmit(k),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...z.register("password",{required:"Password is required"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),z.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.formState.errors.password.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Signing in..."})]}):"Sign In & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>x("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Create one now"})]})})]})]})]})})):(c("⚠️ InvitationAccept: No invitation data available"),null)}function RW(){var q,L,O,A,k,E,$;const{developerLog:e}=ve(),t=Nt(),{user:r}=ve();aa();const{getActiveSessionsForUser:n,deleteQuizSession:s}=fi(),[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),[f,m]=b.useState(1),[h,p]=b.useState(0),y=10,[x,v]=b.useState(!1),[g,w]=b.useState(null),_=r?n(r.id):[],j=se.useCallback((R,U)=>U===0?0:Math.round(R/U*100),[]),N=se.useCallback((R,U)=>U===0?0:Math.round(R/U*100),[]),S=se.useCallback(R=>{w(R),v(!0)},[]),P=se.useCallback(async()=>{if(r)try{c(!0),d(null),e("📥 Loading recent quiz activities for user:",r.id);const{data:R,error:U,count:J}=await V.from("quiz_sessions").select("id, title, total_points, max_points, completed_at, estimated_minutes, type",{count:"exact"}).eq("user_id",r.id).eq("status","completed").not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(y).range((f-1)*y,f*y-1);if(U)throw console.error("❌ Error loading recent activities:",U),U;e("✅ Recent activities loaded:",(R==null?void 0:R.length)||0,"activities"),e("🔍 Quiz Center: Recent activities data:",R),o(R||[]),p(J||0)}catch(R){console.error("💥 Error loading recent activities:",R),d("Failed to load recent quiz activities")}finally{c(!1)}},[r,f,y,e]),C=R=>{m(R)},I=Math.ceil(h/y),T=se.useCallback(async()=>{if(g)try{await s(g),await P(),v(!1),w(null)}catch(R){console.error("Error deleting quiz session:",R)}},[g,s,P]),D=se.useCallback(R=>{t(`/quiz/runner/${R}`)},[t]);b.useEffect(()=>{r?P():c(!1)},[r,P]);const z=[{id:"quick-start",title:"Quick Start",description:"Jump into a random quiz with questions from your subscription tier. Perfect for quick practice sessions.",icon:Vn,color:"bg-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",hoverColor:"hover:bg-green-100",features:["Random questions from your tier","90 questions per session","Instant feedback","Mock PBE test experience"],action:"Start Quiz",onClick:()=>t("/quiz/quick-start"),disabled:!((q=r==null?void 0:r.planSettings)!=null&&q.allow_quick_start_quiz),tooltip:(L=r==null?void 0:r.planSettings)!=null&&L.allow_quick_start_quiz?"":"Not available on your current plan"},{id:"create-your-own",title:"Create Your Own",description:"Build custom quizzes by selecting specific books, chapters, and difficulty levels. Tailor your study experience.",icon:ko,color:"bg-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200",hoverColor:"hover:bg-blue-100",features:["Choose specific Bible books","Select chapter ranges","Set difficulty level","Customize question count"],action:"Create Quiz",onClick:()=>t("/quiz/create-own"),disabled:!((O=r==null?void 0:r.planSettings)!=null&&O.allow_create_own_quiz),tooltip:(A=r==null?void 0:r.planSettings)!=null&&A.allow_create_own_quiz?"":"Not available on your current plan"},{id:"study-schedule",title:"Study Schedule",description:"Follow a structured study plan with progressive difficulty and comprehensive coverage of the material.",icon:Yt,color:"bg-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200",hoverColor:"hover:bg-purple-100",features:["Structured learning path","Progressive difficulty","Track your progress","Daily study goals"],action:"View Schedule",onClick:()=>t("/schedule"),disabled:!((k=r==null?void 0:r.planSettings)!=null&&k.allow_study_schedule_quiz),tooltip:(E=r==null?void 0:r.planSettings)!=null&&E.allow_study_schedule_quiz?"":"Upgrade to Pro plan to access Study Schedule"}];return a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Quiz Center"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Practice your Pathfinder Bible Experience knowledge with interactive quizzes."})]}),_.length>0&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[a.jsx(Hi,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Resume Quiz Sessions"})]}),a.jsx("div",{className:"space-y-4",children:_.map(R=>{const U=N(R.current_question_index,R.questions.length),J=R.results.length,de=R.questions.length;return a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:se.createElement(vb(R.type),{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:R.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:NS(R.type)}),a.jsx("span",{children:"•"}),R.type==="study-assignment"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:oo(R.study_items||[])}),a.jsx("span",{children:"•"})]}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Question ",R.current_question_index+1," of ",de]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[R.total_points," points earned"]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"w-full sm:w-48 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${U}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[U,"% complete (",J,"/",de," answered)"]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end flex-shrink-0",children:[a.jsxs("div",{className:"text-right text-sm text-gray-600 flex-shrink-0",children:[a.jsx("div",{children:"Started"}),a.jsx("div",{children:Rp(R.created_at)})]}),a.jsx("button",{onClick:()=>S(R.id),className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(ii,{className:"h-4 w-4"})}),a.jsxs("button",{onClick:()=>D(R.id),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(Hi,{className:"h-4 w-4"}),a.jsx("span",{children:"Resume"})]})]})]},R.id)})})]}),a.jsx(Pn,{isOpen:x,onClose:()=>{v(!1),w(null)},title:"Delete Quiz Session",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{v(!1),w(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsx("button",{onClick:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Delete Session"})]}),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(qn,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 mb-2",children:"Are you sure you want to delete this quiz session?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. All progress and results for this session will be permanently lost."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:z.map(R=>a.jsxs("div",{className:`relative bg-white rounded-xl shadow-sm border-2 ${R.borderColor} transition-all duration-200 group ${R.disabled?"opacity-60 cursor-not-allowed":`${R.hoverColor} hover:shadow-md cursor-pointer`}`,children:[R.disabled&&R.tooltip&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-xl z-10",children:a.jsx("span",{className:"text-white text-center p-4 font-semibold text-sm",children:R.tooltip})}),a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:`h-12 w-12 ${R.color} rounded-lg flex items-center justify-center`,children:a.jsx(R.icon,{className:"h-6 w-6 text-white"})}),a.jsx("div",{className:"ml-4",children:a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:R.title})})]}),a.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:R.description}),a.jsx("div",{className:"space-y-2 mb-6",children:R.features.map((U,J)=>a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full mr-3 flex-shrink-0"}),a.jsx("span",{children:U})]},J))}),a.jsxs("button",{onClick:R.onClick,disabled:R.disabled,className:`w-full flex items-center justify-center space-x-2 py-3 px-4 ${R.color} text-white rounded-lg transition-all duration-200 ${R.disabled?"opacity-50 cursor-not-allowed":"hover:opacity-90 group-hover:shadow-lg"}`,children:[a.jsx(io,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:R.action}),a.jsx(gS,{className:"h-4 w-4"})]})]})]},R.id))}),a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Quiz Activity"}),l&&a.jsx(zt,{text:"Loading recent activities...",className:"py-8"}),u&&a.jsx(Re,{type:"error",message:u,className:"mb-4"}),!l&&!u&&a.jsx("div",{className:"space-y-4",children:i.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Recent Activity"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't completed any quizzes yet. Start your first quiz to see your activity here!"}),(($=r==null?void 0:r.planSettings)==null?void 0:$.allow_quick_start_quiz)&&a.jsx("button",{onClick:()=>t("/quiz/quick-start"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]}):i.map(R=>{const U=j(R.total_points,R.max_points),J=Rp(R.completed_at),de=vb(R.type);return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(de,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:R.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Completed with ",U,"% accuracy"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[R.total_points,"/",R.max_points," points"]}),R.estimated_minutes>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["~",R.estimated_minutes," min"]})]})]})]})]}),a.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap flex-shrink-0",children:J})]},R.id)})}),I>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(f-1)*y+1,"-",Math.min(f*y,h)," of ",h," activities"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>C(f-1),disabled:f===1,className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(F0,{className:"h-4 w-4"}),a.jsx("span",{children:"Previous"})]}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",f," of ",I]}),a.jsxs("button",{onClick:()=>C(f+1),disabled:f===I,className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx("span",{children:"Next"}),a.jsx(gf,{className:"h-4 w-4"})]})]})]})]})]})})}function qW({initialTime:e,onTimeExpired:t,onTimeUpdate:r}){const[n,s]=b.useState(e),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(!1);b.useEffect(()=>{let x;return i&&(x=setInterval(()=>{s(v=>{const g=v-1;return r(g),g<=0&&(o(!1),d(!0),t()),Math.max(0,g)})},1e3)),()=>{x&&clearInterval(x)}},[i,t,r]);const f=b.useCallback(()=>{!l&&!u&&(o(!0),c(!0))},[l,u]),m=b.useCallback(x=>{s(x),o(!1),c(!1),d(!1)},[]),h=b.useCallback(()=>{o(!1)},[]),p=b.useCallback(x=>{o(x)},[]),y=b.useCallback(x=>{c(x)},[]);return{timeLeft:n,timerActive:i,timerStarted:l,hasTimeExpired:u,startTimer:f,resetTimer:m,stopTimer:h,setHasTimeExpired:d,setTimerActiveState:p,setTimerStartedState:y}}function FW(e){const[t,r]=b.useState(!0),n=b.useMemo(()=>e?t?{background:"bg-gradient-to-b from-[#1a255b] to-[#0e132f]",card:"bg-transparent",text:"text-white",textSecondary:"text-white/80",border:"border-white/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm",progressBar:"bg-white"}:{background:"bg-[#FAFAFA]",card:"bg-transparent",text:"text-[#1a255b]",textSecondary:"text-[#1a255b]/80",border:"border-[#1a255b]/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-[#1a255b]/20 hover:bg-[#1a255b]/30 text-[#1a255b] backdrop-blur-sm",progressBar:"bg-[#1a255b]"}:{background:"bg-gray-50",card:"bg-white",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-200",button:"bg-indigo-600 hover:bg-indigo-700",timerButton:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700",progressBar:"bg-green-600"},[e,t]);return{isDarkMode:t,themeClasses:n,toggleDarkMode:()=>{r(!t)}}}function UW({isFullScreen:e,isDarkMode:t,currentQuestionIndex:r,totalQuestions:n,progressPercentage:s,timeLeft:i,timerStarted:o,showAnswer:l,themeClasses:c,onBack:u,onToggleFullScreen:d,onToggleDarkMode:f,onStartTimer:m,formatTime:h}){return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:a.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"/PBE-logo_600px.png",alt:"Pathfinder Bible Experience",className:"h-24 sm:h-32 md:h-40 w-auto"})}),a.jsxs("div",{className:`text-center ${c.text} hidden sm:block`,children:[a.jsxs("div",{className:"text-sm sm:text-lg font-semibold",children:["Question ",r+1," of ",n]}),a.jsxs("div",{className:"text-xs sm:text-sm opacity-75",children:[s,"% correct so far"]}),a.jsx("div",{className:`w-32 sm:w-64 ${c.timerButton} rounded-full h-2 mt-2 mx-auto`,children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("button",{onClick:m,disabled:o||l,className:`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Ge,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:`font-mono text-sm sm:text-lg ${i<=10?"text-red-300":""}`,children:h(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:`p-2 ${c.text} hover:bg-white/10 rounded-lg transition-all duration-200 backdrop-blur-sm`,title:"Exit full screen",children:a.jsx(pM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}),a.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-4 sm:left-6 z-30",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:f,className:`p-2 sm:p-3 rounded-full ${t?"bg-gray-700 text-yellow-400":"bg-gray-600 text-white"} backdrop-blur-sm transition-all duration-200 hover:scale-110`,title:t?"Switch to light mode":"Switch to dark mode",children:t?a.jsx(jM,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(gM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})})})]}):a.jsxs("div",{className:`${c.card} rounded-xl shadow-sm p-6 mb-6`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{children:a.jsxs("h1",{className:`text-lg font-semibold ${c.text}`,children:["Question ",r+1," of ",n]})})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:m,disabled:o||l,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Ge,{className:"h-4 w-4"}),a.jsx("span",{className:`font-mono text-lg ${i<=10?"text-red-600":""}`,children:h(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",title:"Enter full screen",children:a.jsx(fM,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})}),a.jsx("div",{className:"text-center mt-4",children:a.jsxs("div",{className:`text-sm ${c.textSecondary}`,children:[s,"% correct so far"]})})]})}function BW({question:e,hasTimeExpired:t,isFullScreen:r,isDarkMode:n,themeClasses:s}){return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 sm:mb-4 ${r?n?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${r?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("h2",{className:`font-semibold ${s.text} leading-relaxed ${r?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.question})]}),t&&a.jsxs("div",{className:`mb-6 p-4 border-2 ${r?"border-red-300 bg-red-500/20":"border-red-200 bg-red-50"} rounded-lg`,children:[a.jsxs("div",{className:`flex items-center justify-center space-x-2 ${r?"text-red-300":"text-red-700"}`,children:[a.jsx(qn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold text-lg",children:"Time's Up!"})]}),a.jsx("p",{className:`${r?"text-red-200":"text-red-600"} text-sm mt-1`,children:'Click "Show Answer" to reveal the answer and mark your response'})]})]})}const QW=b.memo(BW);function VW({question:e,isFullScreen:t,isDarkMode:r,themeClasses:n}){return a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 ${t?r?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${t?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("div",{className:`text-sm ${n.textSecondary} mb-2`,children:"Answer:"}),a.jsx("div",{className:`font-semibold p-4 rounded-lg ${n.text} ${t?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.answer})]})})}const WW=b.memo(VW);function KW({isFullScreen:e,showAnswer:t,hasTimeExpired:r,themeClasses:n,onShowAnswer:s,onShowQuestion:i,onCorrect:o,onIncorrect:l}){return e?a.jsx("div",{className:"fixed bottom-4 sm:bottom-6 left-0 right-0 z-20 px-4 sm:px-6",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sm:hidden flex flex-col items-center space-y-3",children:[a.jsxs("button",{onClick:i,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Yr,{className:"h-5 w-5"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex space-x-3 w-full max-w-xs",children:[a.jsx("button",{onClick:o,className:"bg-[#58c16c] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Mt,{className:"h-5 w-5"})}),a.jsx("button",{onClick:l,className:"bg-[#F93F54] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Ln,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-8",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Mt,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Correct"})]}),a.jsxs("button",{onClick:i,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Yr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Ln,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Incorrect"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"sm:hidden flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Xr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})}),a.jsx("div",{className:"hidden sm:flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Xr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})]})}):a.jsx("div",{className:"flex justify-center mt-6",children:t?a.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[a.jsxs("button",{onClick:i,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2 mx-auto mb-6",children:[a.jsx(Yr,{className:"h-4 w-4"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Mt,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Correct"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Ln,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Incorrect"})]})]})]}):a.jsxs("button",{onClick:s,className:"bg-indigo-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx(Xr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})}function HW({title:e,stats:t,bonusXp:r,isFullScreen:n,themeClasses:s,onRestart:i,onBack:o,formatTime:l}){const c=t.totalPointsEarned+r;return a.jsx("div",{className:`min-h-screen ${s.background}`,children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:`${s.card} rounded-xl shadow-sm p-8 text-center border ${s.border}`,children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Kt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:`text-2xl font-bold ${s.text} mb-4`,children:"Quiz Completed!"}),a.jsxs("p",{className:`${s.textSecondary} mb-8`,children:["Great job! Here's how you performed on your ",e.toLowerCase(),"."]}),a.jsxs("div",{className:`mb-8 p-6 rounded-lg ${n?"bg-white/10":"bg-gradient-to-r from-blue-50 to-indigo-50"} border-2 border-indigo-200`,children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(Kt,{className:"h-6 w-6 text-indigo-600"}),a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-indigo-900"}`,children:"Experience Points Earned"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-white/80":"text-indigo-700"}`,children:"Quiz Points:"}),a.jsxs("span",{className:`font-bold text-lg ${n?"text-white":"text-indigo-900"}`,children:["+",t.totalPointsEarned," XP"]})]}),r>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-white/80":"text-green-700"}`,children:"On-Time Bonus:"}),a.jsxs("span",{className:`font-bold text-lg ${n?"text-white":"text-green-700"}`,children:["+",r," XP"]})]}),a.jsx("div",{className:`border-t pt-3 ${n?"border-white/20":"border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`font-semibold ${n?"text-white":"text-indigo-900"}`,children:"Total XP Earned:"}),a.jsxs("span",{className:`font-bold text-2xl ${n?"text-white":"text-indigo-900"}`,children:["+",c," XP"]})]})})]}),r>0&&a.jsx("div",{className:`mt-4 p-3 rounded-lg ${n?"bg-white/10":"bg-green-100"} border ${n?"border-white/20":"border-green-200"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:"🎉"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-white":"text-green-800"}`,children:"Congratulations! You completed your study assignment on time!"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[t.accuracy,"%"]}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Accuracy"}),a.jsxs("div",{className:`text-xs ${s.textSecondary} mt-1`,children:[t.correctAnswers," of ",t.totalQuestions," correct"]})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.totalPointsEarned}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Points Earned"}),a.jsxs("div",{className:`text-xs ${s.textSecondary} mt-1`,children:["of ",t.totalPossiblePoints," possible"]})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:l(t.averageTime)}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Avg Time"}),a.jsx("div",{className:`text-xs ${s.textSecondary} mt-1`,children:"per question"})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[Math.round(t.totalPointsEarned/t.totalPossiblePoints*100),"%"]}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Score"}),a.jsx("div",{className:`text-xs ${s.textSecondary} mt-1`,children:"overall performance"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:i,className:"flex items-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:[a.jsx(Hi,{className:"h-4 w-4"}),a.jsx("span",{children:"Take Another Quiz"})]}),a.jsxs("button",{onClick:o,className:"flex items-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})]})]})})})})}function GW({isOpen:e,questionPoints:t,selectedPoints:r,onPointsChange:n,onConfirm:s,onCancel:i,themeClasses:o,isFullScreen:l}){return a.jsxs(Pn,{isOpen:e,onClose:i,title:"Partial Credit",themeClasses:o,isFullScreen:l,footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:i,className:`flex-1 px-4 py-2 border ${o.border} ${l&&window.innerWidth<640?"text-gray-900":o.text} rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200`,children:"Cancel"}),a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Confirm"})]}),children:[a.jsxs("p",{className:`${o.textSecondary||"text-gray-600"} mb-6`,children:["This question is worth ",t," points. How many points did you earn?"]}),a.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:t},(c,u)=>a.jsx("button",{onClick:()=>n(u),className:`p-2 rounded-lg border-2 transition-colors duration-200 ${r===u?"border-indigo-500 bg-indigo-50 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-200":"border-gray-200 hover:border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray dark:hover:border-gray-500"}`,children:u},u))})]})}function yh({quizSessionId:e,backUrl:t,onSessionDeleted:r}){var W;const n=Nt(),s=LN(),{user:i,developerLog:o}=ve(),{loadQuizSession:l,updateQuizSession:c,deleteQuizSession:u}=fi(),d=b.useRef(null),f=s.quizSessionId||e,m=t||"/quiz",[h,p]=b.useState(null),[y,x]=b.useState(!0),[v,g]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(0),[S,P]=b.useState(!1),[C,I]=b.useState(!1);b.useState(!1);const[T,D]=b.useState(null),{isDarkMode:z,themeClasses:q,toggleDarkMode:L}=FW(C),{timeLeft:O,timerActive:A,timerStarted:k,hasTimeExpired:E,startTimer:$,resetTimer:R,stopTimer:U,setHasTimeExpired:J,setTimerActiveState:de,setTimerStartedState:he}=qW({initialTime:30,onTimeExpired:()=>{ee({timer_active:!1,has_time_expired:!0})},onTimeUpdate:se.useCallback(F=>{f&&c(f,{time_left:F})},[f,c])});b.useEffect(()=>{if(!f){console.error("No quiz session ID provided"),n("/quiz");return}try{const F=l(f);if(!F){console.error("Quiz session not found"),setTimeout(()=>{n(m)},2e3);return}p(F),F.status==="completed"?g(!0):(_(F.show_answer),R(F.time_left),J(F.has_time_expired),de(F.timer_active),he(F.timer_started),F.show_answer||(d.current=Date.now()))}catch(F){console.error("Error loading quiz session:",F),setTimeout(()=>{n(m)},2e3)}finally{x(!1)}},[f,l,n,m,R,J,de,he]);const ee=F=>{if(!h)return;const H={...h,...F};p(H),c(f,F)},ye=async(F,H,G,Z,ce)=>{if(!(!i||!h))try{o("📝 Logging question result to database:",{quiz_session_id:h.id,user_id:i.id,question_id:F,points_earned:H,total_points_possible:G,time_spent:Z,is_correct:ce});const{error:fe}=await V.from("quiz_question_logs").insert([{quiz_session_id:h.id,user_id:i.id,question_id:F,points_earned:H,total_points_possible:G,time_spent:Z,answered_at:new Date().toISOString(),is_correct:ce}]);fe?o("❌ Error logging question result:",fe):o("✅ Question result logged successfully")}catch(fe){o("💥 Unexpected error logging question result:",fe)}},Ct=()=>{_(!0),U(),J(!1),ee({show_answer:!0,timer_active:!1,has_time_expired:!1})},Q=()=>{if(!h)return;const F=h.questions[h.current_question_index];_(!1);const H=(F==null?void 0:F.time_to_answer)||30;R(H),J(!1),ee({show_answer:!1,time_left:H,timer_active:!1,timer_started:!1,has_time_expired:!1})},te=async()=>{if(!h)return;const F=d.current?(Date.now()-d.current)/1e3:0,H=F>0&&F<1?1:Math.floor(F),G=h.questions[h.current_question_index],Z=Number(G.points)||0,ce={questionId:G.id,pointsEarned:Z,totalPoints:Z,timeSpent:H,answeredAt:new Date().toISOString()};o("✅ QuizRunner: Correct answer - creating result:",{questionId:G.id,questionPoints:G.points,actualPoints:Z,pointsEarned:ce.pointsEarned,totalPoints:ce.totalPoints,timeSpent:ce.timeSpent});const fe=[...h.results,ce];await ye(G.id,Z,Z,H,!0),o("📊 QuizRunner: Updated results array:",{previousResultsLength:h.results.length,newResultsLength:fe.length,newResult:ce,allResults:fe}),h.current_question_index>=h.questions.length-1?await me(fe):(ee({results:fe}),Ve())},le=async()=>{if(!h)return;const F=d.current?(Date.now()-d.current)/1e3:0,H=F>0&&F<1?1:Math.floor(F),G=h.questions[h.current_question_index],Z=Number(G.points)||0;if(Z>1)P(!0);else{const ce={questionId:G.id,pointsEarned:0,totalPoints:Z,timeSpent:H,answeredAt:new Date().toISOString()};o("❌ QuizRunner: Incorrect answer - creating result:",{questionId:G.id,questionPoints:G.points,actualPoints:Z,pointsEarned:ce.pointsEarned,totalPoints:ce.totalPoints,timeSpent:ce.timeSpent}),await ye(G.id,0,Z,H,!1);const fe=[...h.results,ce];o("📊 QuizRunner: Updated results array (incorrect):",{previousResultsLength:h.results.length,newResultsLength:fe.length,newResult:ce,allResults:fe}),h.current_question_index>=h.questions.length-1?await me(fe):(ee({results:fe}),Ve())}},Y=async()=>{if(!h)return;const F=h.questions[h.current_question_index],H=d.current?Math.floor((Date.now()-d.current)/1e3):0,G=Number(F.points)||0,Z=Number(j)||0,ce={questionId:F.id,pointsEarned:Z,totalPoints:G,timeSpent:H,answeredAt:new Date().toISOString()};o("🔄 QuizRunner: Partial points - creating result:",{questionId:F.id,questionPoints:F.points,actualPoints:G,partialPoints:j,actualPartialPoints:Z,pointsEarned:ce.pointsEarned,totalPoints:ce.totalPoints,timeSpent:ce.timeSpent}),await ye(F.id,Z,G,H,!1);const fe=[...h.results,ce];o("📊 QuizRunner: Updated results array (partial):",{previousResultsLength:h.results.length,newResultsLength:fe.length,newResult:ce,allResults:fe}),h.current_question_index>=h.questions.length-1?await me(fe):(ee({results:fe}),P(!1),N(0),Ve())},Ve=()=>{if(h)if(h.current_question_index<h.questions.length-1){const F=h.current_question_index+1,H=h.questions[F],G=(H==null?void 0:H.time_to_answer)||30;_(!1),J(!1),R(G),d.current=Date.now(),ee({current_question_index:F,show_answer:!1,has_time_expired:!1,time_left:G,timer_active:!1,timer_started:!1})}else me(h.results)},me=async F=>{if(!h||!f)return;const H=F.reduce((xe,qe)=>xe+(Number(qe.pointsEarned)||0),0),G=F.reduce((xe,qe)=>xe+(Number(qe.totalPoints)||0),0),Z=F.filter(xe=>(xe.pointsEarned||0)===(xe.totalPoints||0)).length,ce=F.length>0?Math.round(Z/F.length*100):0,fe=F.length>0?Math.round(F.reduce((xe,qe)=>xe+(qe.timeSpent||0),0)/F.length):0;D({totalPointsEarned:H,totalPossiblePoints:G,accuracy:ce,correctAnswers:Z,totalQuestions:F.length,averageTime:fe}),o("🏁 QuizRunner: Quiz completion - final calculations:",{finalResultsLength:F.length,finalResults:F,finalTotalPoints:H,sessionTotalPoints:h.total_points}),g(!0),U(),await c(f,{results:F,status:"completed",completed_at:new Date().toISOString(),timer_active:!1,total_points:H})},Oe=()=>{if(!h)return{totalPointsEarned:0,totalPossiblePoints:0,accuracy:0,correctAnswers:0,totalQuestions:0,averageTime:0};const F=Array.isArray(h.results)?h.results:[],H=F.reduce((xe,qe)=>xe+((qe==null?void 0:qe.pointsEarned)||0),0),G=F.reduce((xe,qe)=>xe+((qe==null?void 0:qe.totalPoints)||0),0),Z=F.filter(xe=>((xe==null?void 0:xe.pointsEarned)||0)===((xe==null?void 0:xe.totalPoints)||0)).length,ce=F.length>0?Math.round(Z/F.length*100):0,fe=F.length>0?Math.round(F.reduce((xe,qe)=>xe+((qe==null?void 0:qe.timeSpent)||0),0)/F.length):0;return{totalPointsEarned:H,totalPossiblePoints:G,accuracy:ce,correctAnswers:Z,totalQuestions:F.length,averageTime:fe}},et=()=>{r?(u(f),r()):n(m)},ut=()=>{window.innerWidth<640||I(!C)},We=F=>{const H=Math.floor(F/60),G=F%60;return`${H}:${G.toString().padStart(2,"0")}`};if(y)return a.jsx(ge,{hideHeaderAndSidebar:C,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading quiz session..."})]})})});if(!h)return a.jsx(ge,{hideHeaderAndSidebar:C,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(qn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quiz Session Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The quiz session could not be loaded. You will be redirected shortly."}),a.jsx("button",{onClick:()=>n(m),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go Back Now"})]})})});const Xt=Oe();if(v)return a.jsx(ge,{hideHeaderAndSidebar:C,children:a.jsx(HW,{title:h.title,stats:T||Xt,bonusXp:h.bonus_xp||0,isFullScreen:C,themeClasses:q,onRestart:et,onBack:()=>n(m),formatTime:We})});const M=(W=h.questions)==null?void 0:W[h.current_question_index],B=h.results.length>0?Math.round(Xt.correctAnswers/h.results.length*100):0;return a.jsx(ge,{hideHeaderAndSidebar:C,children:a.jsxs("div",{className:`min-h-screen ${q.background} relative overflow-x-hidden`,children:[a.jsx(UW,{isFullScreen:C,isDarkMode:z,currentQuestionIndex:h.current_question_index,totalQuestions:h.questions.length,progressPercentage:B,timeLeft:O,timerStarted:k,showAnswer:w,themeClasses:q,onBack:()=>n(m),onToggleFullScreen:ut,onToggleDarkMode:L,onStartTimer:$,formatTime:We}),a.jsx("div",{className:`${C?"pt-28 sm:pt-40 px-4 sm:px-6 pb-32 sm:pb-32":"p-4 sm:p-6"}`,children:a.jsx("div",{className:`${C?"w-full max-w-none":"max-w-4xl mx-auto"}`,children:a.jsx("div",{className:`${q.card} rounded-xl shadow-sm p-4 sm:p-8 ${C?"w-full":"mx-auto max-w-3xl"} ${C?"":"border "+q.border}`,children:w?a.jsx(WW,{question:M,isFullScreen:C,isDarkMode:z,themeClasses:q}):a.jsx(QW,{question:M,hasTimeExpired:E,isFullScreen:C,isDarkMode:z,themeClasses:q})})})}),a.jsx(KW,{isFullScreen:C,showAnswer:w,hasTimeExpired:E,themeClasses:q,onShowAnswer:Ct,onShowQuestion:Q,onCorrect:te,onIncorrect:le}),a.jsx(GW,{isOpen:S,questionPoints:(M==null?void 0:M.points)||0,selectedPoints:j,onPointsChange:N,onConfirm:Y,onCancel:()=>P(!1),themeClasses:q,isFullScreen:C})]})})}function YW(){const e=Nt(),{user:t,developerLog:r}=ve(),{questions:n,fetchQuestions:s}=aa(),{createQuizSession:i,getActiveSessionsForUser:o}=fi(),[l,c]=b.useState(null),[u,d]=b.useState(!0),[f,m]=b.useState(null),h=b.useRef(!1);b.useEffect(()=>{s()},[s]),b.useEffect(()=>{if(h.current){d(!1);return}if(!t){m("User not authenticated"),d(!1);return}if(l){d(!1);return}if(n.length===0)return;(async()=>{var x,v;h.current=!0,d(!0);try{r("🔍 Checking for existing active quick-start sessions...");const w=o(t.id).find(T=>T.type==="quick-start"&&(T.status==="active"||T.status==="paused"));if(w){r("✅ Found existing quick-start session, resuming:",w.id),e(`/quiz/runner/${w.id}`);return}r("🆕 No existing quick-start session found, creating new one..."),r("🎯 Initializing quiz session with",n.length,"total questions");const _=((x=t==null?void 0:t.planSettings)==null?void 0:x.question_tier_access)||["free"];r("👤 User accessible tiers:",_);const j=n.filter(T=>_.includes(T.tier));if(r("✅ Accessible questions:",j.length),j.length===0){m("No questions available for your subscription tier"),d(!1);return}const N=[...j].sort(()=>.5-Math.random()),S=N.slice(0,Math.min(90,N.length));r("🎲 Selected questions for quiz:",S.length);const P=S.reduce((T,D)=>T+D.points,0),C=S.reduce((T,D)=>T+D.time_to_answer,0);r("📊 Quiz metadata - Points:",P,"Minutes:",estimatedMinutes);const I=await i({type:"quick-start",title:"Quick Start Quiz",description:"Test your Pathfinder Bible Experience knowledge with random questions. Each question has a time limit and point value based on difficulty.",user_id:t.id,team_id:t.teamId,questions:S,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((v=S[0])==null?void 0:v.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:P,total_actual_time_spent_seconds:0});r("🎉 Quiz session created with ID:",I),c(I),e(`/quiz/runner/${I}`)}catch(g){r("💥 Error initializing quiz session:",g),m(g instanceof Error?g.message:"Failed to create quiz session"),h.current=!1,d(!1)}})()},[t,n,i,o,e]);const p=()=>{c(null),window.location.href="/quiz"};return u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Preparing your quiz..."})]})}):f?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-red-600 text-xl",children:"⚠"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Start Quiz"}),a.jsx("p",{className:"text-gray-600 mb-4",children:f}),a.jsx("button",{onClick:()=>window.location.href="/quiz",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Back to Quiz Center"})]})}):l?a.jsx(yh,{quizSessionId:l,backUrl:"/quiz",onSessionDeleted:p}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Starting quiz session..."})]})})}function XW(){var L,O,A;const e=Nt(),{user:t}=ve(),{questions:r,loading:n,fetchQuestions:s}=aa(),{createQuizSession:i}=fi(),[o,l]=b.useState(null);b.useEffect(()=>{t&&t.planSettings&&!t.planSettings.allow_create_own_quiz&&e("/quiz",{replace:!0})},[t,e]);const[c,u]=b.useState([]),[d,f]=b.useState({}),[m,h]=b.useState(20);b.useEffect(()=>{s()},[s]);const p=se.useMemo(()=>_S(r),[r]),y=se.useCallback(()=>{var $;if(c.length===0)return[];let k=[];return c.forEach(R=>{const U=d[R]||[];if(U.length>0){const J=r.filter(de=>de.book_of_bible===R&&U.includes(de.chapter));k=[...k,...J]}}),k=Ma(k,(($=t==null?void 0:t.subscription)==null?void 0:$.plan)||"free"),[...k].sort(()=>.5-Math.random()).slice(0,Math.min(m,k.length))},[c,d,r,(L=t==null?void 0:t.subscription)==null?void 0:L.plan,m]),x=se.useCallback(()=>{if(c.length===0)return 0;let k=0;return c.forEach(E=>{var R;const $=d[E]||[];if($.length>0){const U=r.filter(J=>J.book_of_bible===E&&$.includes(J.chapter));k+=Ma(U,((R=t==null?void 0:t.subscription)==null?void 0:R.plan)||"free").length}}),k},[c,d,r,(O=t==null?void 0:t.subscription)==null?void 0:O.plan]),v=se.useCallback(()=>c.length===0?"Custom Quiz":c.length===1?`${c[0]} Quiz`:c.length===2?`${c[0]} & ${c[1]} Quiz`:`Multi-Book Quiz (${c.length} books)`,[c]),g=y(),w=se.useCallback(()=>{if(c.length===0)return"Custom quiz";const k=Object.values(d).reduce(($,R)=>$+R.length,0);return`Custom quiz covering ${c.length<=2?c.join(" & "):`${c.slice(0,2).join(", ")} and ${c.length-2} more`} with ${k} chapters and ${g.length} questions.`},[c,d,g.length]),j=(()=>{var k;return((k=t==null?void 0:t.planSettings)==null?void 0:k.max_questions_custom_quiz)||20})(),N=((A=t==null?void 0:t.subscription)==null?void 0:A.plan)||"free",S=se.useCallback(k=>{u(E=>{const $=E.includes(k)?E.filter(R=>R!==k):[...E,k];return $.includes(k)||f(R=>{const U={...R};return delete U[k],U}),$})},[]),P=se.useCallback((k,E)=>{f($=>{const R=$[k]||[],U=R.includes(E)?R.filter(J=>J!==E):[...R,E];return{...$,[k]:U}})},[]),C=se.useCallback(k=>{const E=Va(k,r),R=(d[k]||[]).length===E.length;f(U=>({...U,[k]:R?[]:E}))},[r,d]),I=x(),T=se.useCallback(async()=>{var R;if(g.length===0||!t)return;const k=g.reduce((U,J)=>U+J.points,0);g.reduce((U,J)=>U+J.time_to_answer,0);const E=v(),$=w();try{const U=await i({type:"custom",title:E,description:$,user_id:t.id,team_id:t.teamId,questions:g,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((R=g[0])==null?void 0:R.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:k,total_actual_time_spent_seconds:0});l(U)}catch(U){console.error("Error creating quiz session:",U)}},[g,t,v,w,i]),D=Math.round(g.reduce((k,E)=>k+E.time_to_answer,0)/60),z=g.reduce((k,E)=>k+E.points,0),q=()=>{l(null)};return o?a.jsx(yh,{quizSessionId:o,backUrl:"/quiz",onSessionDeleted:q}):n?a.jsx(ge,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-6",children:a.jsx(dM,{className:"h-6 w-6 text-blue-600 animate-spin"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading Questions..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the available questions."})]})]})})})}):a.jsx(ge,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Qa,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Your Own Quiz"}),a.jsx("p",{className:"text-gray-600",children:"Customize your study experience by selecting specific books and chapters."})]})]}),r.length===0&&!n&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-900",children:"No Questions Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"No questions were found in the database. Please check if questions have been added to the system."})]})]})}),p.length===0&&r.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ce,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Loading Books"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Analyzing available Bible books from the question database..."})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[N==="enterprise"?a.jsx(hs,{className:"h-5 w-5 text-purple-600"}):N==="pro"?a.jsx(Gi,{className:"h-5 w-5 text-blue-600"}):a.jsx(Ce,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900 capitalize",children:[N," Plan"]}),a.jsx("div",{className:"text-sm text-gray-600",children:N==="enterprise"?"Unlimited questions per quiz":`Up to ${j} questions per quiz`})]})]}),N==="free"&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Upgrade Plan"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Bible Books"}),p.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ce,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No books available"}),a.jsx("p",{className:"text-sm",children:"Questions need to be added to the system"})]}):a.jsx("div",{className:"grid grid-cols-1 gap-2",children:p.map(k=>{var $;const E=Ma(r.filter(R=>R.book_of_bible===k),(($=t==null?void 0:t.subscription)==null?void 0:$.plan)||"free").length;return a.jsx("button",{onClick:()=>S(k),className:`p-4 rounded-lg border-2 text-left transition-all duration-200 ${c.includes(k)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:k}),a.jsxs("div",{className:"text-sm text-gray-500",children:[E," questions available"]})]}),c.includes(k)&&a.jsx(Mt,{className:"h-5 w-5 text-blue-600"})]})},k)})}),c.length>0&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[c.length," book",c.length!==1?"s":""," selected"]})]}),c.map(k=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[k," Chapters"]}),a.jsx("button",{onClick:()=>C(k),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:(d[k]||[]).length===Va(k,r).length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 mb-4",children:Va(k,r).map(E=>{var U;const $=Ma(r.filter(J=>J.book_of_bible===k&&J.chapter===E),((U=t==null?void 0:t.subscription)==null?void 0:U.plan)||"free").length,R=(d[k]||[]).includes(E);return a.jsxs("button",{onClick:()=>P(k,E),className:`p-3 rounded-lg border-2 text-center transition-all duration-200 ${R?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,title:`${k} Chapter ${E} - ${$} questions`,children:[a.jsx("div",{className:"font-medium",children:E}),a.jsxs("div",{className:"text-xs text-gray-500",children:[$,"q"]})]},`${k}-${E}`)})})]},k)),I>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Maximum Questions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"range",min:"1",max:Math.min(j,I),value:Math.min(m,I),onChange:k=>h(parseInt(k.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[Math.min(m,I)," question",Math.min(m,I)!==1?"s":""]}),a.jsxs("span",{className:"text-gray-500",children:[I," available"]})]}),m>I&&a.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 text-sm",children:[a.jsx(tn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Not enough questions available. Maximum: ",I]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quiz Preview"}),g.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["~",D]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:z}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Book",c.length!==1?"s":""]})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Coverage"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Books:"})," ",c.join(", ")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Total Chapters:"})," ",Object.values(d).reduce((k,E)=>k+E.length,0)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Difficulty:"})," Mixed levels"]})]})]}),a.jsxs("button",{onClick:T,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Custom Quiz"})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Select books and chapters to see your quiz preview"})]})]})]})]})]})})})})}function JW(){var O;const{assignmentId:e}=LN(),t=bs(),r=Nt(),{user:n}=ve(),{questions:s}=aa(),{getAssignmentById:i}=X0(),{createQuizSession:o,loadQuizSession:l,getSessionForAssignment:c,updateQuizSession:u}=fi(),[d,f]=b.useState(null),[m,h]=b.useState(null),[p,y]=b.useState(!0),[x,v]=b.useState(null),[g,w]=b.useState("random"),_=t.state,j=se.useCallback(()=>{var E;if(!d)return[];const A=(_==null?void 0:_.selectedStudyItems)||d.study_items;let k=jS(s,A);return k=Ma(k,((E=n==null?void 0:n.subscription)==null?void 0:E.plan)||"free"),g==="verse"?[...k].sort(($,R)=>{if($.book_of_bible!==R.book_of_bible)return $.book_of_bible.localeCompare(R.book_of_bible);if($.chapter!==R.chapter)return $.chapter-R.chapter;const U=$.verse||1,J=R.verse||1;return U-J}):[...k].sort(()=>.5-Math.random())},[d,_==null?void 0:_.selectedStudyItems,s,(O=n==null?void 0:n.subscription)==null?void 0:O.plan,g]),N=se.useCallback(A=>!A||A.length===0?"":A.map(k=>{if(k.verses&&k.verses.length>0){const E=S(k.verses);return k.chapters.length===1?`${k.book} ${k.chapters[0]}:${E}`:`${k.book} (Ch. ${k.chapters.join(", ")}, Verses: ${E})`}else return k.chapters.length===1?`${k.book} Chapter ${k.chapters[0]}`:`${k.book} (Ch. ${k.chapters.join(", ")})`}).join(", "),[]),S=se.useCallback(A=>{if(!A||A.length===0)return"";const k=[...A].sort((U,J)=>U-J),E=[];let $=k[0],R=k[0];for(let U=1;U<k.length;U++)k[U]===R+1?R=k[U]:(E.push($===R?`${$}`:`${$}-${R}`),$=R=k[U]);return E.push($===R?`${$}`:`${$}-${R}`),E.join(", ")},[]),P=se.useCallback(async()=>{var U;if(!d||!n)return;const A=j();if(A.length===0){v("No questions available for this assignment");return}const k=A.reduce((J,de)=>J+de.points,0);A.reduce((J,de)=>J+de.time_to_answer,0);const E=(_==null?void 0:_.selectedStudyItems)||d.study_items,$=E.length===1?`${E[0].book} Study Quiz`:"Multi-Book Study Quiz",R=`Study quiz for assignment: ${d.description||"Study assignment"}`;try{const J=await o({type:"study-assignment",title:$,description:R,user_id:n.id,team_id:n.teamId,assignment_id:d.id,questions:A,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((U=A[0])==null?void 0:U.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:k,total_actual_time_spent_seconds:0});h(J)}catch(J){console.error("Error creating quiz session:",J),v("Failed to create quiz session")}},[d,n,j,_==null?void 0:_.selectedStudyItems,o]),C=se.useCallback(()=>{const A=c(e,n.id);A&&h(A.id)},[e,n,c]),I=se.useCallback(()=>{h(null)},[]);if(se.useCallback(A=>{if(A.length===0)return"";if(A.length===1){const k=A[0];return`${k.book} (Ch. ${k.chapters.join(", ")})`}return`${A.length} books`},[]),b.useEffect(()=>{n&&n.planSettings&&!n.planSettings.allow_study_schedule_quiz&&r("/quiz",{replace:!0})},[n,r]),b.useEffect(()=>{if(!e||!n){v("Assignment not found"),y(!1);return}(async()=>{try{console.log("📥 Loading assignment:",e);const k=await i(e);if(!k){v("Assignment not found"),y(!1);return}if(!(k.user_id===n.id||n.teamRole&&["owner","admin"].includes(n.teamRole))){v("You do not have access to this assignment"),y(!1);return}console.log("✅ Assignment loaded successfully:",k),f(k);const $=c(e,n.id);$&&h($.id),y(!1)}catch(k){console.error("💥 Error loading assignment:",k),v("Failed to load assignment"),y(!1)}})()},[e,n,c,i]),p)return a.jsx(ge,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading assignment..."})]})})});if(x)return a.jsx(ge,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(tn,{className:"h-8 w-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),a.jsx("p",{className:"text-gray-600 mb-6",children:x}),a.jsx("button",{onClick:()=>r("/schedule"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Return to Schedule"})]})]})})})});if(m)return a.jsx(yh,{quizSessionId:m,backUrl:"/schedule",onSessionDeleted:I});if(!d)return null;const T=(_==null?void 0:_.selectedStudyItems)||d.study_items,D=j(),z=c(e,n.id),q=D.reduce((A,k)=>A+k.points,0),L=Math.round(D.reduce((A,k)=>A+k.time_to_answer,0)/60);return a.jsx(ge,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Ce,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Study Assignment Quiz"}),a.jsx("p",{className:"text-gray-600",children:d.description||"Complete your study assignment"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Assignment Details"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(d.date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Study Items:"})," ",N(T)]}),(_==null?void 0:_.selectedStudyItems)&&a.jsx("div",{className:"text-blue-600 text-xs mt-2",children:"✓ Custom selection applied"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-purple-900 mb-3",children:"Question Order"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"verse",checked:g==="verse",onChange:A=>w(A.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"By Verse Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in biblical sequence)"})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"random",checked:g==="random",onChange:A=>w(A.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Random Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in mixed order)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["~",L]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:q}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]})]}),D.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No questions available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"There are no questions available for the selected study items with your current subscription tier."})]}):a.jsx("div",{className:"space-y-4",children:z?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[a.jsx(Ge,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Quiz in Progress"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"You have an active quiz session for this assignment. You can resume where you left off."}),a.jsxs("div",{className:"mt-3 text-sm text-yellow-700",children:[a.jsxs("div",{children:["Progress: ",z.results.length," of ",z.questions.length," questions"]}),a.jsxs("div",{children:["Current Score: ",z.total_points," points"]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:C,className:"flex items-center justify-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200 flex-1",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Resume Quiz"})]}),a.jsxs("button",{onClick:P,className:"flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex-1",children:[a.jsx(Hi,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Over"})]})]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:P,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Study Quiz"})]})})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Study Items"}),a.jsx("div",{className:"space-y-3",children:T.map((A,k)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:A.book}),a.jsx("div",{className:"text-sm text-gray-600",children:A.verses&&A.verses.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Chapters: ",A.chapters.join(", ")]}),a.jsxs("div",{className:"text-purple-600 font-medium",children:["Verses: ",S(A.verses)]})]}):a.jsxs("div",{children:["Chapters: ",A.chapters.join(", ")," (All verses)"]})})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[(()=>{let E=s.filter($=>$.book_of_bible===A.book&&A.chapters.includes($.chapter));return A.verses&&A.verses.length>0&&(E=E.filter($=>{const R=$.verse||1;return A.verses.includes(R)})),E.length})()," question",(()=>{let E=s.filter(R=>R.book_of_bible===A.book&&A.chapters.includes(R.chapter));return A.verses&&A.verses.length>0&&(E=E.filter(R=>{const U=R.verse||1;return A.verses.includes(U)})),E.length!==1?"s":""})()]})]},k))})]})]})})})})}function ZW(){const{userAchievements:e,achievements:t,loading:r,error:n}=Y0();if(r)return a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading achievements..."})});if(n)return a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsx(Re,{type:"error",message:n,className:"mb-6"})})});const s=new Map(e.map(i=>[i.achievement_id,i]));return a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Achievements"}),a.jsx("p",{className:"text-gray-600",children:"Track your progress and unlock new milestones!"})]}),t.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Achievements Defined"}),a.jsx("p",{className:"text-gray-600",children:"It looks like there are no achievements configured in the system yet."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>{var c;const o=s.has(i.id),l=o?(c=s.get(i.id))==null?void 0:c.unlocked_at:null;return a.jsxs("div",{className:Ne("bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",o?"border-2 border-green-200":"opacity-70 grayscale"),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:Ne("h-16 w-16 rounded-full flex items-center justify-center",o?"bg-green-100":"bg-gray-100"),children:i.badge_icon_url?a.jsx("img",{src:i.badge_icon_url,alt:i.name,className:"h-10 w-10"}):a.jsx(Kt,{className:Ne("h-8 w-8",o?"text-green-600":"text-gray-400")})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:Ne("text-lg font-semibold",o?"text-gray-900":"text-gray-600"),children:i.name}),a.jsx("p",{className:Ne("text-sm",o?"text-gray-600":"text-gray-500"),children:i.description}),o?a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600 mt-1",children:[a.jsx(Dt,{className:"h-3 w-3"}),a.jsxs("span",{children:["Unlocked on ",new Date(l).toLocaleDateString()]})]}):a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 mt-1",children:[a.jsx(yS,{className:"h-3 w-3"}),a.jsx("span",{children:"Locked"})]})]})]},i.id)})})]})})}function eK(e){const[t,r]=b.useState(new Date),n=b.useMemo(()=>{const l=t.getFullYear(),c=t.getMonth(),u=Wr(new Date),d=Wr(new Date(l,c,1));Wr(new Date(l,c+1,0));const f=Wr(new Date(d));f.setDate(f.getDate()-d.getDay());const m=[],h=Wr(new Date(f));for(let p=0;p<42;p++){const y=e.find(x=>zp(x.date,h));m.push({date:new Date(h),isCurrentMonth:h.getMonth()===c,isToday:zp(h,u),assignment:y}),h.setDate(h.getDate()+1)}return m},[t,e]);return{currentDate:t,setCurrentDate:r,calendarDays:n,navigateMonth:l=>{const c=new Date(t);c.setMonth(c.getMonth()+(l==="next"?1:-1)),r(c)},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}function tK(e){const[t,r]=b.useState([]),[n,s]=b.useState(""),[i,o]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState(""),[f,m]=b.useState(""),[h,p]=b.useState(""),y=b.useCallback(q=>{const L=e.filter(A=>A.book_of_bible===q);return L.length===0?1:Math.max(...L.map(A=>A.chapter))},[e]),x=b.useCallback((q,L)=>tm(q,L,e),[e]),v=b.useCallback(q=>{o(L=>L.includes(q)?L.filter(O=>O!==q):[...L,q].sort((O,A)=>O-A)),c([])},[]),g=b.useCallback(()=>{if(!n)return;const q=Va(n,e);o(q),c([])},[n,e]),w=b.useCallback(()=>{o([]),c([])},[]),_=b.useCallback(q=>{c(L=>L.includes(q)?L.filter(O=>O!==q):[...L,q].sort((O,A)=>O-A))},[]),j=b.useCallback(()=>{if(!n||i.length!==1)return;const q=tm(n,i[0],e);c(q)},[n,i,e]),N=b.useCallback(()=>{c([]),d(""),m("")},[]),S=b.useCallback(()=>{if(!n||i.length!==1)return;const q=parseInt(u),L=parseInt(f);if(isNaN(q)||isNaN(L)||q>L||q<1)return;const O=tm(n,i[0],e),A=Math.max(...O);if(L>A)return;const k=[];for(let E=q;E<=L;E++)O.includes(E)&&k.push(E);c(k)},[n,i,u,f,e]),P=b.useCallback(q=>{d(q)},[]),C=b.useCallback(q=>{m(q)},[]),I=b.useCallback(()=>{if(!n||i.length===0)return;const q={book:n,chapters:[...i],verses:l.length>0?[...l]:void 0};r(L=>[...L,q]),s(""),o([]),c([]),d(""),m("")},[n,i,l]),T=b.useCallback(q=>{r(L=>L.filter((O,A)=>A!==q))},[]),D=b.useCallback(()=>{r([]),s(""),o([]),c([]),d(""),m(""),p("")},[]),z=b.useCallback((q,L="")=>{r(q),p(L),s(""),o([]),c([]),d(""),m("")},[]);return{studyItems:t,currentBook:n,currentChapters:i,currentVerses:l,startVerseInput:u,endVerseInput:f,description:h,setCurrentBook:s,setDescription:p,toggleChapter:v,selectAllChapters:g,clearChapters:w,toggleVerse:_,selectAllVerses:j,clearVerses:N,selectVerseRange:S,updateStartVerseInput:P,updateEndVerseInput:C,addStudyItem:I,removeStudyItem:T,resetForm:D,initializeForm:z,getMaxChapters:y,getVersesForBookChapter:x}}function rK({currentDate:e,calendarDays:t,dayNames:r,monthNames:n,onNavigateMonth:s,onDateClick:i,onToday:o,formatStudyItems:l,normalizeAssignment:c,getSessionForAssignment:u,onStartQuiz:d,onResumeQuiz:f,user:m,canManageSchedules:h=!1,questions:p=[]}){const{developerLog:y}=ve();return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:[n[e.getMonth()]," ",e.getFullYear()]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>s("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(F0,{className:"h-5 w-5 text-gray-600"})}),a.jsx("button",{onClick:o,className:"px-3 py-2 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200",children:"Today"}),a.jsx("button",{onClick:()=>s("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(gf,{className:"h-5 w-5 text-gray-600"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[r.map(x=>a.jsx("div",{className:"p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:x},x)),t.map((x,v)=>{var _,j,N,S;const g=x.assignment&&m&&u&&u(x.assignment.id,m.id);x.assignment&&y("🗓️ Calendar Day Debug:",{date:x.date.toDateString(),assignmentId:(_=x.assignment)==null?void 0:_.id,assignmentUserId:(j=x.assignment)==null?void 0:j.user_id,currentUserId:m==null?void 0:m.id,hasActiveSession:!!g,activeSessionId:g==null?void 0:g.id,assignmentCompleted:(N=x.assignment)==null?void 0:N.completed,isUserAssignment:((S=x.assignment)==null?void 0:S.user_id)===(m==null?void 0:m.id),onStartQuizExists:!!d,onResumeQuizExists:!!f});const w=x.isCurrentMonth&&(h||x.assignment&&x.assignment.user_id===(m==null?void 0:m.id));return a.jsxs("button",{onClick:()=>w?i(x):void 0,onClick:P=>{const C=P.target,I=C.closest(".quiz-action-button");y("🖱️ Calendar day clicked:",{date:x.date.toDateString(),isClickable:w,isQuizButtonClick:!!I,targetElement:C.tagName,targetClasses:C.className}),!I&&w&&i(x)},className:`
                relative p-2 sm:p-3 h-20 sm:h-24 text-left rounded-lg transition-all duration-200
                ${x.isCurrentMonth?w?"hover:bg-gray-50 cursor-pointer":"cursor-default":"text-gray-300 cursor-default"}
                ${x.isToday?"bg-indigo-50 border-2 border-indigo-200":"border border-gray-100"}
                ${x.assignment?x.assignment.completed?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200":""}
              `,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium ${x.isToday?"text-indigo-600":x.isCurrentMonth?"text-gray-900":"text-gray-300"}`,children:x.date.getDate()}),x.assignment&&a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:`text-xs font-medium truncate hidden sm:block ${x.assignment.completed?"text-green-700":"text-yellow-700"}`,children:l(c(x.assignment).study_items)}),a.jsx("div",{className:"flex items-center justify-between mt-1",children:x.assignment.completed?a.jsx("span",{className:"text-xs text-green-600 hidden sm:inline",children:"✓ Completed"}):x.assignment.user_id===(m==null?void 0:m.id)&&d&&f?a.jsxs("button",{className:"quiz-action-button flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-all duration-200 bg-green-600 text-white hover:bg-green-700",onClick:P=>{P.stopPropagation(),y("🎯 Calendar Quiz Button Clicked:",{date:x.date.toDateString(),assignmentId:x.assignment.id,hasActiveSession:!!g,activeSessionId:g==null?void 0:g.id,action:g?"resume":"start"}),g?(f(x.assignment),y("🔄 Calling onResumeQuiz with assignment:",x.assignment.id)):(d(x.assignment),y("▶️ Calling onStartQuiz with assignment:",x.assignment.id))},title:g?"Resume Quiz":"Start Quiz",children:[g?a.jsx(Hi,{className:"h-3 w-3 sm:h-4 sm:w-4"}):a.jsx(io,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:g?"Resume":"Start"})]}):g?a.jsx("span",{className:"text-xs text-blue-600 hidden sm:inline",children:"Active"}):a.jsx("span",{className:"text-xs text-yellow-600 hidden sm:inline",children:"Pending"})})]})]},v)})]})]})}function nK({stats:e}){return a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Assignments"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.totalAssignments})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(xt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"This Month"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.thisMonth})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Completed"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.completed})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ce,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Books Scheduled"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.booksScheduled})]})]})})]})}function sK({isOpen:e,onClose:t,selectedDate:r,teamMembers:n,isNewAssignment:s,initialSelectedMembers:i,editingAssignment:o,studyItems:l,currentBook:c,currentChapters:u,currentVerses:d,description:f,onBookChange:m,onDescriptionChange:h,onToggleChapter:p,onSelectAllChapters:y,onClearChapters:x,onToggleVerse:v,onSelectAllVerses:g,onClearVerses:w,selectVerseRange:_,startVerseInput:j,endVerseInput:N,updateStartVerseInput:S,updateEndVerseInput:P,onAddStudyItem:C,onRemoveStudyItem:I,onSave:T,onDelete:D,getMaxChapters:z,getVersesForBookChapter:q,questions:L,currentUserId:O}){const[A,k]=se.useState(i);if(se.useEffect(()=>{k(i)},[i]),!r)return null;const E=ee=>{k(ye=>ye.includes(ee)?ye.filter(Ct=>Ct!==ee):[...ye,ee])},$=()=>{k(n.map(ee=>ee.userId))},R=()=>{k([])},U=()=>{if(A.length===0)return"No members selected";if(A.length===1){const ee=n.find(ye=>ye.userId===A[0]);return(ee==null?void 0:ee.user.name)||"Unknown member"}return`${A.length} members selected`},J=se.useMemo(()=>_S(L),[L]),de=c&&u.length===1,he=de?q(c,u[0]):[];return a.jsxs(Pn,{isOpen:e,onClose:t,title:o?"Edit Assignment":"Add Study Assignment",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{children:o&&a.jsxs("button",{onClick:D,className:"flex items-center space-x-2 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors duration-200",children:[a.jsx(ii,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete"})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>T(A,l,f),disabled:l.length===0||A.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(B0,{className:"h-4 w-4"}),a.jsxs("span",{children:[o?"Update":"Save"," Assignment"]})]})]})]}),children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium text-blue-900",children:["Assignment for: ",U()]}),a.jsx("div",{className:"text-sm text-blue-700",children:ao(r,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s&&a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(Xe,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{children:"Select Team Members"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:$,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Select All"}),a.jsx("button",{type:"button",onClick:R,className:"text-xs text-gray-600 hover:text-gray-700 font-medium",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-48 overflow-y-auto",children:n.map(ee=>a.jsxs("button",{type:"button",onClick:()=>E(ee.userId),className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-all duration-200 text-left ${A.includes(ee.userId)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:ee.user.name.split(" ").map(ye=>ye[0]).join("")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:ee.user.name}),a.jsxs("div",{className:"text-sm text-gray-500 capitalize",children:[ee.role,O&&ee.userId===O&&a.jsx("span",{className:"text-indigo-600 font-medium",children:" (You)"})]})]}),A.includes(ee.userId)&&a.jsx(Mt,{className:"h-5 w-5 text-indigo-600 flex-shrink-0"})]},ee.userId))}),A.length>0&&a.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[A.length," member",A.length!==1?"s":""," selected"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Add Study Item"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bible Book"}),a.jsxs("select",{value:c,onChange:ee=>m(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"",children:"Select a book"}),J.map(ee=>a.jsx("option",{value:ee,children:ee},ee))]}),J.length===0&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No books available. Questions need to be added to the system."})]}),c&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chapters"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:y,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:x,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-6 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:Va(c,L).map(ee=>a.jsx("button",{type:"button",onClick:()=>p(ee),className:`p-2 text-sm rounded transition-colors duration-200 ${u.includes(ee)?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ee},ee))}),Va(c,L).length===0&&a.jsxs("p",{className:"text-sm text-gray-500",children:["No chapters available for ",c,". Questions need to be added for this book."]}),u.length>0&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",u.join(", ")," (",u.length," chapter",u.length!==1?"s":"",")"]})]}),de&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verses (Optional)"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:g,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:w,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),he.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-purple-900 mb-2",children:"Quick Range Selection"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"number",min:"1",max:Math.max(...he),value:j,onChange:ee=>S(ee.target.value),placeholder:"Start",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("span",{className:"text-purple-700 font-medium",children:"to"}),a.jsx("input",{type:"number",min:"1",max:Math.max(...he),value:N,onChange:ee=>P(ee.target.value),placeholder:"End",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("button",{type:"button",onClick:_,disabled:!j||!N,className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Select Range"})]}),a.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Example: Enter 1 to 15 to select verses 1-15"})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:he.map(ee=>a.jsx("button",{type:"button",onClick:()=>v(ee),className:`p-1 text-xs rounded transition-colors duration-200 ${d.includes(ee)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ee},ee))}),d.length>0&&a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Selected verses: ",d.join(", ")," (",d.length," verse",d.length!==1?"s":"",")"]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to include all verses in ",c," Chapter ",u[0]]}),a.jsxs("div",{className:"text-xs text-purple-600 mt-2 p-2 bg-purple-50 rounded",children:["💡 ",a.jsx("strong",{children:"Tip:"})," Use the range selector above for consecutive verses (e.g., 1-15), or click individual verses below for specific selections"]})]}):a.jsxs("div",{className:"text-sm text-gray-500 p-3 bg-gray-50 rounded-lg",children:["No verses available for ",c," Chapter ",u[0],". Questions need to be added for this chapter."]})]}),c&&u.length>1&&a.jsx("div",{className:"text-xs text-gray-500 p-2 bg-blue-50 rounded-lg",children:"💡 Select exactly one chapter to enable verse-specific selection"}),a.jsxs("button",{type:"button",onClick:C,disabled:!c||u.length===0||J.length===0,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:"Add to Assignment"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Assignment Items"}),l.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ce,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No study items added yet"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map((ee,ye)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:ee.book}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Chapters: ",ee.chapters.join(", ")," (",ee.chapters.length," chapter",ee.chapters.length!==1?"s":"",")",ee.verses&&ee.verses.length>0&&a.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Verses: ",ee.verses.join(", ")," (",ee.verses.length," verse",ee.verses.length!==1?"s":"",")"]})]})]}),a.jsx("button",{type:"button",onClick:()=>I(ye),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(ii,{className:"h-4 w-4"})})]},ye))}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Notes (Optional)"}),a.jsx("textarea",{value:f,onChange:ee=>h(ee.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Add study focus, themes, or special instructions..."})]})]})]})]})}function iK({memberAssignments:e,selectedMember:t,user:r,getSessionForAssignment:n,onResumeQuiz:s,onStartQuiz:i,onEditAssignment:o,normalizeAssignment:l,canManageSchedules:c=!1,onDeleteQuizSession:u,questions:d}){const f=Wr(new Date),m=e.filter(h=>h.date.getTime()>=f.getTime()).sort((h,p)=>h.date.getTime()-p.date.getTime()).slice(0,5);return a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Upcoming Assignments ",t?`for ${t.user.name}`:""]}),a.jsxs("div",{className:"space-y-3",children:[m.map(h=>{const p=l(h),y=r&&n&&n(h.id,r.id),x=h.user_id===(r==null?void 0:r.id);return a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${h.completed?"bg-green-100":y?"bg-blue-100":"bg-yellow-100"}`,children:h.completed?a.jsx(Mt,{className:"h-5 w-5 text-green-600"}):y?a.jsx(Hi,{className:"h-5 w-5 text-blue-600"}):a.jsx(Ce,{className:"h-5 w-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:oo(p.study_items)}),a.jsxs("div",{className:"text-sm text-gray-600",children:[ao(h.date,{weekday:"long",month:"short",day:"numeric"}),h.completed&&a.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"✓ Completed"}),y&&!h.completed&&a.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:"• Quiz Active"})]}),h.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:h.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[!h.completed&&x&&a.jsxs("div",{className:"flex items-center space-x-2",children:[y&&u&&a.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this quiz session? All progress will be lost.")&&u(y.id)},className:"flex items-center space-x-1 px-2 py-1 rounded-lg text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(ii,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>{y?s(h):i(h)},className:`flex items-center space-x-1 px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${y?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:y?a.jsxs(a.Fragment,{children:[a.jsx(Hi,{className:"h-3 w-3"}),a.jsx("span",{children:"Resume"})]}):a.jsxs(a.Fragment,{children:[a.jsx(io,{className:"h-3 w-3"}),a.jsx("span",{children:"Quiz"})]})})]}),c&&a.jsx("button",{onClick:()=>o(h),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})})]})]},h.id)}),m.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No upcoming assignments ",t?`for ${t.user.name}`:""]}),a.jsx("p",{className:"text-sm text-gray-400",children:c?"Click on a calendar date to add an assignment":"Your team admin will assign study schedules"})]})]})]})}function aK(){var Oc,zo;const{user:e,refreshUser:t}=ve(),{developerLog:r}=ve(),{questions:n,fetchQuestions:s}=aa(),{getSessionForAssignment:i,deleteQuizSession:o}=fi(),l=Nt(),{assignments:c,teamMembers:u,loading:d,error:f,normalizeAssignment:m,saveAssignment:h,deleteAssignment:p}=X0(),[y,x]=b.useState(""),[v,g]=b.useState([]);b.useEffect(()=>{u.length>0&&!y&&e&&x(e.id)},[u,y,e]);const w=c.filter(be=>be.user_id===y),{currentDate:_,setCurrentDate:j,calendarDays:N,navigateMonth:S,monthNames:P,dayNames:C}=eK(w),{studyItems:I,currentBook:T,currentChapters:D,currentVerses:z,startVerseInput:q,endVerseInput:L,description:O,setCurrentBook:A,setDescription:k,toggleChapter:E,selectAllChapters:$,clearChapters:R,toggleVerse:U,selectAllVerses:J,clearVerses:de,selectVerseRange:he,updateStartVerseInput:ee,updateEndVerseInput:ye,addStudyItem:Ct,removeStudyItem:Q,resetForm:te,initializeForm:le,getMaxChapters:Y,getVersesForBookChapter:Ve}=tK(n);b.useEffect(()=>{s()},[s]);const[me,Oe]=b.useState(null),[et,ut]=b.useState(!1),[We,Xt]=b.useState(null),[M,B]=b.useState(!1),W=u.find(be=>be.userId===y),F=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin";if(r("🔍 Schedule: Current user:",e),r("🔍 Schedule: User team info:",{teamId:e==null?void 0:e.teamId,teamRole:e==null?void 0:e.teamRole}),r("🔍 Schedule: Plan settings:",e==null?void 0:e.planSettings),r("🔍 Schedule: Schedule access:",(Oc=e==null?void 0:e.planSettings)==null?void 0:Oc.allow_study_schedule_quiz),!(((zo=e==null?void 0:e.planSettings)==null?void 0:zo.allow_study_schedule_quiz)??!1))return a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Yt,{className:"h-8 w-8 text-purple-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Study Schedule"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Study Schedule is a premium feature that helps you organize and track your Bible study progress with structured assignments."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade to Pro Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Get access to Study Schedule and other premium features by upgrading your subscription."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{r("🔄 Schedule: Manually refreshing user profile..."),await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>l("/billing"),className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>l("/quiz"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Quiz Center"})]})]})})});r("Schedule: All assignments:",c),r("Schedule: Selected viewing member ID:",y),r("Schedule: Filtered member assignments:",w);const G={totalAssignments:w.length,thisMonth:w.filter(be=>be.date.getMonth()===_.getMonth()&&be.date.getFullYear()===_.getFullYear()).length,completed:w.filter(be=>be.completed).length,booksScheduled:new Set(w.flatMap(be=>m(be).study_items.map(Ps=>Ps.book))).size},Z=be=>{if(!(!be.isCurrentMonth||!y||!F)){if(Oe(be.date),be.assignment){const Jt=m(be.assignment);Xt(Jt),le(Jt.study_items,Jt.description||""),g([Jt.user_id]),B(!1)}else Xt(null),te(),g(y?[y]:[]),B(!0);ut(!0)}},ce=async(be,Jt,Ps)=>{if(!(!me||Jt.length===0||be.length===0||!e))try{for(const bh of be){const ZC={id:(We==null?void 0:We.id)||crypto.randomUUID(),user_id:bh,team_id:e.teamId||"",date:me,study_items:[...Jt],description:Ps.trim()||void 0,created_by:e.id,created_at:(We==null?void 0:We.created_at)||new Date().toISOString(),completed:(We==null?void 0:We.completed)||!1,completed_at:We==null?void 0:We.completed_at};await h(ZC)}ut(!1),te(),Oe(null),Xt(null),g([]),B(!1)}catch(bh){console.error("Error saving assignment:",bh)}},fe=async()=>{if(We)try{await p(We.id),ut(!1),te(),Oe(null),Xt(null),g([]),B(!1)}catch(be){console.error("Error deleting assignment:",be)}},xe=be=>{l(`/quiz/study-assignment/${be.id}`,{state:{selectedStudyItems:be.study_items}})},qe=be=>{l(`/quiz/study-assignment/${be.id}`)},Cn=be=>{if(!F)return;const Jt=new Date(be.date);Oe(Jt);const Ps=m(be);Xt(Ps),le(Ps.study_items,Ps.description||""),g([Ps.user_id]),B(!1),ut(!0)},vh=async be=>{try{await o(be)}catch(Jt){console.error("Error deleting quiz session:",Jt)}},Io=be=>{A(be),R()},$o=be=>{F&&x(be)};return e!=null&&e.teamId?a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Study Schedule"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:F?"Plan and manage individual study assignments for your team members.":"View your personal study assignments and start quizzes."})]}),a.jsx(Up,{teamMembers:u,selectedMemberId:y,onSelectMember:$o,selectedMemberInfo:W,disabled:!F}),a.jsx(nK,{stats:G}),a.jsx("div",{className:"mb-8",children:a.jsx(zS,{allAssignments:w,loading:d,user:e,questions:n,getSessionForAssignment:i,developerLog:r})}),a.jsx(rK,{currentDate:_,calendarDays:N,dayNames:C,monthNames:P,onNavigateMonth:S,onDateClick:Z,onToday:()=>j(new Date),formatStudyItems:be=>oo(be),normalizeAssignment:m,getSessionForAssignment:i,onStartQuiz:xe,onResumeQuiz:qe,user:e,canManageSchedules:F}),a.jsx(iK,{memberAssignments:w,selectedMember:W,user:e,getSessionForAssignment:i,onResumeQuiz:qe,onStartQuiz:xe,onEditAssignment:Cn,normalizeAssignment:m,canManageSchedules:F,onDeleteQuizSession:vh,questions:n}),et&&F&&a.jsx(sK,{isOpen:et,onClose:()=>{ut(!1),te(),Oe(null),Xt(null),g([]),B(!1)},selectedDate:me,teamMembers:u,isNewAssignment:M,initialSelectedMembers:v,editingAssignment:We,studyItems:I,currentBook:T,currentChapters:D,currentVerses:z,description:O,onBookChange:Io,onDescriptionChange:k,onToggleChapter:E,onSelectAllChapters:$,onClearChapters:R,onToggleVerse:U,onSelectAllVerses:J,onClearVerses:de,selectVerseRange:he,startVerseInput:q,endVerseInput:L,updateStartVerseInput:ee,updateEndVerseInput:ye,onAddStudyItem:Ct,onRemoveStudyItem:Q,onSave:ce,onDelete:fe,getMaxChapters:Y,getVersesForBookChapter:Ve,questions:n,currentUserId:e==null?void 0:e.id})]})}):a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsx(Up,{teamMembers:[],selectedMemberId:"",onSelectMember:()=>{},disabled:!0})})})}function oK({teamId:e,startDate:t,endDate:r}){const{developerLog:n,invalidateTeamData:s}=ve(),[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{var m,h;if(!e){n("🔍 useTeamLeaderboardData: No teamId provided, skipping data fetch"),c(!1),o([]);return}n("🔍 useTeamLeaderboardData: Starting team leaderboard data fetch for team:",e,"with date range:",t,r),c(!0),d(null);try{n("🔍 useTeamLeaderboardData: Using secure function to fetch team leaderboard data");let p,y;try{const g=await V.rpc("get_team_leaderboard_data",{p_team_id:e,p_start_date:t?t.toISOString():null,p_end_date:r?r.toISOString():null});p=g.data,y=g.error}catch(g){if(n("❌ useTeamLeaderboardData: RPC call failed with error:",g),(m=g==null?void 0:g.message)!=null&&m.includes("Team with ID")&&((h=g==null?void 0:g.message)!=null&&h.includes("does not exist"))){n("🔄 useTeamLeaderboardData: Team does not exist, refreshing user profile to clear invalid team data");try{await s(),n("✅ useTeamLeaderboardData: Invalid team data cleared")}catch(w){n("❌ useTeamLeaderboardData: Failed to invalidate team data:",w)}}p=[],y=null}let x;try{Array.isArray(p)?x=p:p&&typeof p=="object"?x=[p]:x=[]}catch(g){n("❌ useTeamLeaderboardData: Error processing leaderboard data:",g),x=[]}n("✅ useTeamLeaderboardData: Fetched leaderboard data:",x.length,"members");const v=x.map(g=>({userId:g.user_id,userName:g.user_name,role:g.role,totalQuizzesCompleted:Number(g.total_quizzes_completed),totalQuestionsAnswered:Number(g.total_questions_answered),averageScore:Number(g.average_score),totalTimeSpentMinutes:Number(g.total_quizzes_completed)===0?0:Number(g.total_time_spent_minutes),studyStreak:Number(g.study_streak),totalPointsEarned:Number(g.total_points_earned),totalPossiblePoints:Number(g.total_possible_points)}));n("✅ useTeamLeaderboardData: Transformed leaderboard data:",v),o(v)}catch(p){console.error("❌ useTeamLeaderboardData: Error fetching team leaderboard data:",p),d(p.message||"Failed to load team leaderboard data"),o([])}finally{c(!1)}},[e,t,r,n]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function lK({data:e,loading:t,error:r,selectedTimeframe:n}){b.useState("totalPointsEarned"),b.useState("desc");const s=se.useMemo(()=>e.filter(c=>c.role==="member").sort((c,u)=>u.totalPointsEarned-c.totalPointsEarned),[e]),i=c=>{switch(c){case 0:return a.jsx(Kt,{className:"h-5 w-5 text-yellow-500"});case 1:return a.jsx(hM,{className:"h-5 w-5 text-gray-400"});case 2:return a.jsx(Cr,{className:"h-5 w-5 text-amber-600"});default:return a.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",c+1]})}},o=c=>c>=90?"text-green-600":c>=80?"text-blue-600":c>=70?"text-yellow-600":"text-red-600",l=[{key:"rank",header:a.jsx("div",{className:"text-center",children:"Rank"}),render:(c,u)=>a.jsx("div",{className:"flex items-center justify-center",children:i(u)}),className:"text-center w-16",headerClassName:"text-center"},{key:"userName",header:"Team Member",render:c=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:c.userName.split(" ").map(u=>u[0]).join("")})}),a.jsx("div",{children:a.jsx("div",{className:"font-medium text-gray-900",children:c.userName})})]})},{key:"totalPointsEarned",header:"XP",render:c=>a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"font-bold text-lg text-gray-900",children:c.totalPointsEarned.toLocaleString()})}),className:"text-center",headerClassName:"text-center"},{key:"averageScore",header:"Average Score",render:c=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:`font-bold text-lg ${o(c.averageScore)}`,children:[c.averageScore.toFixed(1),"%"]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"totalQuizzesCompleted",header:"Quizzes",render:c=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ce,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:c.totalQuizzesCompleted})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"totalQuestionsAnswered",header:"Questions",render:c=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(xt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:c.totalQuestionsAnswered})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"totalTimeSpentMinutes",header:"Study Time",render:c=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:mr(c.totalTimeSpentMinutes)})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(rn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Leaderboard"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Kt,{className:"h-6 w-6 text-yellow-500"}),a.jsx("div",{children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Leaderboard"})})]})}),a.jsx(an,{columns:l,data:s,loading:t,emptyState:{icon:Kt,title:"No Team Data",description:"No team member analytics data available yet. Complete some quizzes to see the leaderboard!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Rankings based on total points earned"})})]})}function cK(){const{user:e}=ve(),[t,r]=b.useState("weekly"),[n,s]=b.useState(void 0),[i,o]=b.useState(void 0);se.useEffect(()=>{const f=new Date;let m,h;switch(t){case"weekly":{m=new Date(f),m.setDate(f.getDate()-f.getDay()),m.setHours(0,0,0,0),h=new Date(m),h.setDate(m.getDate()+6),h.setHours(23,59,59,999);break}case"monthly":{m=new Date(f.getFullYear(),f.getMonth(),1),h=new Date(f.getFullYear(),f.getMonth()+1,0,23,59,59,999);break}case"all-time":default:m=void 0,h=void 0;break}const p=((m==null?void 0:m.getTime())||0)!==((n==null?void 0:n.getTime())||0),y=((h==null?void 0:h.getTime())||0)!==((i==null?void 0:i.getTime())||0);(p||y)&&(s(m),o(h))},[t,n,i]);const{data:l,loading:c,error:u,refreshData:d}=oK({teamId:e==null?void 0:e.teamId,startDate:n,endDate:i});return e!=null&&e.teamId?a.jsx(ge,{children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-xl p-1",children:[a.jsx("button",{onClick:()=>r("weekly"),className:`px-6 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${t==="weekly"?"bg-gray-700 text-white shadow-sm":"text-gray-700 hover:bg-gray-200"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>r("monthly"),className:`px-6 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${t==="monthly"?"bg-gray-700 text-white shadow-sm":"text-gray-700 hover:bg-gray-200"}`,children:"Monthly"}),a.jsxs("button",{onClick:()=>r("all-time"),className:`px-6 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${t==="all-time"?"bg-gray-700 text-white shadow-sm":"text-gray-700 hover:bg-gray-200"}`,children:[a.jsx("span",{className:"hidden sm:inline",children:"All Time"}),a.jsx("span",{className:"sm:hidden",children:"All"})]})]})})}),u&&a.jsx(Re,{type:"error",message:u,className:"mb-6"}),c&&a.jsx(zt,{text:"Loading team leaderboard...",className:"py-8"}),!c&&a.jsx(lK,{data:l,loading:c,error:u,selectedTimeframe:t})]})}):a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to view the leaderboard."})]})})})}function uK(){const{developerLog:e}=ve(),[t,r]=b.useState({totalUsers:0,freeUsers:0,proUsers:0,enterpriseUsers:0,totalTeams:0,newUsersLast30Days:0,newUsersPrev30Days:0,subscriptionsCancelledLast30Days:0,activeUsers:0,activeTeams:0}),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e("📊 Loading admin statistics...");const d=new Date,f=new Date(d.getTime()-30*24*60*60*1e3),m=new Date(d.getTime()-60*24*60*60*1e3),{data:h,error:p}=await V.from("user_profiles").select("id, created_at");if(p)throw console.error("❌ Error loading user profiles:",p),p;const{data:y,error:x}=await V.from("subscriptions").select("user_id, plan, status, cancelled_at, created_at").order("created_at",{ascending:!1});if(x)throw console.error("❌ Error loading subscriptions:",x),x;const{data:v,error:g}=await V.from("teams").select("id, created_at");if(g)throw console.error("❌ Error loading teams:",g),g;const{data:w,error:_}=await V.from("team_members").select("team_id, status, joined_at").eq("status","active");if(_)throw console.error("❌ Error loading team members:",_),_;const j=new Map,N=new Map;(y||[]).forEach($=>{N.has($.user_id)||N.set($.user_id,[]),N.get($.user_id).push($),$.status==="active"&&!j.has($.user_id)&&j.set($.user_id,$)});const S=Array.from(j.values()),P=(h==null?void 0:h.length)||0,C=S.filter($=>$.plan==="free").length,I=S.filter($=>$.plan==="pro").length,T=S.filter($=>$.plan==="enterprise").length,D=(h==null?void 0:h.filter($=>new Date($.created_at)>=f).length)||0,z=(h==null?void 0:h.filter($=>{const R=new Date($.created_at);return R>=m&&R<f}).length)||0,q=(y||[]).filter($=>$.cancelled_at&&new Date($.cancelled_at)>=f).length,L=S.length,A=new Set((w==null?void 0:w.map($=>$.team_id))||[]).size,k={totalUsers:P,freeUsers:C,proUsers:I,enterpriseUsers:T,totalTeams:(v==null?void 0:v.length)||0,newUsersLast30Days:D,newUsersPrev30Days:z,subscriptionsCancelledLast30Days:q,activeUsers:L,activeTeams:A};e("✅ Admin statistics calculated:",k),r(k);const E=[{id:1,type:"user_signup",message:`${D} new users registered in the last 30 days`,timestamp:"2 hours ago",severity:"info"},{id:2,type:"subscription",message:`${I+T} users have active paid subscriptions`,timestamp:"4 hours ago",severity:"success"},{id:3,type:"teams",message:`${A} teams are currently active`,timestamp:"6 hours ago",severity:"info"},{id:4,type:"cancellation",message:`${q} subscription cancellations in the last 30 days`,timestamp:"8 hours ago",severity:q>5?"warning":"info"}];s(E)}catch(d){console.error("💥 Error loading admin statistics:",d),c("Failed to load admin statistics")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{stats:t,recentActivities:n,loading:i,error:l,refreshStats:u}}function dK(){const{stats:e,recentActivities:t,loading:r,error:n}=uK(),s=e.proUsers+e.enterpriseUsers,i=e.totalUsers>0?Math.round(e.freeUsers/e.totalUsers*100):0,o=e.totalUsers>0?Math.round(s/e.totalUsers*100):0,l=e.totalTeams>0?Math.round(e.totalUsers/e.totalTeams):0,c=e.newUsersPrev30Days>0?Math.round((e.newUsersLast30Days-e.newUsersPrev30Days)/e.newUsersPrev30Days*100):0,u=e.totalUsers>0?Math.round(e.activeUsers/e.totalUsers*100):0,d=e.totalTeams>0?Math.round(e.activeTeams/e.totalTeams*100):0,f=[{name:"Total Users",value:e.totalUsers.toLocaleString(),change:`${i}% free, ${o}% paid`,changeType:"neutral",icon:Xe},{name:"Total Teams",value:e.totalTeams.toLocaleString(),change:`${l} avg members`,changeType:"neutral",icon:Gl},{name:"New Users (30D)",value:e.newUsersLast30Days.toLocaleString(),change:`${c>=0?"+":""}${c}%`,changeType:c>=0?"positive":"negative",icon:bS},{name:"Cancellations (30D)",value:e.subscriptionsCancelledLast30Days.toLocaleString(),change:`${e.totalUsers>0?Math.round(e.subscriptionsCancelledLast30Days/e.totalUsers*100):0}% of total`,changeType:e.subscriptionsCancelledLast30Days>0?"negative":"positive",icon:wS},{name:"Active Users",value:`${u}%`,change:`${e.activeUsers} users`,changeType:u>=90?"positive":u>=70?"neutral":"negative",icon:no},{name:"Active Teams",value:`${d}%`,change:`${e.activeTeams} teams`,changeType:d>=90?"positive":d>=70?"neutral":"negative",icon:Nn},{name:"Free Plans",value:e.freeUsers.toLocaleString(),change:`${i}% of users`,changeType:"neutral",icon:Xe},{name:"Paid Plans",value:s.toLocaleString(),change:`${o}% of users`,changeType:"positive",icon:sd}],m=[{name:"CPU Usage",value:45,status:"good"},{name:"Memory Usage",value:67,status:"warning"},{name:"Disk Usage",value:23,status:"good"},{name:"Network I/O",value:89,status:"critical"}],h=[{plan:"Free",count:e.freeUsers,color:"bg-gray-500"},{plan:"Pro",count:e.proUsers,color:"bg-blue-500"},{plan:"Enterprise",count:e.enterpriseUsers,color:"bg-purple-500"}],p=x=>{switch(x){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},y=x=>{switch(x){case"success":return"bg-green-50 text-green-700 border-green-200";case"warning":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"error":return"bg-red-50 text-red-700 border-red-200";default:return"bg-blue-50 text-blue-700 border-blue-200"}};return r?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading admin data..."})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Monitor system performance and manage your application."})]}),n&&a.jsx(Re,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:f.map(x=>a.jsx(pt,{title:x.name,value:x.value,icon:x.icon,trend:{value:x.change,type:x.changeType}},x.name))}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(bM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"System Metrics"})]}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:m.map(x=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-0 flex-1 truncate pr-3",children:x.name}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[a.jsx("div",{className:"w-20 sm:w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${p(x.status)}`,style:{width:`${x.value}%`}})}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:[x.value,"%"]})]})]},x.name))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(yM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Subscription Breakdown"})]}),a.jsx("div",{className:"space-y-4",children:h.map(x=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${x.color}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.plan})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-bold text-gray-900",children:x.count}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e.totalUsers>0?Math.round(x.count/e.totalUsers*100):0,"%"]})]})]},x.plan))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(aM,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Backup Database"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(Nn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Security Scan"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(Xe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Manage Users"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(no,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"View Logs"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Recent Activities"}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:t.slice(0,8).map(x=>a.jsx("div",{className:`p-3 sm:p-4 rounded-lg border ${y(x.severity)}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium break-words",children:x.message}),a.jsx("p",{className:"text-xs mt-1 opacity-75",children:x.timestamp})]}),a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ml-3 flex-shrink-0 ${x.severity==="success"?"bg-green-100 text-green-800":x.severity==="warning"?"bg-yellow-100 text-yellow-800":x.severity==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:x.type.replace("_"," ")})]})},x.id))})]})]})})}function fK(){const{developerLog:e}=ve(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e("👥 Loading users for admin panel...");const{data:m,error:h}=await V.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          created_at,
          teams:team_id (
            id,
            name
          )
        `);if(h)throw console.error("❌ Error loading user profiles:",h),h;const{data:p,error:y}=await V.from("subscriptions").select("user_id, plan, status, created_at").eq("status","active").order("created_at",{ascending:!1});y&&console.error("❌ Error loading subscriptions:",y);const x=new Map;(p||[]).forEach(j=>{x.has(j.user_id)||x.set(j.user_id,j)});const{data:v,error:g}=await V.from("team_members").select("user_id, status");g&&console.error("❌ Error loading team members:",g);const w=new Map((v||[]).map(j=>[j.user_id,j])),_=(m||[]).map(j=>{var P;const N=x.get(j.id),S=w.get(j.id);return{id:j.id,name:j.name,email:j.email,role:j.role,status:(S==null?void 0:S.status)||"active",subscription:(N==null?void 0:N.plan)||"free",joinDate:j.created_at,lastActive:"Recently",teamId:j.team_id,teamRole:j.team_role,teamName:(P=j.teams)==null?void 0:P.name}});e("✅ Users loaded successfully:",_.length),r(_)}catch(m){console.error("💥 Error loading users:",m),c("Failed to load users")}finally{o(!1)}},[e]),d=b.useCallback(async()=>{try{e("🏢 Loading teams for admin panel...");const{data:m,error:h}=await V.from("teams").select("id, name, member_count");if(h)throw console.error("❌ Error loading teams:",h),h;const p=(m||[]).map(y=>({id:y.id,name:y.name,memberCount:y.member_count}));e("✅ Teams loaded successfully:",p.length),s(p)}catch(m){console.error("💥 Error loading teams:",m)}},[e]),f=b.useCallback(async()=>{await Promise.all([u(),d()])},[u,d]);return b.useEffect(()=>{f()},[f]),{users:t,teams:n,loading:i,error:l,refreshData:f}}function hK(){const{users:e,teams:t,loading:r,error:n}=fK(),[s,i]=b.useState(""),[o,l]=b.useState("all"),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[m,h]=b.useState(!1),p=[{key:"user",header:"User",render:x=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs sm:text-sm font-medium text-indigo-600",children:x.name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:x.name}),a.jsx("div",{className:"text-sm text-gray-500 truncate",children:x.email})]})]})},{key:"team",header:"Team",render:x=>a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Gl,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 truncate max-w-32",children:x.teamName||"No Team"})]}),x.teamRole&&a.jsx(xr,{type:"teamRole",value:x.teamRole})]})},{key:"role",header:"Role",render:x=>a.jsx(xr,{type:"role",value:x.role}),className:"whitespace-nowrap"},{key:"status",header:"Status",render:x=>a.jsx(xr,{type:"status",value:x.status}),className:"whitespace-nowrap"},{key:"subscription",header:"Subscription",render:x=>a.jsx("span",{className:"text-sm text-gray-900 capitalize",children:x.subscription}),className:"whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell",headerClassName:"hidden sm:table-cell"},{key:"joinDate",header:"Join Date",render:x=>a.jsx("span",{className:"text-sm text-gray-500",children:new Date(x.joinDate).toLocaleDateString()}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"},{key:"lastActive",header:"Last Active",render:x=>a.jsx("span",{className:"text-sm text-gray-500",children:x.lastActive}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"}],y=e.filter(x=>{const v=x.name.toLowerCase().includes(s.toLowerCase())||x.email.toLowerCase().includes(s.toLowerCase())||(x.teamName||"No Team").toLowerCase().includes(s.toLowerCase()),g=o==="all"||x.role===o,w=c==="all"||x.status===c,_=d==="all"||x.teamId===d;return v&&g&&w&&_});return r?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading user data..."})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage user accounts, roles, and permissions across all teams."})]}),a.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]}),n&&a.jsx(Re,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users by name, email, or team...",value:s,onChange:x=>i(x.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"System Admin"}),a.jsx("option",{value:"user",children:"User"})]}),a.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"suspended",children:"Suspended"})]}),a.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Teams"}),a.jsx("option",{value:"",children:"No Team"}),t.map(x=>a.jsx("option",{value:x.id,children:x.name},x.id))]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(U0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[y.length," of ",e.length," users"]})]})]})]})}),a.jsx(an,{columns:p,data:y,loading:r,emptyState:{icon:Xe,title:"No Users Found",description:e.length===0?"No users found in the system.":"No users match your search criteria."}}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mt-6 sm:mt-8",children:[a.jsx(pt,{title:"Total Users",value:e.length,icon:Xe,iconColor:"text-indigo-600"}),a.jsx(pt,{title:"System Admins",value:e.filter(x=>x.role==="admin").length,icon:Nn,iconColor:"text-purple-600"}),a.jsx(pt,{title:"Teams",value:t.length,icon:Gl,iconColor:"text-green-600"}),a.jsx(pt,{title:"Active Users",value:e.filter(x=>x.status==="active").length,icon:Yl,iconColor:"text-blue-600"})]})]})})}const mK=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function pK(){const{questions:e,loading:t,fetchQuestions:r,createQuestion:n,updateQuestion:s,deleteQuestion:i}=aa(),[o,l]=b.useState(1),c=25,[u,d]=b.useState(""),[f,m]=b.useState("all"),[h,p]=b.useState("all"),[y,x]=b.useState(!1),[v,g]=b.useState(null),[w,_]=b.useState({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"});b.useEffect(()=>{r()},[r]);const j=e.filter(O=>{const A=O.question.toLowerCase().includes(u.toLowerCase())||O.answer.toLowerCase().includes(u.toLowerCase())||O.book_of_bible.toLowerCase().includes(u.toLowerCase()),k=f==="all"||O.book_of_bible===f,E=h==="all"||O.tier===h;return A&&k&&E}),N=Math.max(1,Math.ceil(j.length/c)),S=Math.min(o,N),P=j.slice((S-1)*c,S*c),C=Array.from(new Set(e.map(O=>O.book_of_bible))).sort(),I=[{key:"question",header:"Question",render:O=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:O.question})})},{key:"book_chapter",header:"Book & Chapter",render:O=>a.jsxs("div",{className:"text-sm text-gray-900",children:[a.jsx("div",{className:"font-medium",children:O.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",O.chapter]})]}),className:"whitespace-nowrap"},{key:"answer",header:"Answer",render:O=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm text-gray-900 line-clamp-2",children:O.answer})})},{key:"points",header:"Points",render:O=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cr,{className:"h-4 w-4 text-yellow-500 mr-1"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:O.points})]}),className:"whitespace-nowrap"},{key:"time_to_answer",header:"Time",render:O=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ge,{className:"h-4 w-4 text-gray-500 mr-1"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[O.time_to_answer,"s"]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:O=>a.jsx(xr,{type:"tier",value:O.tier,showIcon:!0}),className:"whitespace-nowrap"},{key:"actions",header:"",render:O=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>D(O),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>q(O.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(ii,{className:"h-4 w-4"})})]}),className:"whitespace-nowrap text-right text-sm font-medium",headerClassName:"relative"}],T=()=>{g(null),_({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"}),x(!0)},D=O=>{g(O),_({book_of_bible:O.book_of_bible,chapter:O.chapter,question:O.question,answer:O.answer,points:O.points,time_to_answer:O.time_to_answer,tier:O.tier}),x(!0)},z=async()=>{try{v?await s(v.id,w):await n(w),x(!1)}catch(O){console.error("Error saving question:",O)}},q=async O=>{if(confirm("Are you sure you want to delete this question?"))try{await i(O)}catch(A){console.error("Error deleting question:",A)}},L={total:e.length,free:e.filter(O=>O.tier==="free").length,pro:e.filter(O=>O.tier==="pro").length,enterprise:e.filter(O=>O.tier==="enterprise").length,books:C.length};return t?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading questions..."})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Question Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage quiz questions for the Pathfinder Bible Experience."})]}),a.jsxs("button",{onClick:T,className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Question"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(pt,{title:"Total Questions",value:L.total,icon:Ce,iconColor:"text-indigo-600"}),a.jsx(pt,{title:"Free",value:L.free,icon:_M,iconColor:"text-green-600"}),a.jsx(pt,{title:"Pro",value:L.pro,icon:Cr,iconColor:"text-blue-600"}),a.jsx(pt,{title:"Enterprise",value:L.enterprise,icon:Cr,iconColor:"text-purple-600"}),a.jsx(pt,{title:"Bible Books",value:L.books,icon:Ce,iconColor:"text-gray-600"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search questions by text, answer, or book...",value:u,onChange:O=>d(O.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("select",{value:f,onChange:O=>m(O.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Books"}),C.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsxs("select",{value:h,onChange:O=>p(O.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Tiers"}),a.jsx("option",{value:"free",children:"Free"}),a.jsx("option",{value:"pro",children:"Pro"}),a.jsx("option",{value:"enterprise",children:"Enterprise"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(U0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[j.length," of ",e.length," questions"]})]})]})]})}),a.jsx(an,{columns:I,data:P,loading:t,emptyState:{icon:Ce,title:"No Questions Found",description:"No questions found matching your criteria"}}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(S-1)*c+1,"-",Math.min(S*c,j.length)," of ",j.length]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>l(O=>Math.max(1,O-1)),disabled:S===1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",S," of ",N]}),a.jsx("button",{onClick:()=>l(O=>Math.min(N,O+1)),disabled:S===N,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),a.jsx(Pn,{isOpen:y,onClose:()=>x(!1),title:v?"Edit Question":"Add New Question",maxWidth:"2xl",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:z,disabled:!w.book_of_bible||!w.question||!w.answer,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(B0,{className:"h-4 w-4"}),a.jsx("span",{children:v?"Update Question":"Add Question"})]})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Book of the Bible"}),a.jsxs("select",{value:w.book_of_bible,onChange:O=>_({...w,book_of_bible:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"",children:"Select a book"}),mK.map(O=>a.jsx("option",{value:O,children:O},O))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter"}),a.jsx("input",{type:"number",min:"1",max:"150",value:w.chapter,onChange:O=>_({...w,chapter:parseInt(O.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question"}),a.jsx("textarea",{value:w.question,onChange:O=>_({...w,question:O.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the quiz question...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer"}),a.jsx("textarea",{value:w.answer,onChange:O=>_({...w,answer:O.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the correct answer...",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),a.jsx("input",{type:"number",min:"1",max:"100",value:w.points,onChange:O=>_({...w,points:parseInt(O.target.value)||10}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time (seconds)"}),a.jsx("input",{type:"number",min:"10",max:"300",value:w.time_to_answer,onChange:O=>_({...w,time_to_answer:parseInt(O.target.value)||30}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tier"}),a.jsxs("select",{value:w.tier,onChange:O=>_({...w,tier:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"free",children:"🆓 Free"}),a.jsx("option",{value:"pro",children:"⭐ Pro"}),a.jsx("option",{value:"enterprise",children:"👑 Enterprise"})]})]})]})]})})]})})}function gK(){const{developerLog:e}=ve(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{o(!0),c(null);try{e("📊 Fetching plan data from Supabase...");const{data:d,error:f}=await V.from("plans").select("*").order("name",{ascending:!0});if(f)throw console.error("❌ Error fetching plans:",f),f;const{data:m,error:h}=await V.from("plan_settings").select("*");if(h)throw console.error("❌ Error fetching plan settings:",h),h;const{data:p,error:y}=await V.from("plan_prices").select("*");if(y)throw console.error("❌ Error fetching plan prices:",y),y;const x=(d||[]).map(v=>{const w=(p||[]).filter(_=>_.plan_id===v.id);return{...v,prices:w}});e("✅ Plans fetched successfully:",x.length,"plans"),e("DEBUG: plansWithPrices before setting state:",JSON.stringify(x,null,2)),e("DEBUG: Raw prices data from DB:",JSON.stringify(p,null,2)),r(x),e("✅ Plan settings fetched successfully:",(m==null?void 0:m.length)||0,"settings"),s(m||[])}catch(d){console.error("💥 Error fetching plan data:",d),c("Failed to load plan data.")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{plans:t,planSettings:n,loading:i,error:l,fetchPlanData:u}}function at(e){const[t,r]=se.useState(!1),n=`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 ${e.error?"border-red-300 focus:ring-red-500":""} ${e.disabled?"bg-gray-50 text-gray-500 cursor-not-allowed":""}`,s=()=>{switch(e.type){case"password":return a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:e.id,type:t?"text":"password",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:`${n} ${e.showToggle!==!1?"pr-10":""}`}),e.showToggle!==!1&&a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),disabled:e.disabled,children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]});case"textarea":return a.jsx("textarea",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,rows:e.rows||3,disabled:e.disabled,className:n});case"select":return a.jsxs("select",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),disabled:e.disabled,className:n,children:[e.placeholder&&a.jsx("option",{value:"",children:e.placeholder}),e.options.map(i=>a.jsx("option",{value:i.value,children:i.label},i.value))]});case"number":return a.jsx("input",{id:e.id,type:"number",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,min:e.min,max:e.max,disabled:e.disabled,className:n});default:return a.jsx("input",{id:e.id,type:e.type,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:n})}};return a.jsxs("div",{className:e.className,children:[a.jsxs("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s(),e.helpText&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.helpText}),e.error&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.error})]})}function ts({variant:e="primary",size:t="md",icon:r,iconPosition:n="left",loading:s=!1,disabled:i=!1,fullWidth:o=!1,children:l,onClick:c,type:u="button",className:d=""}){const f=()=>{switch(e){case"primary":return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500";case"secondary":return"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500";case"danger":return"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500";case"success":return"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500";case"ghost":return"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:ring-gray-500";default:return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500"}},m=()=>{switch(t){case"sm":return"px-3 py-1.5 text-sm";case"md":return"px-4 py-2 text-sm";case"lg":return"px-6 py-3 text-base";default:return"px-4 py-2 text-sm"}},h=`
    inline-flex items-center justify-center font-medium rounded-lg
    focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-all duration-200
  `,p=f(),y=m(),x=o?"w-full":"",v=i||s;return a.jsx("button",{type:u,onClick:c,disabled:v,className:`${h} ${p} ${y} ${x} ${d}`.trim(),children:s?a.jsxs(a.Fragment,{children:[a.jsx(lo,{className:"mr-2"}),a.jsx("span",{children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[r&&n==="left"&&a.jsx(r,{className:`h-4 w-4 ${l?"mr-2":""}`}),l,r&&n==="right"&&a.jsx(r,{className:`h-4 w-4 ${l?"ml-2":""}`})]})})}function xK(){var D,z,q,L,O,A;const{plans:e,planSettings:t,loading:r,error:n,fetchPlanData:s}=gK(),[i,o]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(null),[f,m]=b.useState({}),[h,p]=b.useState({}),[y,x]=b.useState([]),[v,g]=b.useState(null),[w,_]=b.useState(!1),j=k=>{c(k),m(k);const E=t.find($=>$.plan_id===k.id);d(E||null),p(E||{plan_id:k.id,max_questions_custom_quiz:0,max_team_members:0,question_tier_access:[],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),x(k.prices||[]),g(null),o(!0)},N=()=>{c(null),m({id:"",name:"",is_enabled:!0,description:""}),p({max_questions_custom_quiz:20,max_team_members:5,question_tier_access:["free"],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),x([]),g(null),o(!0)},S=()=>{const k={plan_id:f.id||"",currency:"USD",interval:"monthly",amount:0};x(E=>[...E,k])},P=(k,E)=>{x($=>$.map((R,U)=>U===k?{...R,...E}:R))},C=k=>{x(E=>E.filter(($,R)=>R!==k))},I=async()=>{if(g(null),_(!0),!f.name||!f.id||h.max_questions_custom_quiz===void 0||h.max_team_members===void 0||h.allow_quick_start_quiz===void 0||h.allow_create_own_quiz===void 0||h.allow_study_schedule_quiz===void 0||h.allow_analytics_access===void 0){g("Please fill in all required fields."),_(!1);return}for(const E of y)if(!E.currency||!E.interval||E.amount===void 0||E.amount<0){g("Please ensure all price entries have valid currency, interval, and amount."),_(!1);return}const k=new Set;for(const E of y){const $=`${E.currency}-${E.interval}`;if(k.has($)){g(`Duplicate price entry found for ${E.currency} (${E.interval}). Each plan can only have one price per currency and interval combination.`),_(!1);return}k.add($)}try{if(l){const{error:E}=await V.from("plans").update({name:f.name,is_enabled:f.is_enabled,description:f.description,updated_at:new Date().toISOString()}).eq("id",f.id);if(E)throw E;const{error:$}=await V.from("plan_settings").update({max_questions_custom_quiz:h.max_questions_custom_quiz,max_team_members:h.max_team_members,question_tier_access:h.question_tier_access,allow_quick_start_quiz:h.allow_quick_start_quiz,allow_create_own_quiz:h.allow_create_own_quiz,allow_study_schedule_quiz:h.allow_study_schedule_quiz,allow_analytics_access:h.allow_analytics_access,updated_at:new Date().toISOString()}).eq("plan_id",f.id);if($)throw $;const{error:R}=await V.from("plan_prices").delete().eq("plan_id",f.id);if(R)throw R;if(y.length>0){const{error:U}=await V.from("plan_prices").insert(y.map(J=>({plan_id:f.id,currency:J.currency,interval:J.interval,amount:J.amount,stripe_price_id:J.stripe_price_id})));if(U)throw U}console.log("✅ Plan updated successfully")}else{const{error:E}=await V.from("plans").insert([{id:f.id,name:f.name,is_enabled:f.is_enabled,description:f.description}]);if(E)throw E;const{error:$}=await V.from("plan_settings").insert([{plan_id:f.id,max_questions_custom_quiz:h.max_questions_custom_quiz,max_team_members:h.max_team_members,question_tier_access:h.question_tier_access,allow_quick_start_quiz:h.allow_quick_start_quiz,allow_create_own_quiz:h.allow_create_own_quiz,allow_study_schedule_quiz:h.allow_study_schedule_quiz,allow_analytics_access:h.allow_analytics_access}]);if($)throw $;if(y.length>0){const{error:R}=await V.from("plan_prices").insert(y.map(U=>({plan_id:f.id,currency:U.currency,interval:U.interval,amount:U.amount,stripe_price_id:U.stripe_price_id})));if(R)throw R}console.log("✅ Plan created successfully")}o(!1),await s()}catch(E){console.error("Error saving plan:",E),g(E.message||"Failed to save plan.")}finally{_(!1)}},T=[{key:"name",header:"Plan Name",render:k=>a.jsx("div",{className:"font-medium text-gray-900",children:k.name})},{key:"prices",header:"Pricing",render:k=>a.jsx("div",{className:"text-sm text-gray-900",children:k.prices&&k.prices.length>0?a.jsx("div",{className:"space-y-1",children:k.prices.map((E,$)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium",children:["$",E.amount.toFixed(2)," ",E.currency]}),a.jsxs("span",{className:"text-gray-500",children:["/",E.interval]})]},$))}):a.jsx("span",{className:"text-gray-500 italic",children:"No pricing set"})})},{key:"is_enabled",header:"Enabled",render:k=>k.is_enabled?a.jsx(Dt,{className:"h-5 w-5 text-green-500"}):a.jsx(Jn,{className:"h-5 w-5 text-red-500"}),className:"text-center"},{key:"max_questions_custom_quiz",header:"Max Custom Quiz Qs",render:k=>{const E=t.find($=>$.plan_id===k.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(E==null?void 0:E.max_questions_custom_quiz)||"N/A"})},className:"text-center"},{key:"max_team_members",header:"Max Team Members",render:k=>{const E=t.find($=>$.plan_id===k.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(E==null?void 0:E.max_team_members)||"N/A"})},className:"text-center"},{key:"question_tier_access",header:"Question Tiers",render:k=>{var $;const E=t.find(R=>R.plan_id===k.id);return a.jsx("div",{className:"text-sm text-gray-900",children:($=E==null?void 0:E.question_tier_access)==null?void 0:$.map(R=>a.jsx("span",{className:"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs font-medium text-gray-600 mr-1 mb-1 capitalize",children:R},R))})}},{key:"feature_access",header:"Feature Access",render:k=>{const E=t.find($=>$.plan_id===k.id);return a.jsxs("div",{className:"text-sm text-gray-900 flex flex-col space-y-1",children:[a.jsxs("span",{className:"flex items-center",children:[E!=null&&E.allow_quick_start_quiz?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Jn,{className:"h-4 w-4 text-red-500 mr-1"})," Quick Start Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[E!=null&&E.allow_create_own_quiz?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Jn,{className:"h-4 w-4 text-red-500 mr-1"})," Custom Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[E!=null&&E.allow_study_schedule_quiz?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Jn,{className:"h-4 w-4 text-red-500 mr-1"})," Study Schedule"]}),a.jsxs("span",{className:"flex items-center",children:[E!=null&&E.allow_analytics_access?a.jsx(Dt,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Jn,{className:"h-4 w-4 text-red-500 mr-1"})," Analytics Access"]})]})}},{key:"actions",header:"",render:k=>a.jsx("button",{onClick:()=>j(k),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),className:"text-right"}];return r?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading plans..."})}):n?a.jsx(ge,{children:a.jsx("div",{className:"p-6",children:a.jsx(Re,{type:"error",message:n,className:"mb-6"})})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Plan Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage subscription plans and their associated settings."})]}),a.jsx(ts,{variant:"primary",icon:Ki,onClick:N,children:"Add New Plan"})]}),a.jsx(an,{columns:T,data:e,emptyState:{title:"No Plans Found",description:"No subscription plans are configured in the system."}}),a.jsxs(Pn,{isOpen:i,onClose:()=>o(!1),title:l?`Edit Plan: ${l.name}`:"Add New Plan",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(ts,{variant:"secondary",onClick:()=>o(!1),disabled:w,children:"Cancel"}),a.jsx(ts,{variant:"primary",onClick:I,loading:w,children:"Save Changes"})]}),children:[v&&a.jsx(Re,{type:"error",message:v,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plan Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(at,{label:"Plan ID",id:"planId",type:"text",value:f.id||"",onChange:k=>m({...f,id:k}),required:!0,disabled:!!l,helpText:l?void 0:"Unique identifier for the plan (e.g., 'free', 'pro')"}),a.jsx(at,{label:"Plan Name",id:"planName",type:"text",value:f.name||"",onChange:k=>m({...f,name:k}),required:!0}),a.jsx(at,{label:"Is Enabled",id:"planEnabled",type:"select",value:((D=f.is_enabled)==null?void 0:D.toString())||"true",onChange:k=>m({...f,is_enabled:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]}),a.jsx(at,{label:"Description",id:"planDescription",type:"textarea",value:f.description||"",onChange:k=>m({...f,description:k})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing"}),a.jsx(ts,{variant:"secondary",icon:Ki,size:"sm",onClick:S,children:"Add Price"})]}),y.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[a.jsx(xS,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No pricing configured"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add pricing options for this plan"})]}):a.jsx("div",{className:"space-y-4",children:y.map((k,E)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Price Option ",E+1]}),a.jsx(ts,{variant:"danger",size:"sm",icon:ii,onClick:()=>C(E),children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(at,{label:"Currency",id:`currency-${E}`,type:"select",value:k.currency,onChange:$=>P(E,{currency:$}),options:[{value:"USD",label:"USD ($)"},{value:"GBP",label:"GBP (£)"},{value:"AUD",label:"AUD (A$)"},{value:"CAD",label:"CAD (C$)"}],required:!0}),a.jsx(at,{label:"Billing Interval",id:`interval-${E}`,type:"select",value:k.interval,onChange:$=>P(E,{interval:$}),options:[{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],required:!0}),a.jsx(at,{label:"Amount",id:`amount-${E}`,type:"number",value:k.amount,onChange:$=>P(E,{amount:parseFloat($)||0}),min:0,required:!0})]}),a.jsx("div",{className:"mt-4",children:a.jsx(at,{label:"Stripe Price ID (Optional)",id:`stripe-${E}`,type:"text",value:k.stripe_price_id||"",onChange:$=>P(E,{stripe_price_id:$}),helpText:"Will be populated automatically when synced with Stripe"})})]},E))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plan Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(at,{label:"Max Questions Custom Quiz",id:"maxQuestionsCustomQuiz",type:"number",value:h.max_questions_custom_quiz||0,onChange:k=>p({...h,max_questions_custom_quiz:parseInt(k)}),min:0,required:!0}),a.jsx(at,{label:"Max Team Members",id:"maxTeamMembers",type:"number",value:h.max_team_members||0,onChange:k=>p({...h,max_team_members:parseInt(k)}),min:0,required:!0}),a.jsx(at,{label:"Question Tier Access (comma-separated)",id:"questionTierAccess",type:"text",value:((z=h.question_tier_access)==null?void 0:z.join(", "))||"",onChange:k=>p({...h,question_tier_access:k.split(",").map(E=>E.trim())}),helpText:"e.g., free, pro, enterprise"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Feature Access"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(at,{label:"Allow Quick Start Quiz",id:"allowQuickStartQuiz",type:"select",value:((q=h.allow_quick_start_quiz)==null?void 0:q.toString())||"true",onChange:k=>p({...h,allow_quick_start_quiz:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(at,{label:"Allow Create Own Quiz",id:"allowCreateOwnQuiz",type:"select",value:((L=h.allow_create_own_quiz)==null?void 0:L.toString())||"true",onChange:k=>p({...h,allow_create_own_quiz:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(at,{label:"Allow Study Schedule Quiz",id:"allowStudyScheduleQuiz",type:"select",value:((O=h.allow_study_schedule_quiz)==null?void 0:O.toString())||"false",onChange:k=>p({...h,allow_study_schedule_quiz:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(at,{label:"Allow Analytics Access",id:"allowAnalyticsAccess",type:"select",value:((A=h.allow_analytics_access)==null?void 0:A.toString())||"false",onChange:k=>p({...h,allow_analytics_access:k==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]})]})]})]})]})]})]})})}const x1=[{value:"total_quizzes_completed",label:"Total Quizzes Completed"},{value:"total_points_earned",label:"Total Points Earned"},{value:"longest_streak",label:"Longest Study Streak"},{value:"total_questions_answered",label:"Total Questions Answered"},{value:"perfect_quiz",label:"Perfect Quiz Score"},{value:"speed_demon",label:"Speed Demon (Fast Completion)"},{value:"accuracy_book_ruth",label:"Ruth Book Accuracy"},{value:"accuracy_book_esther",label:"Esther Book Accuracy"},{value:"accuracy_book_daniel",label:"Daniel Book Accuracy"},{value:"accuracy_chapter",label:"Chapter Accuracy"},{value:"accuracy_tier_free",label:"Free Tier Accuracy"},{value:"accuracy_tier_pro",label:"Pro Tier Accuracy"},{value:"accuracy_tier_enterprise",label:"Enterprise Tier Accuracy"}];function yK(){const{achievements:e,loading:t,error:r,refreshGamificationData:n}=Y0(),[s,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),[d,f]=b.useState(null),[m,h]=b.useState(!1),p=()=>{l(null),u({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),f(null),i(!0)},y=j=>{l(j),u({name:j.name,description:j.description,criteria_type:j.criteria_type,criteria_value:j.criteria_value,badge_icon_url:j.badge_icon_url}),f(null),i(!0)},x=async()=>{if(f(null),h(!0),!c.name.trim()||!c.description.trim()||c.criteria_value<=0){f("Please fill in all required fields with valid values."),h(!1);return}try{if(o){const{error:j}=await V.from("achievements").update({name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}).eq("id",o.id);if(j)throw j;console.log("✅ Achievement updated successfully")}else{const{error:j}=await V.from("achievements").insert([{name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}]);if(j)throw j;console.log("✅ Achievement created successfully")}i(!1),await n()}catch(j){console.error("Error saving achievement:",j),f(j.message||"Failed to save achievement.")}finally{h(!1)}},v=async(j,N)=>{if(confirm(`Are you sure you want to delete the achievement "${N}"? This action cannot be undone.`))try{h(!0);const{error:S}=await V.from("user_achievements").delete().eq("achievement_id",j);S&&console.warn("Warning: Could not delete user achievements:",S);const{error:P}=await V.from("achievements").delete().eq("id",j);if(P)throw P;console.log("✅ Achievement deleted successfully"),await n()}catch(S){console.error("Error deleting achievement:",S),f(S.message||"Failed to delete achievement.")}finally{h(!1)}},g=j=>{switch(j){case"total_quizzes_completed":return a.jsx(Ce,{className:"h-4 w-4 text-blue-600"});case"total_points_earned":return a.jsx(Kt,{className:"h-4 w-4 text-yellow-600"});case"longest_streak":return a.jsx(Vn,{className:"h-4 w-4 text-orange-600"});case"total_questions_answered":return a.jsx(xt,{className:"h-4 w-4 text-green-600"});case"perfect_quiz":return a.jsx(Gi,{className:"h-4 w-4 text-purple-600"});case"speed_demon":return a.jsx(Ge,{className:"h-4 w-4 text-red-600"});default:return a.jsx(Cr,{className:"h-4 w-4 text-gray-600"})}},w=j=>{const N=x1.find(S=>S.value===j);return(N==null?void 0:N.label)||j},_=[{key:"badge",header:"Badge",render:j=>a.jsxs("div",{className:"flex items-center justify-center",children:[j.badge_icon_url?a.jsx("img",{src:j.badge_icon_url,alt:j.name,className:"h-8 w-8 rounded-full",onError:N=>{var S;N.currentTarget.style.display="none",(S=N.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,a.jsx("div",{className:`h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center ${j.badge_icon_url?"hidden":""}`,children:a.jsx(Cr,{className:"h-5 w-5 text-gray-600"})})]}),className:"text-center w-16"},{key:"name",header:"Achievement Name",render:j=>a.jsx("div",{className:"font-medium text-gray-900",children:j.name})},{key:"description",header:"Description",render:j=>a.jsx("div",{className:"text-sm text-gray-600 max-w-xs line-clamp-2",children:j.description})},{key:"criteria",header:"Criteria",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[g(j.criteria_type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(j.criteria_type)}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",j.criteria_value]})]})]})},{key:"actions",header:"",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>y(j),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Edit achievement",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>v(j.id,j.name),className:"text-red-600 hover:text-red-700 transition-colors duration-200",title:"Delete achievement",children:a.jsx(ii,{className:"h-4 w-4"})})]}),className:"text-right"}];return t?a.jsx(ge,{children:a.jsx(zt,{fullScreen:!0,text:"Loading achievements..."})}):a.jsx(ge,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Achievement Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage achievements that users can unlock through their quiz activities."})]}),a.jsx(ts,{variant:"primary",icon:Ki,onClick:p,children:"Add New Achievement"})]}),r&&a.jsx(Re,{type:"error",message:r,className:"mb-6"}),d&&a.jsx(Re,{type:"error",message:d,className:"mb-6",dismissible:!0,onDismiss:()=>f(null)}),a.jsx(an,{columns:_,data:e,loading:t,emptyState:{icon:Cr,title:"No Achievements Found",description:"No achievements are configured in the system. Create your first achievement to get started.",action:a.jsx(ts,{variant:"primary",icon:Ki,onClick:p,children:"Create First Achievement"})}}),a.jsxs(Pn,{isOpen:s,onClose:()=>{i(!1),f(null)},title:o?`Edit Achievement: ${o.name}`:"Add New Achievement",maxWidth:"2xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(ts,{variant:"secondary",onClick:()=>{i(!1),f(null)},disabled:m,children:"Cancel"}),a.jsx(ts,{variant:"primary",onClick:x,loading:m,disabled:!c.name.trim()||!c.description.trim()||c.criteria_value<=0,children:o?"Update Achievement":"Create Achievement"})]}),children:[d&&a.jsx(Re,{type:"error",message:d,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(at,{label:"Achievement Name",id:"achievementName",type:"text",value:c.name,onChange:j=>u({...c,name:j}),placeholder:"e.g., Quiz Master",required:!0}),a.jsx(at,{label:"Badge Icon URL",id:"badgeIconUrl",type:"text",value:c.badge_icon_url,onChange:j=>u({...c,badge_icon_url:j}),placeholder:"https://example.com/badge.png (optional)",helpText:"Leave empty to use default icon"})]}),a.jsx(at,{label:"Description",id:"achievementDescription",type:"textarea",value:c.description,onChange:j=>u({...c,description:j}),placeholder:"Describe what the user needs to do to unlock this achievement...",rows:3,required:!0}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(at,{label:"Criteria Type",id:"criteriaType",type:"select",value:c.criteria_type,onChange:j=>u({...c,criteria_type:j}),options:x1,required:!0}),a.jsx(at,{label:"Target Value",id:"criteriaValue",type:"number",value:c.criteria_value,onChange:j=>u({...c,criteria_value:parseInt(j)||1}),min:1,required:!0,helpText:"The target value the user must reach to unlock this achievement"})]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Preview"}),a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:[c.badge_icon_url?a.jsx("img",{src:c.badge_icon_url,alt:"Badge preview",className:"h-10 w-10 rounded-full",onError:j=>{var N;j.currentTarget.style.display="none",(N=j.currentTarget.nextElementSibling)==null||N.classList.remove("hidden")}}):null,a.jsx(Cr,{className:`h-6 w-6 text-gray-600 ${c.badge_icon_url?"hidden":""}`})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c.name||"Achievement Name"}),a.jsx("p",{className:"text-sm text-gray-600",children:c.description||"Achievement description will appear here..."}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[g(c.criteria_type),a.jsxs("span",{className:"text-xs text-gray-500",children:[w(c.criteria_type),": ",c.criteria_value]})]})]})]})]})]})]})]})})}function vK(){return a.jsx(M4,{children:a.jsx(ZD,{children:a.jsx(eM,{children:a.jsx(CM,{children:a.jsx(MM,{children:a.jsx(k4,{children:a.jsxs(y4,{children:[a.jsx(ke,{path:"/",element:a.jsx(Xn,{to:"/login",replace:!0})}),a.jsx(ke,{path:"/documentation",element:a.jsx(Xn,{to:"/login",replace:!0})}),a.jsx(ke,{path:"/features",element:a.jsx(Xn,{to:"/login",replace:!0})}),a.jsx(ke,{path:"/login",element:a.jsx(rI,{})}),a.jsx(ke,{path:"/signup",element:a.jsx(Xn,{to:"/login",replace:!0})}),a.jsx(ke,{path:"/forgot-password",element:a.jsx(nI,{})}),a.jsx(ke,{path:"/reset-password",element:a.jsx(sI,{})}),a.jsx(ke,{path:"/invitations/accept",element:a.jsx(LW,{})}),a.jsx(ke,{path:"/dashboard",element:a.jsx(dt,{children:a.jsx(oI,{})})}),a.jsx(ke,{path:"/invitations",element:a.jsx(dt,{children:a.jsx(zW,{})})}),a.jsx(ke,{path:"/analytics",element:a.jsx(dt,{allowedTeamRoles:["owner","admin"],children:a.jsx(CW,{})})}),a.jsx(ke,{path:"/team",element:a.jsx(dt,{allowedTeamRoles:["owner","admin"],children:a.jsx($W,{})})}),a.jsx(ke,{path:"/quiz",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(RW,{})})}),a.jsx(ke,{path:"/quiz/quick-start",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(YW,{})})}),a.jsx(ke,{path:"/quiz/create-own",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(XW,{})})}),a.jsx(ke,{path:"/quiz/study-assignment/:assignmentId",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(JW,{})})}),a.jsx(ke,{path:"/quiz/runner/:quizSessionId",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(yh,{})})}),a.jsx(ke,{path:"/schedule",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(aK,{})})}),a.jsx(ke,{path:"/achievements",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(ZW,{})})}),a.jsx(ke,{path:"/leaderboard",element:a.jsx(dt,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(cK,{})})}),a.jsx(ke,{path:"/billing",element:a.jsx(dt,{allowedTeamRoles:["owner"],children:a.jsx(OW,{})})}),a.jsx(ke,{path:"/billing/success",element:a.jsx(IW,{})}),a.jsx(ke,{path:"/settings",element:a.jsx(dt,{children:a.jsx(fI,{})})}),a.jsx(ke,{path:"/admin",element:a.jsx(dt,{requireAdmin:!0,children:a.jsx(dK,{})})}),a.jsx(ke,{path:"/admin/users",element:a.jsx(dt,{requireAdmin:!0,children:a.jsx(hK,{})})}),a.jsx(ke,{path:"/admin/questions",element:a.jsx(dt,{requireAdmin:!0,children:a.jsx(pK,{})})}),a.jsx(ke,{path:"/admin/plans",element:a.jsx(dt,{requireAdmin:!0,children:a.jsx(xK,{})})}),a.jsx(ke,{path:"/admin/achievements",element:a.jsx(dt,{requireAdmin:!0,children:a.jsx(yK,{})})}),a.jsx(ke,{path:"*",element:a.jsx(Xn,{to:"/",replace:!0})})]})})})})})})})}TN(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(vK,{})}));
